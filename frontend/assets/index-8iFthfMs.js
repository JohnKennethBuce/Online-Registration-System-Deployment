import{r,j as e,N as vt,u as ut,C as ye,S as je,A as ue,B as de,a as re,b as S,d as J,e as g,P as Ie,L as be,F as T,I as We,f as wt,O as Mt,h as Nt,i as Lt,k as Dt,T as Wt,l as xt,m as Ht,n as ze,o as Gt,p as $t,q as he,s as tt,t as pt,D as De,v as Ut,w as qt}from"./react-vendor-D9VEH3Zq.js";import{a as Vt}from"./axios-vendor-ngrFHoWO.js";import{y as Qt,z as Yt,E as Xt,C as Kt}from"./vendor-ZyuGVGXv.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))u(d);new MutationObserver(d=>{for(const x of d)if(x.type==="childList")for(const a of x.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&u(a)}).observe(document,{childList:!0,subtree:!0});function l(d){const x={};return d.integrity&&(x.integrity=d.integrity),d.referrerPolicy&&(x.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?x.credentials="include":d.crossOrigin==="anonymous"?x.credentials="omit":x.credentials="same-origin",x}function u(d){if(d.ep)return;d.ep=!0;const x=l(d);fetch(d.href,x)}})();var Jt={};let mt=null;const Zt=t=>{mt=t},G=Vt.create({baseURL:Jt.REACT_APP_API_URL,headers:{"Content-Type":"application/json"}});G.interceptors.request.use(t=>{const o=localStorage.getItem("token");return o&&(t.headers.Authorization=`Bearer ${o}`),t},t=>Promise.reject(t));G.interceptors.response.use(t=>t,t=>(t.response?.status===401?(console.warn("🔒 Unauthorized. Logging out..."),mt&&mt()):t.response?.status===403&&console.warn("⛔ Forbidden. You don't have permission for this action."),Promise.reject(t)));const kt=r.createContext();function Rt({children:t}){const[o,l]=r.useState(localStorage.getItem("token")||null),[u,d]=r.useState(localStorage.getItem("user")?JSON.parse(localStorage.getItem("user")):null),[x,a]=r.useState(!0),m=r.useCallback(async()=>{if(o)try{await G.post("/auth/logout")}catch(p){console.error("Logout error:",p)}l(null),d(null),localStorage.removeItem("token"),localStorage.removeItem("user")},[o]);r.useEffect(()=>{Zt(m)},[m]);const s=r.useCallback(async()=>{if(o)try{const p=await G.get("/auth/me");d(p.data),localStorage.setItem("user",JSON.stringify(p.data))}catch(p){console.error("Fetch user error:",p),m()}},[o,m]);r.useEffect(()=>{(async()=>{o&&!u&&await s(),a(!1)})()},[o,u,s]);const i=async(p,j)=>{const{data:R}=await G.post("/auth/login",{email:p,password:j});l(R.token),d(R.user),localStorage.setItem("token",R.token),localStorage.setItem("user",JSON.stringify(R.user))};return e.jsx(kt.Provider,{value:{token:o,user:u,login:i,logout:m,fetchUser:s,loading:x},children:t})}function He(){return r.useContext(kt)}function _t({children:t,roles:o}){const{user:l,token:u,fetchUser:d}=He(),[x,a]=r.useState(!0);return r.useEffect(()=>{(async()=>{u&&!l&&await d(),a(!1)})()},[u,l,d]),x?e.jsx("div",{children:"Loading..."}):u?o&&l&&!o.includes(l?.role?.name)?e.jsx(vt,{to:"/unauthorized",replace:!0}):t:e.jsx(vt,{to:"/login",replace:!0})}function es(){const t=ut(),{user:o}=He(),[l,u]=r.useState(null),[d,x]=r.useState(null),[a,m]=r.useState(null),[s,i]=r.useState([]),[p,j]=r.useState(!0),[R,f]=r.useState({}),[b,C]=r.useState(!1);r.useEffect(()=>{z()},[]);const _=Z=>Z?o?.role?.permissions?.includes(Z):!0,z=async()=>{try{j(!0),f({});const Z=[],ge={};Z.push(G.get("/server-mode").then(ee=>({type:"serverMode",data:ee.data})).catch(ee=>(ge.serverMode=ee.message,{type:"serverMode",data:null}))),_("view-dashboard")&&Z.push(G.get("/dashboard/summary").then(ee=>({type:"summary",data:ee.data})).catch(ee=>(ge.summary=ee.message,{type:"summary",data:null}))),_("view-reports")&&Z.push(G.get("/dashboard/reports-counts").then(ee=>({type:"reportsCounts",data:ee.data})).catch(ee=>(ge.reportsCounts=ee.message,{type:"reportsCounts",data:null}))),(await Promise.all(Z)).forEach(ee=>{if(ee.data)switch(ee.type){case"serverMode":m(ee.data.current_mode||ee.data);break;case"summary":u(ee.data),ee.data.scans_per_user&&i(ee.data.scans_per_user.slice(0,5));break;case"reportsCounts":x(ee.data);break}}),Object.keys(ge).length>0&&(f(ge),C(!0))}catch(Z){console.error("Dashboard error:",Z),f({global:"Failed to load dashboard data"})}finally{j(!1)}};if(p)return e.jsx(ye,{className:"d-flex justify-content-center align-items-center",style:{minHeight:"400px"},children:e.jsxs("div",{className:"text-center",children:[e.jsx(je,{animation:"border",variant:"primary",style:{width:"3rem",height:"3rem"}}),e.jsx("p",{className:"mt-3 text-muted fw-semibold",children:"Loading dashboard..."})]})});if(R.global&&!b)return e.jsx(ye,{className:"mt-4",children:e.jsxs(ue,{variant:"danger",children:[e.jsx(ue.Heading,{children:"⚠️ Error Loading Dashboard"}),e.jsx("p",{children:R.global}),e.jsx("hr",{}),e.jsx("div",{className:"d-flex justify-content-end",children:e.jsx(de,{variant:"outline-danger",onClick:z,children:"🔄 Try Again"})})]})});const D=d?.total||l?.total_registrations||0,$=d?.payment_status?.paid||0,v=d?.payment_status?.unpaid||0,P=d?.payment_status?.complimentary||0,B=d?.badge_status?.not_printed||0,q=d?.badge_status?.printed||0,O=d?.badge_status?.reprinted||0,V=D>0?$/D*100:0,ce=D>0?q/D*100:0,w=l?.registrations_by_type||[],M=l?.confirmed_vs_pending||[],A=M.find(Z=>Z.confirmed===1)?.total||d?.confirmed||l?.confirmed_count||0,E=M.find(Z=>Z.confirmed===0)?.total||d?.unconfirmed||D-A;return e.jsxs(ye,{fluid:!0,className:"py-4 px-3 px-md-4",style:{backgroundColor:"#f8f9fa",minHeight:"100vh"},children:[e.jsxs(re,{className:"mb-4",children:[e.jsxs(S,{children:[e.jsxs("h1",{className:"fw-bold mb-2",style:{color:"#2c3e50"},children:["🏠 Welcome back, ",o?.name||"User","!"]}),e.jsx("p",{className:"text-muted mb-0",children:"ICEGEX 2025 - Online Registration System Dashboard"})]}),e.jsx(S,{xs:"auto",children:e.jsx(de,{variant:"outline-primary",onClick:z,disabled:p,children:"🔄 Refresh"})})]}),b&&Object.keys(R).length>0&&e.jsx(re,{className:"mb-4",children:e.jsx(S,{children:e.jsxs(ue,{variant:"warning",dismissible:!0,onClose:()=>C(!1),children:[e.jsx(ue.Heading,{children:"⚠️ Partial Data Load"}),e.jsx("p",{className:"mb-0",children:"Some dashboard components couldn't be loaded. Showing available data."}),e.jsxs("small",{className:"text-muted",children:["Failed: ",Object.keys(R).join(", ")]})]})})}),a&&e.jsx(re,{className:"mb-4",children:e.jsx(S,{children:e.jsxs(ue,{variant:a.mode==="both"?"success":a.mode==="deactivate"?"danger":"info",className:"d-flex justify-content-between align-items-center mb-0",children:[e.jsxs("div",{children:[e.jsx("strong",{children:"🖥️ Server Mode:"}),e.jsx(J,{bg:a.mode==="both"?"success":a.mode==="deactivate"?"danger":"info",className:"ms-2",children:a.mode?.toUpperCase()||"Unknown"}),a.activated_by&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"mx-2",children:"•"}),e.jsxs("small",{children:["Set by ",a.activated_by?.name||"System",a.activated_at&&` on ${new Date(a.activated_at).toLocaleString()}`]})]})]}),_("edit-server-mode")&&e.jsx(de,{variant:"outline-dark",size:"sm",onClick:()=>t("/dashboard/server-mode"),children:"Manage Mode"})]})})}),e.jsxs(re,{className:"g-3 mb-4",children:[e.jsx(S,{xs:12,sm:6,lg:3,children:e.jsx(g,{className:"border-0 shadow-sm h-100 hover-card",children:e.jsxs(g.Body,{children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted mb-1 small",children:"Badges Printed"}),e.jsx("h2",{className:"mb-0 fw-bold text-info",children:q}),O>0&&e.jsxs("small",{className:"text-muted d-block mt-1",children:["+",O," reprinted"]}),B>0&&e.jsxs("small",{className:"text-warning d-block mt-1",children:[B," pending"]})]}),e.jsx("div",{className:"bg-info bg-opacity-10 p-3 rounded",children:e.jsx("span",{style:{fontSize:"2rem"},children:"🎫"})})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx(Ie,{now:ce,variant:"info",style:{height:"6px"}}),e.jsxs("small",{className:"text-muted",children:[ce.toFixed(1),"% printed"]})]})]})})}),e.jsx(S,{xs:12,sm:6,lg:3,children:e.jsx(g,{className:"border-0 shadow-sm h-100 hover-card",children:e.jsxs(g.Body,{children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted mb-1 small",children:"Confirmed"}),e.jsx("h2",{className:"mb-0 fw-bold text-success",children:A})]}),e.jsx("div",{className:"bg-success bg-opacity-10 p-3 rounded",children:e.jsx("span",{style:{fontSize:"2rem"},children:"✅"})})]}),e.jsx("div",{className:"mt-3",children:e.jsxs("small",{className:"text-muted",children:[E," pending confirmation"]})})]})})}),e.jsx(S,{xs:12,sm:6,lg:3,children:e.jsx(g,{className:"border-0 shadow-sm h-100 hover-card",children:e.jsxs(g.Body,{children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted mb-1 small",children:"Badges Printed"}),e.jsx("h2",{className:"mb-0 fw-bold text-info",children:q}),O>0&&e.jsxs("small",{className:"text-muted",children:["+",O," reprinted"]})]}),e.jsx("div",{className:"bg-info bg-opacity-10 p-3 rounded",children:e.jsx("span",{style:{fontSize:"2rem"},children:"🎫"})})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx(Ie,{now:ce,variant:"info",style:{height:"6px"}}),e.jsxs("small",{className:"text-muted",children:[ce.toFixed(1),"% printed"]})]})]})})}),e.jsx(S,{xs:12,sm:6,lg:3,children:e.jsx(g,{className:"border-0 shadow-sm h-100 hover-card",children:e.jsxs(g.Body,{children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-start",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-muted mb-1 small",children:"Payments Received"}),e.jsx("h2",{className:"mb-0 fw-bold text-success",children:$}),P>0&&e.jsxs("small",{className:"text-info",children:["+",P," complimentary"]})]}),e.jsx("div",{className:"bg-success bg-opacity-10 p-3 rounded",children:e.jsx("span",{style:{fontSize:"2rem"},children:"💰"})})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx(Ie,{now:V,variant:"success",style:{height:"6px"}}),e.jsxs("small",{className:"text-muted",children:[V.toFixed(1),"% paid"]})]})]})})})]}),e.jsxs(re,{className:"g-4",children:[e.jsxs(S,{xs:12,lg:8,children:[e.jsxs(g,{className:"shadow-sm border-0 mb-4",children:[e.jsx(g.Header,{className:"bg-white border-bottom",children:e.jsx("h5",{className:"mb-0 fw-semibold text-primary",children:"⚡ Quick Actions"})}),e.jsx(g.Body,{className:"p-4",children:e.jsxs(re,{className:"g-3",children:[_("scan-registration")&&e.jsx(S,{xs:12,sm:6,md:4,children:e.jsx(g,{className:"h-100 border-primary text-center cursor-pointer hover-shadow",onClick:()=>t("/dashboard/scanner"),style:{cursor:"pointer",transition:"all 0.3s"},children:e.jsxs(g.Body,{className:"p-4",children:[e.jsx("div",{style:{fontSize:"3rem"},children:"📷"}),e.jsx("h6",{className:"mt-2 mb-0",children:"Scan QR Code"}),e.jsx("small",{className:"text-muted",children:"Check-in attendees"})]})})}),_("create-registration")&&e.jsx(S,{xs:12,sm:6,md:4,children:e.jsx(g,{className:"h-100 border-success text-center cursor-pointer hover-shadow",onClick:()=>t("/dashboard/register-new"),style:{cursor:"pointer",transition:"all 0.3s"},children:e.jsxs(g.Body,{className:"p-4",children:[e.jsx("div",{style:{fontSize:"3rem"},children:"➕"}),e.jsx("h6",{className:"mt-2 mb-0",children:"New Registration"}),e.jsx("small",{className:"text-muted",children:"Add new attendee"})]})})}),_("view-registrations")&&e.jsx(S,{xs:12,sm:6,md:4,children:e.jsx(g,{className:"h-100 border-info text-center cursor-pointer hover-shadow",onClick:()=>t("/dashboard/registrations"),style:{cursor:"pointer",transition:"all 0.3s"},children:e.jsxs(g.Body,{className:"p-4",children:[e.jsx("div",{style:{fontSize:"3rem"},children:"📋"}),e.jsx("h6",{className:"mt-2 mb-0",children:"Registrations"}),e.jsx("small",{className:"text-muted",children:"View & manage all"})]})})}),_("view-reports")&&e.jsx(S,{xs:12,sm:6,md:4,children:e.jsx(g,{className:"h-100 border-warning text-center cursor-pointer hover-shadow",onClick:()=>t("/dashboard/reports"),style:{cursor:"pointer",transition:"all 0.3s"},children:e.jsxs(g.Body,{className:"p-4",children:[e.jsx("div",{style:{fontSize:"3rem"},children:"📊"}),e.jsx("h6",{className:"mt-2 mb-0",children:"Reports"}),e.jsx("small",{className:"text-muted",children:"Analytics & export"})]})})}),_("edit-server-mode")&&e.jsx(S,{xs:12,sm:6,md:4,children:e.jsx(g,{className:"h-100 border-danger text-center cursor-pointer hover-shadow",onClick:()=>t("/dashboard/server-mode"),style:{cursor:"pointer",transition:"all 0.3s"},children:e.jsxs(g.Body,{className:"p-4",children:[e.jsx("div",{style:{fontSize:"3rem"},children:"🖥️"}),e.jsx("h6",{className:"mt-2 mb-0",children:"Server Mode"}),e.jsx("small",{className:"text-muted",children:"Manage mode"})]})})}),_("edit-settings")&&e.jsx(S,{xs:12,sm:6,md:4,children:e.jsx(g,{className:"h-100 border-secondary text-center cursor-pointer hover-shadow",onClick:()=>t("/dashboard/settings"),style:{cursor:"pointer",transition:"all 0.3s"},children:e.jsxs(g.Body,{className:"p-4",children:[e.jsx("div",{style:{fontSize:"3rem"},children:"⚙️"}),e.jsx("h6",{className:"mt-2 mb-0",children:"Settings"}),e.jsx("small",{className:"text-muted",children:"Badge & system config"})]})})}),_("view-users")&&e.jsx(S,{xs:12,sm:6,md:4,children:e.jsx(g,{className:"h-100 border-dark text-center cursor-pointer hover-shadow",onClick:()=>t("/dashboard/user-management"),style:{cursor:"pointer",transition:"all 0.3s"},children:e.jsxs(g.Body,{className:"p-4",children:[e.jsx("div",{style:{fontSize:"3rem"},children:"👨‍💼"}),e.jsx("h6",{className:"mt-2 mb-0",children:"User Management"}),e.jsx("small",{className:"text-muted",children:"Manage users"})]})})}),_("manage-roles")&&e.jsx(S,{xs:12,sm:6,md:4,children:e.jsx(g,{className:"h-100 border-primary text-center cursor-pointer hover-shadow",onClick:()=>t("/dashboard/role-management"),style:{cursor:"pointer",transition:"all 0.3s"},children:e.jsxs(g.Body,{className:"p-4",children:[e.jsx("div",{style:{fontSize:"3rem"},children:"🔐"}),e.jsx("h6",{className:"mt-2 mb-0",children:"Roles & Permissions"}),e.jsx("small",{className:"text-muted",children:"Manage access"})]})})})]})})]}),w.length>0&&e.jsxs(g,{className:"shadow-sm border-0 mb-4",children:[e.jsx(g.Header,{className:"bg-white border-bottom",children:e.jsx("h5",{className:"mb-0 fw-semibold text-primary",children:"📝 Registration Types"})}),e.jsx(g.Body,{className:"p-4",children:e.jsx(re,{className:"g-3",children:w.map((Z,ge)=>{const xe=D>0?Z.total/D*100:0,ee={onsite:{color:"primary",icon:"🏢"},online:{color:"info",icon:"🌐"},"pre-registered":{color:"secondary",icon:"📋"},complimentary:{color:"success",icon:"🎁"}},k=ee[Z.registration_type]||ee.onsite;return e.jsx(S,{xs:12,sm:6,md:4,lg:3,children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{style:{fontSize:"2.5rem"},children:k.icon}),e.jsx("h4",{className:"mt-2 mb-1 fw-bold",children:Z.total}),e.jsx("p",{className:"text-muted mb-2 text-capitalize",children:Z.registration_type.replace("-"," ")}),e.jsx(Ie,{now:xe,variant:k.color,style:{height:"8px"}}),e.jsxs("small",{className:"text-muted",children:[xe.toFixed(1),"%"]})]})},ge)})})})]}),e.jsxs(g,{className:"shadow-sm border-0",children:[e.jsxs(g.Header,{className:"bg-white border-bottom d-flex justify-content-between align-items-center",children:[e.jsx("h5",{className:"mb-0 fw-semibold text-primary",children:"🕒 Recent Scan Activity"}),_("view-dashboard")&&s.length>0&&e.jsx(de,{variant:"outline-primary",size:"sm",onClick:()=>t("/dashboard"),children:"View All"})]}),e.jsx(g.Body,{className:"p-0",children:s&&s.length>0?e.jsx(be,{variant:"flush",children:s.map((Z,ge)=>e.jsxs(be.Item,{className:"d-flex justify-content-between align-items-center py-3",children:[e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{className:"rounded-circle bg-primary bg-opacity-10 d-flex align-items-center justify-content-center me-3",style:{width:"40px",height:"40px"},children:e.jsx("span",{children:"👤"})}),e.jsxs("div",{children:[e.jsx("strong",{className:"d-block",children:Z.name}),e.jsx("small",{className:"text-muted",children:Z.email})]})]}),e.jsxs(J,{bg:"primary",pill:!0,style:{fontSize:"0.9rem"},children:[Z.scans_count||0," scans"]})]},ge))}):e.jsxs("div",{className:"text-center p-5 text-muted",children:[e.jsx("div",{style:{fontSize:"3rem",opacity:.3},children:"📊"}),e.jsx("p",{className:"mb-0 mt-2",children:"No recent scan activity"}),e.jsx("small",{children:"Scans will appear here once attendees check in"})]})})]})]}),e.jsxs(S,{xs:12,lg:4,children:[e.jsx(g,{className:"shadow-sm border-0 mb-4",children:e.jsxs(g.Body,{className:"p-4 text-center",children:[e.jsx("div",{className:"rounded-circle bg-primary bg-opacity-10 d-inline-flex align-items-center justify-content-center mb-3",style:{width:"80px",height:"80px"},children:e.jsx("span",{style:{fontSize:"2.5rem"},children:"👤"})}),e.jsx("h5",{className:"mb-1 fw-bold",children:o?.name}),e.jsx("p",{className:"text-muted mb-2",children:o?.email}),e.jsx(J,{bg:"primary",className:"mb-3 px-3 py-2",children:o?.role?.name?.toUpperCase()||"USER"}),e.jsx("div",{className:"d-grid gap-2",children:e.jsxs("small",{className:"text-muted",children:["Last login: ",new Date().toLocaleDateString()]})})]})}),d&&e.jsxs(g,{className:"shadow-sm border-0 mb-4",children:[e.jsx(g.Header,{className:"bg-white border-bottom",children:e.jsx("h5",{className:"mb-0 fw-semibold text-primary",children:"📊 System Status"})}),e.jsx(g.Body,{children:e.jsxs(be,{variant:"flush",children:[e.jsxs(be.Item,{className:"px-0 d-flex justify-content-between align-items-center",children:[e.jsx("span",{className:"text-muted",children:"Total Registrations"}),e.jsx("strong",{className:"text-dark",children:D})]}),e.jsxs(be.Item,{className:"px-0 d-flex justify-content-between align-items-center",children:[e.jsx("span",{className:"text-muted",children:"Confirmed"}),e.jsx(J,{bg:"success",children:A})]}),e.jsxs(be.Item,{className:"px-0 d-flex justify-content-between align-items-center",children:[e.jsx("span",{className:"text-muted",children:"Pending"}),e.jsx(J,{bg:"warning",text:"dark",children:E})]}),e.jsx(be.Item,{className:"px-0",children:e.jsx("div",{className:"text-muted mb-2 fw-semibold",children:"Badge Status:"})}),e.jsxs(be.Item,{className:"px-0 d-flex justify-content-between align-items-center",style:{paddingTop:0},children:[e.jsx("span",{className:"text-muted small ps-3",children:"📄 Not Printed"}),e.jsx(J,{bg:"secondary",children:B})]}),e.jsxs(be.Item,{className:"px-0 d-flex justify-content-between align-items-center",children:[e.jsx("span",{className:"text-muted small ps-3",children:"✅ Printed"}),e.jsx(J,{bg:"success",children:q})]}),O>0&&e.jsxs(be.Item,{className:"px-0 d-flex justify-content-between align-items-center",children:[e.jsx("span",{className:"text-muted small ps-3",children:"🔄 Reprinted"}),e.jsx(J,{bg:"warning",text:"dark",children:O})]})]})})]}),d&&e.jsxs(g,{className:"shadow-sm border-0",children:[e.jsx(g.Header,{className:"bg-white border-bottom",children:e.jsx("h5",{className:"mb-0 fw-semibold text-primary",children:"💳 Payment Overview"})}),e.jsxs(g.Body,{className:"p-4",children:[e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"d-flex justify-content-between mb-2",children:[e.jsx("span",{className:"text-success fw-semibold",children:"✅ Paid"}),e.jsx("span",{className:"fw-bold",children:$})]}),e.jsx(Ie,{now:V,variant:"success",style:{height:"10px"}})]}),P>0&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"d-flex justify-content-between mb-2",children:[e.jsx("span",{className:"text-info fw-semibold",children:"🎁 Complimentary"}),e.jsx("span",{className:"fw-bold",children:P})]}),e.jsx(Ie,{now:D>0?P/D*100:0,variant:"info",style:{height:"10px"}})]}),e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"d-flex justify-content-between mb-2",children:[e.jsx("span",{className:"text-danger fw-semibold",children:"❌ Unpaid"}),e.jsx("span",{className:"fw-bold",children:v})]}),e.jsx(Ie,{now:D>0?v/D*100:0,variant:"danger",style:{height:"10px"}})]}),e.jsxs("div",{className:"text-center mt-4 pt-4 border-top",children:[e.jsxs("h3",{className:"mb-0 fw-bold text-success",children:[V.toFixed(1),"%"]}),e.jsx("small",{className:"text-muted",children:"Collection Rate"})]}),e.jsx("div",{className:"text-center mt-3",children:e.jsxs("small",{className:"text-muted",children:[$," of ",D," paid"]})})]})]})]})]}),e.jsx("style",{children:`
        .hover-shadow {
          transition: all 0.3s ease !important;
        }
        .hover-shadow:hover {
          transform: translateY(-5px);
          box-shadow: 0 0.5rem 1.5rem rgba(0,0,0,0.15) !important;
        }
        .hover-card {
          transition: all 0.2s ease;
        }
        .hover-card:hover {
          transform: translateY(-2px);
          box-shadow: 0 0.25rem 1rem rgba(0,0,0,0.1) !important;
        }
        .cursor-pointer {
          cursor: pointer;
        }
      `})]})}function ts(){const[t,o]=r.useState(""),[l,u]=r.useState(""),[d,x]=r.useState(!1),[a,m]=r.useState(""),[s,i]=r.useState(!1),{login:p}=He(),j=ut(),R=async f=>{f.preventDefault(),m(""),i(!0);try{await p(t,l),j("/dashboard")}catch(b){let C="An error occurred. Please try again.";b.response&&(b.response.status===422&&b.response.data.errors?C=Object.values(b.response.data.errors).flat().join(" "):b.response.data.message&&(C=b.response.data.message)),m(C)}finally{i(!1)}};return e.jsxs(T,{onSubmit:R,children:[a&&e.jsx(ue,{variant:"danger",dismissible:!0,onClose:()=>m(""),className:"mb-4",style:{borderRadius:"12px",border:"none",background:"rgba(220, 53, 69, 0.1)",color:"#dc3545",animation:"slideInRight 0.3s ease-out"},children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("span",{className:"me-2",style:{fontSize:"1.2rem"},children:"⚠️"}),e.jsx("span",{children:a})]})}),e.jsxs(T.Group,{className:"mb-4",controlId:"formEmail",children:[e.jsx(T.Label,{className:"fw-semibold mb-2",style:{color:"#2c3e50",fontSize:"0.95rem"},children:"Email Address"}),e.jsxs(We,{children:[e.jsx(We.Text,{style:{background:"linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%)",border:"2px solid #e0e0e0",borderRight:"none",borderRadius:"12px 0 0 12px",transition:"all 0.3s ease"},className:"input-icon-email",children:e.jsx("span",{style:{fontSize:"1.2rem",transition:"transform 0.3s ease"},children:"📧"})}),e.jsx(T.Control,{type:"email",placeholder:"Enter your email",value:t,onChange:f=>o(f.target.value),required:!0,disabled:s,className:"modern-input",style:{padding:"0.85rem 1rem",fontSize:"1rem",border:"2px solid #e0e0e0",borderLeft:"none",borderRadius:"0 12px 12px 0",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",background:"white"},onFocus:f=>{f.target.style.borderColor="#667eea",f.target.style.boxShadow="0 4px 12px rgba(102, 126, 234, 0.15)",f.target.style.transform="translateY(-1px)";const b=f.target.previousSibling;b.style.borderColor="#667eea",b.style.background="linear-gradient(135deg, #667eea 0%, #764ba2 100%)";const C=b.querySelector("span");C.style.transform="scale(1.2)",C.style.filter="drop-shadow(0 2px 4px rgba(255, 255, 255, 0.3))"},onBlur:f=>{f.target.style.borderColor="#e0e0e0",f.target.style.boxShadow="none",f.target.style.transform="translateY(0)";const b=f.target.previousSibling;b.style.borderColor="#e0e0e0",b.style.background="linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%)";const C=b.querySelector("span");C.style.transform="scale(1)",C.style.filter="none"}})]})]}),e.jsxs(T.Group,{className:"mb-4",controlId:"formPassword",children:[e.jsx(T.Label,{className:"fw-semibold mb-2",style:{color:"#2c3e50",fontSize:"0.95rem"},children:"Password"}),e.jsxs(We,{children:[e.jsx(We.Text,{style:{background:"linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%)",border:"2px solid #e0e0e0",borderRight:"none",borderRadius:"12px 0 0 12px",transition:"all 0.3s ease"},className:"input-icon-password",children:e.jsx("span",{style:{fontSize:"1.2rem",transition:"transform 0.3s ease"},children:"🔒"})}),e.jsx(T.Control,{type:d?"text":"password",placeholder:"Enter your password",value:l,onChange:f=>u(f.target.value),required:!0,disabled:s,className:"modern-input",style:{padding:"0.85rem 1rem",fontSize:"1rem",border:"2px solid #e0e0e0",borderLeft:"none",borderRight:"none",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",background:"white"},onFocus:f=>{f.target.style.borderColor="#667eea",f.target.style.boxShadow="0 4px 12px rgba(102, 126, 234, 0.15)",f.target.style.transform="translateY(-1px)";const b=f.target.previousSibling;b.style.borderColor="#667eea",b.style.background="linear-gradient(135deg, #667eea 0%, #764ba2 100%)";const C=b.querySelector("span");C.style.transform="scale(1.2)",C.style.filter="drop-shadow(0 2px 4px rgba(255, 255, 255, 0.3))",f.target.nextSibling.style.borderColor="#667eea"},onBlur:f=>{f.target.style.borderColor="#e0e0e0",f.target.style.boxShadow="none",f.target.style.transform="translateY(0)";const b=f.target.previousSibling;b.style.borderColor="#e0e0e0",b.style.background="linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.1) 100%)";const C=b.querySelector("span");C.style.transform="scale(1)",C.style.filter="none",f.target.nextSibling.style.borderColor="#e0e0e0"}}),e.jsx(We.Text,{onClick:()=>x(!d),style:{background:"white",border:"2px solid #e0e0e0",borderLeft:"none",borderRadius:"0 12px 12px 0",cursor:"pointer",transition:"all 0.3s ease",userSelect:"none"},onMouseEnter:f=>{f.target.style.background="rgba(102, 126, 234, 0.05)",f.target.querySelector("span").style.transform="scale(1.1)"},onMouseLeave:f=>{f.target.style.background="white",f.target.querySelector("span").style.transform="scale(1)"},children:e.jsx("span",{style:{fontSize:"1.2rem",transition:"transform 0.3s ease"},children:d?"👁️":"👁️‍🗨️"})})]})]}),e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-4",children:[e.jsx(T.Check,{type:"checkbox",id:"remember-me",label:"Remember me",style:{fontSize:"0.9rem",color:"#6c757d"},className:"custom-checkbox"}),e.jsx("a",{href:"#",style:{fontSize:"0.9rem",color:"#667eea",textDecoration:"none",fontWeight:"500",transition:"all 0.3s ease"},onMouseEnter:f=>{f.target.style.color="#764ba2",f.target.style.textDecoration="underline"},onMouseLeave:f=>{f.target.style.color="#667eea",f.target.style.textDecoration="none"},children:"Forgot password?"})]}),e.jsx(de,{type:"submit",disabled:s,className:"w-100 fw-semibold login-submit-btn",style:{padding:"1rem",fontSize:"1.05rem",borderRadius:"12px",border:"none",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",boxShadow:"0 4px 15px rgba(102, 126, 234, 0.4)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden"},onMouseEnter:f=>{s||(f.target.style.transform="translateY(-2px)",f.target.style.boxShadow="0 8px 25px rgba(102, 126, 234, 0.5)")},onMouseLeave:f=>{f.target.style.transform="translateY(0)",f.target.style.boxShadow="0 4px 15px rgba(102, 126, 234, 0.4)"},onMouseDown:f=>{f.target.style.transform="translateY(0) scale(0.98)"},onMouseUp:f=>{f.target.style.transform="translateY(-2px) scale(1)"},children:s?e.jsxs(e.Fragment,{children:[e.jsx(je,{as:"span",animation:"border",size:"sm",role:"status","aria-hidden":"true",className:"me-2"}),"Signing in..."]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"me-2",children:"🔐"}),"Sign In"]})}),e.jsx("style",{children:`
        .custom-checkbox input[type="checkbox"]:checked {
          background-color: #667eea;
          border-color: #667eea;
        }

        .custom-checkbox input[type="checkbox"]:focus {
          box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25);
        }

        .login-submit-btn::before {
          content: '';
          position: absolute;
          top: 0;
          left: -100%;
          width: 100%;
          height: 100%;
          background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
          transition: left 0.5s ease;
        }

        .login-submit-btn:hover::before {
          left: 100%;
        }

        @keyframes slideInRight {
          from {
            opacity: 0;
            transform: translateX(30px);
          }
          to {
            opacity: 1;
            transform: translateX(0);
          }
        }

        /* Smooth transition for all icons */
        .input-icon-email span,
        .input-icon-password span {
          display: inline-block;
        }
      `})]})}const ss="/assets/HMOPI-CaqDae_M.png";function rs(){return e.jsxs("div",{className:"gradient-bg d-flex align-items-center justify-content-center",style:{minHeight:"100vh",padding:"20px",position:"relative"},children:[e.jsxs("div",{className:"floating-particles",children:[e.jsx("div",{className:"particle particle-1"}),e.jsx("div",{className:"particle particle-2"}),e.jsx("div",{className:"particle particle-3"}),e.jsx("div",{className:"particle particle-4"})]}),e.jsx(ye,{children:e.jsx(re,{className:"justify-content-center",children:e.jsxs(S,{xs:12,sm:10,md:8,lg:6,xl:5,children:[e.jsxs(g,{className:"login-card shadow-lg border-0 overflow-hidden",style:{animation:"fadeIn 0.6s ease-out",borderRadius:"24px",background:"rgba(255, 255, 255, 0.98)",backdropFilter:"blur(20px)"},children:[e.jsxs("div",{className:"login-header text-white d-flex flex-column align-items-center justify-content-center py-5 text-center",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",position:"relative",overflow:"hidden",minHeight:"240px"},children:[e.jsx("div",{className:"floating-circle circle-1",style:{position:"absolute",top:"-50%",right:"-10%",width:"200px",height:"200px",background:"rgba(255,255,255,0.15)",borderRadius:"50%",animation:"float 6s ease-in-out infinite",boxShadow:"0 8px 32px rgba(255, 255, 255, 0.1)"}}),e.jsx("div",{className:"floating-circle circle-2",style:{position:"absolute",bottom:"-30%",left:"-5%",width:"150px",height:"150px",background:"rgba(255,255,255,0.1)",borderRadius:"50%",animation:"float 4s ease-in-out infinite 1s",boxShadow:"0 8px 32px rgba(255, 255, 255, 0.1)"}}),e.jsx("div",{className:"floating-circle circle-3",style:{position:"absolute",top:"20%",left:"10%",width:"80px",height:"80px",background:"rgba(255,255,255,0.08)",borderRadius:"50%",animation:"float 5s ease-in-out infinite 0.5s"}}),e.jsxs("div",{style:{position:"relative",zIndex:1},children:[e.jsx("img",{src:ss,alt:"HMOPI Logo",className:"login-logo",style:{width:"350px",height:"200px",marginBottom:"0.7rem",animation:"iconPulse 2s ease-in-out infinite",filter:"drop-shadow(0 4px 12px rgba(0, 0, 0, 0.2))",objectFit:"contain"}}),e.jsx("h2",{className:"fw-bold mb-2",style:{fontSize:"2rem",letterSpacing:"-0.5px"},children:"Welcome!"}),e.jsx("p",{className:"mb-0",style:{opacity:.95,fontSize:"1.05rem"},children:"To our Online Registration System"})]})]}),e.jsxs(g.Body,{className:"p-5",style:{padding:"3rem 3rem 2.5rem !important"},children:[e.jsxs("div",{className:"text-center mb-4",children:[e.jsx("h4",{className:"fw-bold mb-2",style:{color:"#2c3e50",fontSize:"1.5rem"},children:"Sign In to Your Account"}),e.jsx("p",{className:"text-muted",style:{fontSize:"0.95rem",marginBottom:"2rem"},children:"Enter your credentials to access the dashboard"})]}),e.jsx(ts,{}),e.jsx("div",{className:"text-center mt-4 pt-4 border-top",children:e.jsxs("p",{className:"text-muted small mb-0",children:["Having trouble?"," ",e.jsx("a",{href:"#",className:"support-link fw-semibold",style:{color:"#667eea",textDecoration:"none",position:"relative",transition:"all 0.3s ease"},onMouseEnter:t=>{t.target.style.color="#764ba2",t.target.style.textDecoration="underline"},onMouseLeave:t=>{t.target.style.color="#667eea",t.target.style.textDecoration="none"},children:"Contact Support"})]})})]}),e.jsx("div",{style:{height:"6px",background:"linear-gradient(90deg, #667eea 0%, #764ba2 50%, #667eea 100%)",backgroundSize:"200% 100%",animation:"gradientSlide 3s ease infinite"}})]}),e.jsx("div",{className:"text-center mt-4",children:e.jsx("p",{className:"text-white small mb-0 version-info",style:{textShadow:"0 2px 8px rgba(0,0,0,0.3)",transition:"all 0.3s ease",cursor:"default"},onMouseEnter:t=>{t.target.style.transform="scale(1.05)",t.target.style.textShadow="0 4px 12px rgba(0,0,0,0.4)"},onMouseLeave:t=>{t.target.style.transform="scale(1)",t.target.style.textShadow="0 2px 8px rgba(0,0,0,0.3)"},children:"v1.0.0 • © 2024 Registration System"})})]})})}),e.jsx("style",{children:`
        /* Float Animation */
        @keyframes float {
          0%, 100% { 
            transform: translateY(0px) rotate(0deg); 
          }
          50% { 
            transform: translateY(-20px) rotate(5deg); 
          }
        }

        /* Icon Pulse */
        @keyframes iconPulse {
          0%, 100% { 
            transform: scale(1) rotate(0deg); 
            filter: drop-shadow(0 4px 12px rgba(102, 126, 234, 0.3));
          }
          50% { 
            transform: scale(1.1) rotate(2deg); 
            filter: drop-shadow(0 6px 18px rgba(118, 75, 162, 0.5));
          }
        }

        /* Gradient Slide */
        @keyframes gradientSlide {
          0% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
          100% { background-position: 0% 50%; }
        }

        /* Particle Animation */
        @keyframes particleFloat {
          0%, 100% { transform: translate(0, 0); }
          25% { transform: translate(10px, -10px); }
          50% { transform: translate(-5px, -20px); }
          75% { transform: translate(-10px, -10px); }
        }

        /* Gradient Background with Radial Gradients */
        .gradient-bg::before {
          content: '';
          position: absolute;
          top: 0;
          left: 0;
          right: 0;
          bottom: 0;
          background: 
            radial-gradient(circle at 20% 50%, rgba(102, 126, 234, 0.15) 0%, transparent 50%),
            radial-gradient(circle at 80% 80%, rgba(118, 75, 162, 0.15) 0%, transparent 50%),
            radial-gradient(circle at 40% 20%, rgba(102, 126, 234, 0.1) 0%, transparent 40%);
          pointer-events: none;
          animation: gradientMove 20s ease infinite;
        }

        @keyframes gradientMove {
          0%, 100% { opacity: 1; }
          50% { opacity: 0.8; }
        }

        /* Floating Particles */
        .floating-particles {
          position: absolute;
          width: 100%;
          height: 100%;
          overflow: hidden;
          pointer-events: none;
        }

        .particle {
          position: absolute;
          background: rgba(255, 255, 255, 0.4);
          border-radius: 50%;
          animation: particleFloat 15s infinite ease-in-out;
        }

        .particle-1 {
          width: 8px;
          height: 8px;
          top: 20%;
          left: 20%;
          animation-delay: 0s;
          animation-duration: 12s;
        }

        .particle-2 {
          width: 6px;
          height: 6px;
          top: 60%;
          left: 80%;
          animation-delay: 2s;
          animation-duration: 15s;
        }

        .particle-3 {
          width: 10px;
          height: 10px;
          top: 40%;
          left: 60%;
          animation-delay: 4s;
          animation-duration: 18s;
        }

        .particle-4 {
          width: 5px;
          height: 5px;
          top: 80%;
          left: 30%;
          animation-delay: 6s;
          animation-duration: 14s;
        }

        /* Card Hover Effect */
        .login-card {
          transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .login-card:hover {
          transform: translateY(-5px);
          box-shadow: 0 20px 60px rgba(102, 126, 234, 0.3) !important;
        }

        /* Header Hover Effect */
        .login-header {
          transition: all 0.3s ease;
        }

        .login-card:hover .login-header {
          background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
        }

        /* Version Info */
        .version-info {
          display: inline-block;
        }
      `})]})}function ns(){return e.jsxs("div",{children:[e.jsx("h2",{children:"Admin Panel"}),e.jsx("p",{children:"Only Admins & Superadmins can see this."})]})}function as(){return e.jsxs("div",{children:[e.jsx("h2",{children:"Superadmin Zone"}),e.jsx("p",{children:"Only Superadmins can see this."})]})}function is(){return e.jsxs("div",{style:{padding:"20px"},children:[e.jsx("h2",{children:"🚫 403 - Forbidden"}),e.jsx("p",{children:"You do not have permission to access this page."})]})}function os(){const[t,o]=r.useState(null),[l,u]=r.useState(null),[d,x]=r.useState(!0),[a,m]=r.useState(null);r.useEffect(()=>{(async()=>{try{const[p,j]=await Promise.all([G.get("/dashboard/summary"),G.get("/dashboard/reports-counts")]);console.log("Dashboard summary:",p.data),console.log("Reports counts:",j.data),o(p.data),u(j.data)}catch(p){console.error("Dashboard error:",p),m(p.response?.data?.message||"Failed to load dashboard")}finally{x(!1)}})()},[]);const s={container:{padding:"20px",maxWidth:"1400px",margin:"0 auto",fontFamily:"'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif"},header:{marginBottom:"30px",paddingBottom:"15px",borderBottom:"3px solid #007bff"},section:{marginBottom:"30px",padding:"20px",backgroundColor:"#ffffff",borderRadius:"8px",boxShadow:"0 2px 8px rgba(0,0,0,0.1)",border:"1px solid #e9ecef"},sectionTitle:{fontSize:"20px",fontWeight:"bold",marginBottom:"20px",color:"#333",borderBottom:"2px solid #f0f0f0",paddingBottom:"10px"},grid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"15px"},card:{padding:"20px",backgroundColor:"#fff",borderRadius:"8px",boxShadow:"0 2px 6px rgba(0,0,0,0.08)",border:"1px solid #e9ecef",transition:"transform 0.2s, box-shadow 0.2s",cursor:"default"},cardLabel:{fontSize:"13px",color:"#6c757d",marginBottom:"8px",fontWeight:"500",textTransform:"uppercase",letterSpacing:"0.5px"},cardValue:{fontSize:"32px",fontWeight:"bold",lineHeight:"1.2"},badge:{display:"inline-block",padding:"6px 12px",borderRadius:"20px",fontSize:"14px",fontWeight:"600"},progressBar:{width:"100%",height:"8px",backgroundColor:"#e9ecef",borderRadius:"4px",overflow:"hidden",marginTop:"8px"},progressFill:(i,p)=>({width:`${i}%`,height:"100%",backgroundColor:p,transition:"width 0.3s ease"}),table:{width:"100%",borderCollapse:"collapse",backgroundColor:"#fff",boxShadow:"0 2px 4px rgba(0,0,0,0.05)"}};return d?e.jsxs("div",{style:{...s.container,textAlign:"center",padding:"60px"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"20px"},children:"⏳"}),e.jsx("div",{style:{fontSize:"18px",color:"#6c757d"},children:"Loading dashboard..."})]}):a?e.jsxs("div",{style:{...s.container,textAlign:"center",padding:"60px"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"20px"},children:"❌"}),e.jsx("div",{style:{fontSize:"18px",color:"#dc3545"},children:a})]}):!t||!l?e.jsxs("div",{style:{...s.container,textAlign:"center",padding:"60px"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"20px"},children:"📊"}),e.jsx("div",{style:{fontSize:"18px",color:"#6c757d"},children:"No data available"})]}):e.jsxs("div",{style:s.container,children:[e.jsxs("div",{style:s.header,children:[e.jsx("h1",{style:{margin:0,fontSize:"32px",color:"#333"},children:"📊 ICEGEX 2025 Dashboard"}),e.jsx("p",{style:{margin:"10px 0 0 0",color:"#6c757d",fontSize:"16px"},children:"Real-time event registration overview and analytics"})]}),e.jsxs("section",{style:s.section,children:[e.jsx("h3",{style:s.sectionTitle,children:"📈 Overall Summary"}),e.jsxs("div",{style:s.grid,children:[e.jsxs("div",{style:{...s.card,borderLeft:"4px solid #007bff"},children:[e.jsx("div",{style:s.cardLabel,children:"👥 Total Registrations"}),e.jsx("div",{style:{...s.cardValue,color:"#007bff"},children:l.total||0})]}),e.jsxs("div",{style:{...s.card,borderLeft:"4px solid #28a745"},children:[e.jsx("div",{style:s.cardLabel,children:"✅ Confirmed"}),e.jsx("div",{style:{...s.cardValue,color:"#28a745"},children:l.confirmed||0}),l.total>0&&e.jsx("div",{style:s.progressBar,children:e.jsx("div",{style:s.progressFill(Math.round(l.confirmed/l.total*100),"#28a745")})})]}),e.jsxs("div",{style:{...s.card,borderLeft:"4px solid #ffc107"},children:[e.jsx("div",{style:s.cardLabel,children:"⏳ Unconfirmed"}),e.jsx("div",{style:{...s.cardValue,color:"#ffc107"},children:l.unconfirmed||0}),l.total>0&&e.jsx("div",{style:s.progressBar,children:e.jsx("div",{style:s.progressFill(Math.round(l.unconfirmed/l.total*100),"#ffc107")})})]}),e.jsxs("div",{style:{...s.card,borderLeft:"4px solid #17a2b8"},children:[e.jsx("div",{style:s.cardLabel,children:"🖥️ Server Mode"}),e.jsx("div",{style:{fontSize:"20px",fontWeight:"bold",color:"#17a2b8",marginTop:"10px"},children:t.server_mode?.toUpperCase()||"UNKNOWN"})]})]})]}),e.jsxs("section",{style:s.section,children:[e.jsx("h3",{style:s.sectionTitle,children:"🎫 Badge Print Status"}),e.jsxs("div",{style:s.grid,children:[e.jsxs("div",{style:s.card,children:[e.jsx("div",{style:s.cardLabel,children:"📄 Not Printed"}),e.jsx("div",{style:{...s.cardValue,color:"#6c757d"},children:l.badge_status?.not_printed||0})]}),e.jsxs("div",{style:s.card,children:[e.jsx("div",{style:s.cardLabel,children:"✅ Printed"}),e.jsx("div",{style:{...s.cardValue,color:"#28a745"},children:l.badge_status?.printed||0})]}),e.jsxs("div",{style:s.card,children:[e.jsx("div",{style:s.cardLabel,children:"🔄 Re-Printed"}),e.jsx("div",{style:{...s.cardValue,color:"#fd7e14"},children:l.badge_status?.reprinted||0})]})]})]}),e.jsxs("section",{style:s.section,children:[e.jsx("h3",{style:s.sectionTitle,children:"💰 Payment Status"}),e.jsxs("div",{style:s.grid,children:[e.jsxs("div",{style:s.card,children:[e.jsx("div",{style:s.cardLabel,children:"💵 Paid"}),e.jsx("div",{style:{...s.cardValue,color:"#28a745"},children:l.payment_status?.paid||0}),l.total>0&&e.jsxs("div",{style:{marginTop:"10px",fontSize:"14px",color:"#6c757d"},children:[Math.round(l.payment_status?.paid/l.total*100),"% of total"]})]}),e.jsxs("div",{style:s.card,children:[e.jsx("div",{style:s.cardLabel,children:"❌ Unpaid"}),e.jsx("div",{style:{...s.cardValue,color:"#dc3545"},children:l.payment_status?.unpaid||0}),l.total>0&&e.jsxs("div",{style:{marginTop:"10px",fontSize:"14px",color:"#6c757d"},children:[Math.round(l.payment_status?.unpaid/l.total*100),"% of total"]})]}),e.jsxs("div",{style:s.card,children:[e.jsx("div",{style:s.cardLabel,children:"🎁 Complimentary"}),e.jsx("div",{style:{...s.cardValue,color:"#17a2b8"},children:l.payment_status?.complimentary||0}),l.total>0&&e.jsxs("div",{style:{marginTop:"10px",fontSize:"14px",color:"#6c757d"},children:[Math.round(l.payment_status?.complimentary/l.total*100),"% of total"]})]})]})]}),e.jsxs("section",{style:s.section,children:[e.jsx("h3",{style:s.sectionTitle,children:"📝 Registration Type Breakdown"}),e.jsxs("div",{style:s.grid,children:[e.jsxs("div",{style:{...s.card,borderLeft:"4px solid #007bff"},children:[e.jsx("div",{style:s.cardLabel,children:"🏢 Onsite"}),e.jsx("div",{style:{...s.cardValue,color:"#007bff"},children:l.registration_type?.onsite||0})]}),e.jsxs("div",{style:{...s.card,borderLeft:"4px solid #17a2b8"},children:[e.jsx("div",{style:s.cardLabel,children:"💻 Online"}),e.jsx("div",{style:{...s.cardValue,color:"#17a2b8"},children:l.registration_type?.online||0})]}),e.jsxs("div",{style:{...s.card,borderLeft:"4px solid #6c757d"},children:[e.jsx("div",{style:s.cardLabel,children:"📋 Pre-Registered"}),e.jsx("div",{style:{...s.cardValue,color:"#6c757d"},children:l.registration_type?.pre_registered||0})]}),e.jsxs("div",{style:{...s.card,borderLeft:"4px solid #28a745"},children:[e.jsx("div",{style:s.cardLabel,children:"🎁 Complimentary"}),e.jsx("div",{style:{...s.cardValue,color:"#28a745"},children:l.registration_type?.complimentary||0})]})]})]}),l.demographics?.total_with_demographics>0&&e.jsxs("section",{style:s.section,children:[e.jsx("h3",{style:s.sectionTitle,children:"👥 Demographics Snapshot"}),e.jsx("div",{style:{marginBottom:"20px",padding:"15px",backgroundColor:"#e7f3ff",borderRadius:"6px"},children:e.jsxs("div",{style:{fontSize:"16px",color:"#0c5460"},children:["📊 ",e.jsx("strong",{children:l.demographics.total_with_demographics})," registrants (",Math.round(l.demographics.total_with_demographics/l.total*100),"%) provided demographic information"]})}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[Object.keys(l.demographics?.age_ranges||{}).length>0&&e.jsxs("div",{children:[e.jsx("h4",{style:{fontSize:"16px",marginBottom:"15px",color:"#495057"},children:"Age Distribution"}),Object.entries(l.demographics.age_ranges).sort((i,p)=>i[0].localeCompare(p[0])).map(([i,p])=>e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px"},children:[e.jsx("span",{style:{fontSize:"14px",color:"#495057"},children:i}),e.jsx("span",{style:{fontSize:"14px",fontWeight:"bold",color:"#007bff"},children:p})]}),e.jsx("div",{style:s.progressBar,children:e.jsx("div",{style:s.progressFill(Math.round(p/l.demographics.total_with_demographics*100),"#007bff")})})]},i))]}),Object.keys(l.demographics?.gender||{}).length>0&&e.jsxs("div",{children:[e.jsx("h4",{style:{fontSize:"16px",marginBottom:"15px",color:"#495057"},children:"Gender Distribution"}),Object.entries(l.demographics.gender).sort((i,p)=>p[1]-i[1]).map(([i,p])=>e.jsxs("div",{style:{marginBottom:"12px"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"5px"},children:[e.jsx("span",{style:{fontSize:"14px",color:"#495057"},children:i}),e.jsx("span",{style:{fontSize:"14px",fontWeight:"bold",color:"#6c757d"},children:p})]}),e.jsx("div",{style:s.progressBar,children:e.jsx("div",{style:s.progressFill(Math.round(p/l.demographics.total_with_demographics*100),"#6c757d")})})]},i))]})]})]}),l.survey?.total_with_survey>0&&e.jsxs("section",{style:s.section,children:[e.jsx("h3",{style:s.sectionTitle,children:"📊 Survey Insights - ICEGEX 2025"}),e.jsx("div",{style:{marginBottom:"20px",padding:"15px",backgroundColor:"#d4edda",borderRadius:"6px"},children:e.jsxs("div",{style:{fontSize:"16px",color:"#155724"},children:["✅ ",e.jsx("strong",{children:l.survey.total_with_survey})," registrants (",Math.round(l.survey.total_with_survey/l.total*100),"%) completed survey questions"]})}),e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[Object.keys(l.survey?.industry_sector||{}).length>0&&e.jsxs("div",{children:[e.jsx("h4",{style:{fontSize:"16px",marginBottom:"15px",color:"#495057"},children:"🏭 Top 5 Industries"}),Object.entries(l.survey.industry_sector).sort((i,p)=>p[1]-i[1]).slice(0,5).map(([i,p],j)=>e.jsxs("div",{style:{marginBottom:"10px",padding:"10px",backgroundColor:j===0?"#fff3cd":"#f8f9fa",borderRadius:"6px",borderLeft:j===0?"3px solid #ffc107":"3px solid #dee2e6"},children:[e.jsx("div",{style:{fontSize:"13px",color:"#495057",marginBottom:"3px"},children:i.length>40?i.substring(0,40)+"...":i}),e.jsxs("div",{style:{fontSize:"18px",fontWeight:"bold",color:"#28a745"},children:[p," responses"]})]},i))]}),Object.keys(l.survey?.how_did_you_learn||{}).length>0&&e.jsxs("div",{children:[e.jsx("h4",{style:{fontSize:"16px",marginBottom:"15px",color:"#495057"},children:"📢 Top 5 Marketing Channels"}),Object.entries(l.survey.how_did_you_learn).sort((i,p)=>p[1]-i[1]).slice(0,5).map(([i,p],j)=>e.jsxs("div",{style:{marginBottom:"10px",padding:"10px",backgroundColor:j===0?"#d1ecf1":"#f8f9fa",borderRadius:"6px",borderLeft:j===0?"3px solid #17a2b8":"3px solid #dee2e6"},children:[e.jsx("div",{style:{fontSize:"13px",color:"#495057",marginBottom:"3px"},children:i.length>35?i.substring(0,35)+"...":i}),e.jsxs("div",{style:{fontSize:"18px",fontWeight:"bold",color:"#17a2b8"},children:[p," responses"]})]},i))]})]})]}),e.jsxs("section",{style:s.section,children:[e.jsx("h3",{style:s.sectionTitle,children:"🔍 Staff Activity - Scans per User"}),t.scans_per_user&&t.scans_per_user.length>0?e.jsx("div",{style:{overflowX:"auto"},children:e.jsxs("table",{style:s.table,children:[e.jsx("thead",{style:{backgroundColor:"#343a40",color:"#fff"},children:e.jsxs("tr",{children:[e.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"ID"}),e.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Name"}),e.jsx("th",{style:{padding:"12px",textAlign:"left"},children:"Email"}),e.jsx("th",{style:{padding:"12px",textAlign:"center"},children:"Total Scans"})]})}),e.jsx("tbody",{children:t.scans_per_user.map((i,p)=>e.jsxs("tr",{style:{borderBottom:"1px solid #dee2e6",backgroundColor:p%2===0?"#fff":"#f8f9fa"},children:[e.jsx("td",{style:{padding:"12px"},children:i.id}),e.jsx("td",{style:{padding:"12px",fontWeight:"500"},children:i.name}),e.jsx("td",{style:{padding:"12px",color:"#6c757d"},children:i.email}),e.jsx("td",{style:{padding:"12px",textAlign:"center",fontWeight:"bold",fontSize:"18px"},children:e.jsx("span",{style:{...s.badge,backgroundColor:i.scans_count>0?"#28a745":"#e9ecef",color:i.scans_count>0?"#fff":"#6c757d"},children:i.scans_count||0})})]},i.id))})]})}):e.jsxs("div",{style:{padding:"40px",textAlign:"center",backgroundColor:"#f8f9fa",borderRadius:"8px",color:"#6c757d"},children:[e.jsx("div",{style:{fontSize:"48px",marginBottom:"10px"},children:"👥"}),e.jsx("div",{children:"No user scan activity yet"})]})]})]})}function ls({registration:t,onSave:o,onCancel:l}){const[u,d]=r.useState({}),[x,a]=r.useState(!1),[m,s]=r.useState("");r.useEffect(()=>{t&&d({first_name:t.first_name||"",last_name:t.last_name||"",email:t.email||"",phone:t.phone||"",address:t.address||"",company_name:t.company_name||"",registration_type:t.registration_type||"onsite"})},[t]);const i=j=>{const{name:R,value:f}=j.target;d(b=>({...b,[R]:f}))},p=async j=>{j.preventDefault(),a(!0),s("");try{await o({...u,id:t.id})}catch(R){s(R.message||"An unknown error occurred.")}finally{a(!1)}};return e.jsxs(T,{onSubmit:p,children:[m&&e.jsx(ue,{variant:"danger",children:m}),e.jsxs(re,{className:"g-3",children:[e.jsx(S,{md:6,children:e.jsxs(T.Group,{controlId:"formFirstName",children:[e.jsx(T.Label,{children:"First Name"}),e.jsx(T.Control,{type:"text",name:"first_name",value:u.first_name,onChange:i,required:!0})]})}),e.jsx(S,{md:6,children:e.jsxs(T.Group,{controlId:"formLastName",children:[e.jsx(T.Label,{children:"Last Name"}),e.jsx(T.Control,{type:"text",name:"last_name",value:u.last_name,onChange:i,required:!0})]})}),e.jsx(S,{md:6,children:e.jsxs(T.Group,{controlId:"formEmail",children:[e.jsx(T.Label,{children:"Email"}),e.jsx(T.Control,{type:"email",name:"email",value:u.email,onChange:i})]})}),e.jsx(S,{md:6,children:e.jsxs(T.Group,{controlId:"formPhone",children:[e.jsx(T.Label,{children:"Phone"}),e.jsx(T.Control,{type:"text",name:"phone",value:u.phone,onChange:i})]})}),e.jsx(S,{xs:12,children:e.jsxs(T.Group,{controlId:"formCompany",children:[e.jsx(T.Label,{children:"Company Name"}),e.jsx(T.Control,{type:"text",name:"company_name",value:u.company_name,onChange:i})]})}),e.jsx(S,{xs:12,children:e.jsxs(T.Group,{controlId:"formAddress",children:[e.jsx(T.Label,{children:"Address"}),e.jsx(T.Control,{as:"textarea",rows:2,name:"address",value:u.address,onChange:i})]})}),e.jsx(S,{xs:12,children:e.jsxs(T.Group,{controlId:"formRegType",children:[e.jsx(T.Label,{children:"Registration Type"}),e.jsxs(T.Select,{name:"registration_type",value:u.registration_type,onChange:i,children:[e.jsx("option",{value:"onsite",children:"Onsite"}),e.jsx("option",{value:"online",children:"Online"}),e.jsx("option",{value:"pre-registered",children:"Pre-Registered"}),e.jsx("option",{value:"complimentary",children:"Complimentary"})]})]})})]}),e.jsxs("div",{className:"d-flex justify-content-end gap-2 mt-4",children:[e.jsx(de,{variant:"secondary",onClick:l,disabled:x,children:"Cancel"}),e.jsx(de,{variant:"primary",type:"submit",disabled:x,children:x?e.jsx(je,{as:"span",animation:"border",size:"sm"}):"Save Changes"})]})]})}const rt=({isOpen:t,onClose:o,title:l,children:u,size:d="medium"})=>{if(r.useEffect(()=>(t?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t]),!t)return null;const x=m=>{m.target===m.currentTarget&&o()},a={small:{width:"90%",maxWidth:"400px"},medium:{width:"90%",maxWidth:"600px"},large:{width:"90%",maxWidth:"900px"}};return e.jsxs("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:1e3,animation:"fadeIn 0.2s ease-out"},onClick:x,children:[e.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; }
          to { opacity: 1; }
        }
        @keyframes slideIn {
          from { transform: translateY(-50px); opacity: 0; }
          to { transform: translateY(0); opacity: 1; }
        }
        @keyframes spin {
          from { transform: rotate(0deg); }
          to { transform: rotate(360deg); }
        }
      `}),e.jsxs("div",{style:{...a[d],backgroundColor:"white",borderRadius:"12px",boxShadow:"0 10px 40px rgba(0, 0, 0, 0.2)",maxHeight:"90vh",display:"flex",flexDirection:"column",animation:"slideIn 0.3s ease-out",margin:"20px"},children:[e.jsxs("div",{style:{padding:"20px",borderBottom:"1px solid #e9ecef",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsx("h3",{style:{margin:0,fontSize:"1.25rem",fontWeight:600,color:"#333"},children:l}),e.jsx("button",{onClick:o,style:{background:"none",border:"none",fontSize:"2rem",lineHeight:1,color:"#999",cursor:"pointer",padding:0,width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"4px",transition:"all 0.2s"},onMouseOver:m=>{m.currentTarget.style.backgroundColor="#f5f5f5",m.currentTarget.style.color="#333"},onMouseOut:m=>{m.currentTarget.style.backgroundColor="transparent",m.currentTarget.style.color="#999"},children:"×"})]}),e.jsx("div",{style:{padding:"20px",overflowY:"auto",flex:1},children:u})]})]})},ds=({isOpen:t,onClose:o,registration:l,onConfirm:u,isUpdating:d})=>{const[x,a]=r.useState("");if(!l)return null;const m=l.payment_status||"unpaid",s=()=>{if(!x){alert("Please select a payment status");return}if(x===m){alert("Please select a different status than the current one");return}u(x)},i=[{value:"paid",label:"Paid",color:"#28a745",icon:"✅"},{value:"unpaid",label:"Unpaid",color:"#dc3545",icon:"❌"},{value:"complimentary",label:"Complimentary",color:"#17a2b8",icon:"🎁"}];return e.jsx(rt,{isOpen:t,onClose:o,title:"Update Payment Status",size:"small",children:e.jsxs("div",{style:{padding:"10px 0"},children:[e.jsxs("div",{style:{backgroundColor:"#f8f9fa",padding:"15px",borderRadius:"8px",marginBottom:"20px"},children:[e.jsx("h4",{style:{margin:"0 0 10px 0",color:"#495057"},children:"Registration Details"}),e.jsxs("div",{style:{fontSize:"0.9rem",color:"#6c757d"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Name:"})," ",l.first_name," ",l.last_name]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Company:"})," ",l.company_name||"N/A"]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Ticket:"})," ",l.ticket_number]}),e.jsxs("div",{style:{marginTop:"10px"},children:[e.jsx("strong",{children:"Current Status:"})," ",e.jsx("span",{style:{padding:"4px 10px",borderRadius:"12px",backgroundColor:m==="paid"?"#28a745":m==="unpaid"?"#dc3545":"#17a2b8",color:"white",fontSize:"0.85rem",fontWeight:"bold"},children:m.toUpperCase()})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{style:{margin:"0 0 15px 0",color:"#495057"},children:"Select New Status"}),e.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"10px"},children:i.map(p=>e.jsxs("label",{style:{display:"flex",alignItems:"center",padding:"12px",borderRadius:"8px",border:`2px solid ${x===p.value?p.color:"#dee2e6"}`,backgroundColor:x===p.value?`${p.color}15`:"white",cursor:p.value===m?"not-allowed":"pointer",opacity:p.value===m?.5:1,transition:"all 0.2s"},children:[e.jsx("input",{type:"radio",name:"paymentStatus",value:p.value,checked:x===p.value,onChange:j=>a(j.target.value),disabled:p.value===m,style:{marginRight:"12px"}}),e.jsx("span",{style:{fontSize:"1.2rem",marginRight:"10px"},children:p.icon}),e.jsxs("span",{style:{fontWeight:x===p.value?"bold":"normal",color:p.value===m?"#6c757d":"#212529"},children:[p.label,p.value===m&&" (Current)"]})]},p.value))})]}),e.jsxs("div",{style:{display:"flex",gap:"10px",marginTop:"25px",paddingTop:"20px",borderTop:"1px solid #dee2e6"},children:[e.jsx("button",{onClick:o,disabled:d,style:{flex:1,padding:"10px",border:"1px solid #dee2e6",backgroundColor:"white",color:"#6c757d",borderRadius:"6px",cursor:"pointer",fontSize:"1rem",fontWeight:"500",transition:"all 0.2s"},onMouseOver:p=>{d||(p.currentTarget.style.backgroundColor="#f8f9fa")},onMouseOut:p=>{p.currentTarget.style.backgroundColor="white"},children:"Cancel"}),e.jsx("button",{onClick:s,disabled:!x||d,style:{flex:1,padding:"10px",border:"none",backgroundColor:x?x==="paid"?"#28a745":x==="unpaid"?"#dc3545":"#17a2b8":"#6c757d",color:"white",borderRadius:"6px",cursor:!x||d?"not-allowed":"pointer",fontSize:"1rem",fontWeight:"600",opacity:!x||d?.6:1,transition:"all 0.2s"},children:d?"Updating...":"Confirm Update"})]})]})})},cs=({isOpen:t,onClose:o,onConfirm:l,title:u,message:d,confirmText:x="Confirm",danger:a=!1})=>e.jsx(rt,{isOpen:t,onClose:o,title:u,size:"small",children:e.jsxs("div",{children:[e.jsx("p",{style:{fontSize:"1rem",color:"#495057",marginBottom:"20px",whiteSpace:"pre-line"},children:d}),e.jsxs("div",{style:{display:"flex",gap:"10px",justifyContent:"flex-end"},children:[e.jsx("button",{onClick:o,style:{padding:"10px 20px",border:"1px solid #dee2e6",backgroundColor:"white",color:"#6c757d",borderRadius:"6px",cursor:"pointer",fontSize:"1rem",fontWeight:"500"},children:"Cancel"}),e.jsx("button",{onClick:()=>{l(),o()},style:{padding:"10px 20px",border:"none",backgroundColor:a?"#dc3545":"#007bff",color:"white",borderRadius:"6px",cursor:"pointer",fontSize:"1rem",fontWeight:"600"},children:x})]})]})}),xs=({isOpen:t,onClose:o,onImport:l,isImporting:u,importResult:d})=>{const[x,a]=r.useState(null),[m,s]=r.useState(!1),i=_=>{const z=_.target.files[0];z&&p(z)},p=_=>{if(!["application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/vnd.ms-excel"].includes(_.type)&&!_.name.match(/\.(xlsx|xls)$/i)){alert("❌ Please select a valid Excel file (.xlsx or .xls)");return}if(_.size>10*1024*1024){alert("❌ File size must be less than 10MB");return}a(_)},j=_=>{_.preventDefault(),s(!0)},R=_=>{_.preventDefault(),s(!1)},f=_=>{_.preventDefault(),s(!1);const z=_.dataTransfer.files[0];z&&p(z)},b=()=>{if(!x){alert("Please select an Excel file");return}l(x)},C=()=>{u&&!window.confirm("Import is in progress. Are you sure you want to cancel?")||(a(null),o())};return e.jsx(rt,{isOpen:t,onClose:C,title:"📥 Import Pre-Registrations",size:"medium",children:e.jsxs("div",{style:{padding:"10px 0"},children:[e.jsxs("div",{style:{padding:"15px",backgroundColor:"#e7f3ff",borderLeft:"4px solid #007bff",borderRadius:"4px",marginBottom:"20px"},children:[e.jsx("h4",{style:{margin:"0 0 10px 0",color:"#004085"},children:"📋 Required Columns"}),e.jsxs("ul",{style:{margin:0,paddingLeft:"20px",color:"#004085",fontSize:"0.9rem",lineHeight:"1.8"},children:[e.jsxs("li",{children:[e.jsx("strong",{children:"first_name"})," - Required"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"last_name"})," - Required"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"company_name"})," - Optional"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"address"})," - Optional"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"email"})," - Optional"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"phone"})," - Optional"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"payment_status"})," - Optional (paid/unpaid/complimentary)"]}),e.jsxs("li",{children:[e.jsx("strong",{children:"registration_type"})," - Optional (onsite/online/pre-registered)"]})]})]}),e.jsxs("div",{onDragOver:j,onDragLeave:R,onDrop:f,style:{border:`2px dashed ${m?"#007bff":"#dee2e6"}`,borderRadius:"8px",padding:"30px",textAlign:"center",backgroundColor:m?"#e7f3ff":"#f8f9fa",transition:"all 0.3s",marginBottom:"20px",cursor:"pointer"},onClick:()=>!u&&document.getElementById("fileInput").click(),children:[e.jsx("input",{id:"fileInput",type:"file",accept:".xlsx, .xls",onChange:i,disabled:u,style:{display:"none"}}),x?e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"3rem",marginBottom:"10px"},children:"📄"}),e.jsxs("div",{style:{fontSize:"1rem",fontWeight:"600",color:"#28a745",marginBottom:"5px"},children:["✓ ",x.name]}),e.jsxs("div",{style:{fontSize:"0.85rem",color:"#6c757d"},children:[(x.size/1024).toFixed(2)," KB"]}),!u&&e.jsx("button",{onClick:_=>{_.stopPropagation(),a(null)},style:{marginTop:"10px",padding:"5px 15px",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.85rem"},children:"Remove File"})]}):e.jsxs("div",{children:[e.jsx("div",{style:{fontSize:"3rem",marginBottom:"10px"},children:"📁"}),e.jsx("div",{style:{fontSize:"1rem",fontWeight:"600",color:"#495057",marginBottom:"5px"},children:m?"Drop file here":"Drag & drop Excel file here"}),e.jsx("div",{style:{fontSize:"0.85rem",color:"#6c757d",marginBottom:"10px"},children:"or click to browse"}),e.jsx("div",{style:{fontSize:"0.75rem",color:"#999"},children:"Supported: .xlsx, .xls (Max 10MB)"})]})]}),u&&e.jsxs("div",{style:{marginBottom:"20px",padding:"20px",backgroundColor:"#f8f9fa",borderRadius:"8px",border:"1px solid #dee2e6",textAlign:"center"},children:[e.jsx("div",{style:{fontSize:"2rem",marginBottom:"10px",animation:"spin 1s linear infinite"},children:"⏳"}),e.jsx("div",{style:{fontSize:"1rem",fontWeight:"600",color:"#007bff",marginBottom:"5px"},children:"Processing Excel File..."}),e.jsx("div",{style:{fontSize:"0.85rem",color:"#6c757d"},children:"Please wait, this may take a moment"})]}),e.jsxs("div",{style:{display:"flex",gap:"10px",marginBottom:"20px"},children:[e.jsx("button",{onClick:C,disabled:u,style:{flex:1,padding:"12px",border:"1px solid #dee2e6",backgroundColor:"white",color:"#6c757d",borderRadius:"6px",cursor:u?"not-allowed":"pointer",fontSize:"1rem",fontWeight:"500",opacity:u?.5:1},children:"Cancel"}),e.jsx("button",{onClick:b,disabled:u||!x,style:{flex:1,padding:"12px",border:"none",backgroundColor:"#28a745",color:"white",borderRadius:"6px",cursor:u||!x?"not-allowed":"pointer",fontSize:"1rem",fontWeight:"600",opacity:u||!x?.6:1},children:u?"⏳ Importing...":"📥 Start Import"})]}),d&&!u&&e.jsxs("div",{style:{padding:"15px",backgroundColor:d.hasErrors?"#fff3cd":"#d4edda",borderRadius:"8px",border:`1px solid ${d.hasErrors?"#ffc107":"#28a745"}`},children:[e.jsx("h4",{style:{margin:"0 0 10px 0",color:d.hasErrors?"#856404":"#155724"},children:"✅ Import Complete"}),e.jsx("pre",{style:{whiteSpace:"pre-wrap",fontSize:"0.9rem",color:"#212529",margin:0,maxHeight:"300px",overflowY:"auto",fontFamily:"monospace"},children:d.report})]})]})})};function ps(){const{user:t,loading:o}=He(),[l,u]=r.useState([]),[d,x]=r.useState([]),[a,m]=r.useState(!0),[s,i]=r.useState(null),[p,j]=r.useState(null),[R,f]=r.useState(!1),[b,C]=r.useState(null),[_,z]=r.useState(null),[D,$]=r.useState(null),[v,P]=r.useState(""),[B,q]=r.useState("desc"),[O,V]=r.useState(1),[ce]=r.useState(15),[w,M]=r.useState(!1),[A,E]=r.useState(null),[Z,ge]=r.useState(!1),[xe,ee]=r.useState(null),[k,Ee]=r.useState(!1),[Ae,we]=r.useState(!1),[Ge,ve]=r.useState(null),[pe,ke]=r.useState({registrationType:"all",paymentStatus:"all"}),[ae,Ue]=r.useState(!1),qe=G.defaults.baseURL,Fe=t&&["admin","superadmin"].includes(t.role?.name)&&t.role?.permissions?.includes("view-registrations"),W=t?.role?.permissions?.includes("edit-registration"),H=t?.role?.permissions?.includes("delete-registration"),X=h=>h?h.split("-").map(L=>L.charAt(0).toUpperCase()+L.slice(1).toLowerCase()).join("-"):"N/A",te=h=>{switch(h){case"onsite":return"#007bff";case"online":return"#17a2b8";case"pre-registered":return"#6c757d";case"complimentary":return"#28a745";default:return"#343a40"}},Se=h=>{switch(h){case"paid":return"#28a745";case"unpaid":return"#dc3545";case"complimentary":return"#17a2b8";default:return"#6c757d"}},fe=h=>{switch(h){case"not_printed":return"#6c757d";case"queued":return"#ffc107";case"printing":return"#007bff";case"printed":return"#28a745";case"reprinted":return"#fd7e14";case"failed":return"#dc3545";default:return"#6c757d"}},Ce=h=>h?new Date(h).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",Oe=async()=>{m(!0),i(null);try{let h=[],L=1,U=1;do{const se=(await G.get("/registrations",{params:{per_page:500,page:L}})).data;if(se.data)h=[...h,...se.data],U=se.last_page||1,L++;else{h=Array.isArray(se)?se:[];break}}while(L<=U);console.log("✅ Loaded all registrations:",h.length),u(h),x(h)}catch(h){i(h.response?.data?.message||"Failed to load registrations"),u([]),x([])}finally{m(!1)}};r.useEffect(()=>{Fe&&Oe()},[Fe]);const $e=()=>{let h=[...l];if(v.trim()){const L=v.toLowerCase().trim();h=h.filter(U=>{const le=(U.first_name||"").toLowerCase(),se=(U.last_name||"").toLowerCase(),Ne=`${le} ${se}`,Ye=(U.email||"").toLowerCase(),Me=(U.company_name||"").toLowerCase(),Xe=(U.ticket_number||"").toLowerCase();return le.includes(L)||se.includes(L)||Ne.includes(L)||Ye.includes(L)||Me.includes(L)||Xe.includes(L)})}pe.registrationType!=="all"&&(h=h.filter(L=>L.registration_type===pe.registrationType)),pe.paymentStatus!=="all"&&(h=h.filter(L=>L.payment_status===pe.paymentStatus)),h.sort((L,U)=>{const le=L.id||0,se=U.id||0;return B==="asc"?le-se:se-le}),console.log(`🔍 Filtered: ${h.length} from ${l.length}`),x(h)};r.useEffect(()=>{$e(),V(1)},[v,B,pe,l]);const nt=h=>{P(h.target.value)},at=()=>{P("")},it=()=>{q(h=>h==="asc"?"desc":"asc")},Je=()=>{ke({registrationType:"all",paymentStatus:"all"}),P("")},Te=h=>{$(L=>L===h?null:h)},ot=h=>{if(!W){alert("You don't have permission to change payment status.");return}E(h),M(!0)},lt=async h=>{if(A){z(A.id),i(null);try{const U=(await G.put(`/registrations/${A.id}/payment-status`,{payment_status:h})).data;u(le=>le.map(se=>se.id===A.id?U:se)),x(le=>le.map(se=>se.id===A.id?U:se)),M(!1),E(null),alert(`✅ Payment status updated to ${h.toUpperCase()}`)}catch(L){const U=L.response?.data?.error||L.response?.data?.message||"Failed to update payment status";i(U),alert(`❌ ${U}`)}finally{z(null)}}},dt=h=>{C(h),f(!0)},n=async h=>{try{await G.put(`/registrations/${h.id}`,h),f(!1),C(null),Oe(),alert("✅ Registration updated successfully")}catch(L){L.response?.status===409?alert(`❌ Update Failed:

${L.response.data.error}

Please use a different name.`):alert("❌ Failed to update registration. See console for details."),console.error("Update failed:",L.response||L)}},c=h=>{ee(h),ge(!0)},N=async()=>{if(xe)try{(await G.delete(`/registrations/${xe.id}`)).status===204&&(u(L=>L.filter(U=>U.id!==xe.id)),x(L=>L.filter(U=>U.id!==xe.id)),ne.length===1&&O>1&&V(O-1),alert("✅ Registration deleted successfully"))}catch(h){alert("❌ Failed to delete registration. See console for details."),console.error("Delete failed:",h.response||h)}finally{ee(null)}},Q=async h=>{i("");const L=h.ticket_number,U=window.open("","_blank");j(h.id);try{await G.post(`/registrations/${L}/scan`);const le=`/print-badge/${L}`;U?(U.location=le,U.focus()):window.open(le,"_blank"),Oe()}catch(le){if(U)try{U.close()}catch{}const se=le.response?.status,Ne=se===404?"Ticket not found.":se===403?"Scan not allowed in current mode or permission denied.":se===409?"Reprint limit reached for this badge.":le.response?.data?.error||le.response?.data?.message||"Scan/print failed.";if(i(Ne),se&&se!==401&&window.confirm(`${Ne}

Open badge page anyway?`)){const Me=`${qe}/registrations/${L}/badge?show_qr=false&print=true`;window.open(Me,"_blank")}}finally{j(null)}},K=async h=>{we(!0),ve(null),i(null);try{const L=new FileReader;L.onload=async U=>{try{const le=new Uint8Array(U.target.result),se=Qt(le,{type:"array"}),Ne=se.SheetNames[0],Ye=se.Sheets[Ne],Me=Yt.sheet_to_json(Ye,{header:1});if(Me.length<2){ve({report:"❌ Error: Excel file is empty or has no data rows",hasErrors:!0}),we(!1);return}const Xe=Me[0].map(Le=>Le.toString().toLowerCase().trim()),gt=["first_name","last_name"].filter(Le=>!Xe.includes(Le));if(gt.length>0){ve({report:`❌ Missing Required Columns: ${gt.join(", ")}

Found: ${Xe.join(", ")}`,hasErrors:!0}),we(!1);return}const ft=Me.slice(1).filter(Le=>Le.some(et=>et!==null&&et!=="")),ct=[],Ze=[];if(ft.forEach((Le,et)=>{const It=et+2,Pe={};Xe.forEach((Ft,Ot)=>{Pe[Ft]=Le[Ot]});const bt=Pe.first_name?.toString().trim(),jt=Pe.last_name?.toString().trim();if(!bt||!jt){Ze.push(`Row ${It}: Missing first_name or last_name`);return}const Et=Pe.registration_type?Pe.registration_type.toString().toLowerCase().replace(/\s+/g,"-"):"pre-registered";ct.push({first_name:bt,last_name:jt,company_name:Pe.company_name?.toString().trim()||null,address:Pe.address?.toString().trim()||null,email:Pe.email?.toString().trim()||null,phone:Pe.phone?.toString().trim()||null,payment_status:Pe.payment_status?.toString().toLowerCase().trim()||"unpaid",registration_type:Et})}),ct.length===0){ve({report:`❌ No valid registrations to import

Validation Errors:
${Ze.join(`
`)}`,hasErrors:!0}),we(!1);return}const Pt=await G.post("/registrations/batch",{registrations:ct}),{successful:yt,failed:zt,errors:At,message:Es}=Pt.data,Ke=[...Ze,...At||[]],Tt=`
        ╔════════════════════════════════════╗
        ║      IMPORT COMPLETE ✅             ║
        ╚════════════════════════════════════╝

        📊 Summary:
        ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        ✅ Successfully Imported:  ${yt}
        ❌ Failed:                 ${zt+Ze.length}
        ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
        📝 Total Rows Processed:   ${ft.length}

        ${Ke.length>0?`
⚠️ Errors (showing first 15):
${Ke.slice(0,15).join(`
`)}${Ke.length>15?`

... and ${Ke.length-15} more errors`:""}`:`
🎉 All registrations imported successfully!`}
        `;ve({report:Tt.trim(),hasErrors:Ke.length>0}),yt>0&&await Oe()}catch(le){console.error("Import error:",le);const se=le.response?.data?.message||le.response?.data?.error||le.message||"Unknown error occurred";ve({report:`❌ Import Failed

${se}

Please check your file format and try again.`,hasErrors:!0})}finally{we(!1)}},L.onerror=()=>{ve({report:`❌ Error: Failed to read file

Please ensure the file is not corrupted.`,hasErrors:!0}),we(!1)},L.readAsArrayBuffer(h)}catch(L){i("Failed to process Excel file: "+L.message),we(!1)}},_e=O*ce,Re=_e-ce,ne=d.slice(Re,_e),Y=Math.ceil(d.length/ce),Be=()=>{if(Y<=1)return null;const h=5;let L=Math.max(1,O-Math.floor(h/2)),U=Math.min(Y,L+h-1);return U-L<h-1&&(L=Math.max(1,U-h+1)),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginTop:"20px",flexWrap:"wrap",gap:"15px"},children:[e.jsxs("div",{style:{fontSize:"0.9rem",color:"#6c757d"},children:["Showing ",e.jsx("strong",{children:Re+1})," to"," ",e.jsx("strong",{children:Math.min(_e,d.length)})," of"," ",e.jsx("strong",{children:d.length})," registrations"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",flexWrap:"wrap"},children:[e.jsx("button",{onClick:()=>V(1),disabled:O===1,style:{...oe,opacity:O===1?.5:1,cursor:O===1?"not-allowed":"pointer"},children:"⏮ First"}),e.jsx("button",{onClick:()=>V(O-1),disabled:O===1,style:{...oe,opacity:O===1?.5:1,cursor:O===1?"not-allowed":"pointer"},children:"← Previous"}),L>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>V(1),style:oe,children:"1"}),L>2&&e.jsx("span",{style:{padding:"0 8px",color:"#6c757d"},children:"..."})]}),Array.from({length:U-L+1},(le,se)=>{const Ne=L+se;return e.jsx("button",{onClick:()=>V(Ne),style:{...oe,...Ne===O?Bt:{}},children:Ne},Ne)}),U<Y&&e.jsxs(e.Fragment,{children:[U<Y-1&&e.jsx("span",{style:{padding:"0 8px",color:"#6c757d"},children:"..."}),e.jsx("button",{onClick:()=>V(Y),style:oe,children:Y})]}),e.jsx("button",{onClick:()=>V(O+1),disabled:O===Y,style:{...oe,opacity:O===Y?.5:1,cursor:O===Y?"not-allowed":"pointer"},children:"Next →"}),e.jsx("button",{onClick:()=>V(Y),disabled:O===Y,style:{...oe,opacity:O===Y?.5:1,cursor:O===Y?"not-allowed":"pointer"},children:"Last ⏭"})]}),e.jsxs("div",{style:{fontSize:"0.9rem",color:"#6c757d"},children:["Page ",e.jsx("strong",{children:O})," of ",e.jsx("strong",{children:Y})]})]})},ie=h=>e.jsx("tr",{style:{backgroundColor:"#f8f9fa"},children:e.jsx("td",{colSpan:"9",style:{padding:"20px"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"20px",fontSize:"0.9rem"},children:[e.jsxs("div",{style:Ve,children:[e.jsx("h4",{style:Qe,children:"👤 Personal Information"}),e.jsxs("div",{style:me,children:[e.jsx("strong",{children:"Email:"})," ",h.email||"Not provided"]}),e.jsxs("div",{style:me,children:[e.jsx("strong",{children:"Phone:"})," ",h.phone||"Not provided"]}),e.jsxs("div",{style:me,children:[e.jsx("strong",{children:"Address:"})," ",h.address||"Not provided"]}),e.jsxs("div",{style:me,children:[e.jsx("strong",{children:"Designation:"})," ",h.designation||"Not provided"]})]}),e.jsxs("div",{style:Ve,children:[e.jsx("h4",{style:Qe,children:"📊 Demographics"}),e.jsxs("div",{style:me,children:[e.jsx("strong",{children:"Age Range:"})," ",h.age_range||"Not provided"]}),e.jsxs("div",{style:me,children:[e.jsx("strong",{children:"Gender:"})," ",h.gender||"Not provided"]}),h.gender==="Others"&&h.gender_other&&e.jsxs("div",{style:me,children:[e.jsx("strong",{children:"Gender (Other):"})," ",h.gender_other]})]}),e.jsxs("div",{style:Ve,children:[e.jsx("h4",{style:Qe,children:"📝 Survey - ICEGEX 2025"}),e.jsxs("div",{style:me,children:[e.jsx("strong",{children:"Industry Sector:"})," ",h.industry_sector||"Not provided"]}),h.industry_sector==="Others"&&h.industry_sector_other&&e.jsxs("div",{style:{...me,fontSize:"0.85rem",color:"#666",marginLeft:"15px"},children:["Specified: ",h.industry_sector_other]}),e.jsxs("div",{style:me,children:[e.jsx("strong",{children:"Reason for Attending:"})," ",h.reason_for_attending||"Not provided"]}),h.reason_for_attending==="Others"&&h.reason_for_attending_other&&e.jsxs("div",{style:{...me,fontSize:"0.85rem",color:"#666",marginLeft:"15px"},children:["Specified: ",h.reason_for_attending_other]})]}),e.jsxs("div",{style:Ve,children:[e.jsx("h4",{style:Qe,children:"💡 Additional Information"}),e.jsxs("div",{style:me,children:[e.jsx("strong",{children:"Areas of Interest:"})," ",h.specific_areas_of_interest||"Not provided"]}),h.specific_areas_of_interest==="Others"&&h.specific_areas_of_interest_other&&e.jsxs("div",{style:{...me,fontSize:"0.85rem",color:"#666",marginLeft:"15px"},children:["Other: ",h.specific_areas_of_interest_other]}),e.jsxs("div",{style:me,children:[e.jsx("strong",{children:"How did you learn:"})," ",h.how_did_you_learn_about||"Not provided"]}),h.how_did_you_learn_about==="Others"&&h.how_did_you_learn_about_other&&e.jsxs("div",{style:{...me,fontSize:"0.85rem",color:"#666",marginLeft:"15px"},children:["Other: ",h.how_did_you_learn_about_other]})]}),e.jsxs("div",{style:Ve,children:[e.jsx("h4",{style:Qe,children:"⚙️ System Information"}),e.jsxs("div",{style:me,children:[e.jsx("strong",{children:"Registered:"})," ",Ce(h.created_at)]}),e.jsxs("div",{style:me,children:[e.jsx("strong",{children:"Registered By:"})," ",h.registered_by?.name||"System"]}),e.jsxs("div",{style:me,children:[e.jsx("strong",{children:"Confirmed:"})," ",h.confirmed?`Yes (${Ce(h.confirmed_at)})`:"No"]}),e.jsxs("div",{style:me,children:[e.jsx("strong",{children:"Server Mode:"})," ",h.server_mode||"N/A"]})]})]})})}),oe={padding:"8px 12px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.85rem",transition:"all 0.3s"},Bt={backgroundColor:"#0056b3",fontWeight:"bold",boxShadow:"0 2px 8px rgba(0,91,187,0.4)"},Ve={padding:"15px",backgroundColor:"white",borderRadius:"8px",border:"1px solid #dee2e6"},Qe={marginTop:0,color:"#007bff",borderBottom:"2px solid #007bff",paddingBottom:"8px",marginBottom:"10px",fontSize:"1rem"},me={padding:"6px 0",borderBottom:"1px solid #e9ecef",fontSize:"0.9rem"};return o?e.jsx("p",{style:{textAlign:"center",fontSize:"1.2rem",color:"#555",padding:"40px"},children:"⏳ Checking authorization..."}):t?Fe?a&&l.length===0?e.jsx("p",{style:{textAlign:"center",fontSize:"1.2rem",color:"#555",padding:"40px"},children:"⏳ Loading registrations..."}):e.jsxs("div",{style:{padding:"20px",maxWidth:"1600px",margin:"0 auto",fontFamily:"Arial, sans-serif"},children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"20px",flexWrap:"wrap",gap:"15px"},children:[e.jsx("h2",{style:{fontSize:"1.8rem",margin:0,color:"#333"},children:"📋 Registrations - ICEGEX 2025"}),e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[W&&e.jsx("button",{onClick:()=>Ee(!0),disabled:a,style:{padding:"10px 20px",backgroundColor:"#17a2b8",color:"white",border:"none",borderRadius:"4px",cursor:a?"not-allowed":"pointer",fontSize:"0.95rem",fontWeight:"600",opacity:a?.6:1},children:"📥 Import Excel"}),e.jsx("button",{onClick:Oe,disabled:a,style:{padding:"10px 20px",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"4px",cursor:a?"not-allowed":"pointer",fontSize:"0.95rem",fontWeight:"600",opacity:a?.6:1},children:"🔄 Refresh"})]})]}),s&&e.jsxs("div",{style:{padding:"12px 15px",backgroundColor:"#f8d7da",color:"#721c24",borderRadius:"4px",marginBottom:"15px",border:"1px solid #f5c6cb",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[e.jsxs("span",{children:["❌ ",s]}),e.jsx("button",{onClick:()=>i(null),style:{background:"none",border:"none",fontSize:"1.2rem",cursor:"pointer",color:"#721c24"},children:"✕"})]}),e.jsxs("div",{style:{padding:"15px",backgroundColor:"#ffffff",borderRadius:"8px",marginBottom:"20px",border:"1px solid #ddd"},children:[e.jsxs("div",{style:{display:"flex",gap:"15px",flexWrap:"wrap",alignItems:"flex-end"},children:[e.jsxs("div",{style:{flex:"1 1 300px",minWidth:"250px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"600",fontSize:"0.9rem"},children:"🔍 Search"}),e.jsxs("div",{style:{display:"flex",gap:"8px"},children:[e.jsx("input",{type:"text",placeholder:"Search by name, email, company, ticket...",value:v,onChange:nt,style:{flex:1,padding:"10px 12px",border:"1px solid #ced4da",borderRadius:"4px",fontSize:"0.95rem",outline:"none"}}),v&&e.jsx("button",{onClick:at,style:{padding:"10px 16px",backgroundColor:"#6c757d",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.9rem"},children:"✕"})]})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"600",fontSize:"0.9rem"},children:"📊 Sort"}),e.jsx("button",{onClick:it,style:{padding:"10px 20px",backgroundColor:"#17a2b8",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.95rem",fontWeight:"600"},children:B==="asc"?"↑ Oldest First":"↓ Newest First"})]}),e.jsxs("div",{children:[e.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"600",fontSize:"0.9rem",opacity:0},children:"_"}),e.jsxs("button",{onClick:()=>Ue(!ae),style:{padding:"10px 20px",backgroundColor:ae?"#138496":"#17a2b8",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.95rem",fontWeight:"600"},children:["🔍 ",ae?"Hide":"Show"," Filters"]})]})]}),ae&&e.jsxs("div",{style:{marginTop:"15px",padding:"15px",backgroundColor:"#f8f9fa",borderRadius:"6px"},children:[e.jsxs("div",{style:{display:"flex",gap:"15px",flexWrap:"wrap",alignItems:"flex-end"},children:[e.jsxs("div",{style:{flex:"1 1 200px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"600",fontSize:"0.9rem"},children:"Registration Type"}),e.jsxs("select",{value:pe.registrationType,onChange:h=>ke(L=>({...L,registrationType:h.target.value})),style:{width:"100%",padding:"10px",border:"1px solid #ced4da",borderRadius:"4px",fontSize:"0.95rem",backgroundColor:"white"},children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"onsite",children:"Onsite"}),e.jsx("option",{value:"online",children:"Online"}),e.jsx("option",{value:"pre-registered",children:"Pre-Registered"}),e.jsx("option",{value:"complimentary",children:"Complimentary"})]})]}),e.jsxs("div",{style:{flex:"1 1 200px"},children:[e.jsx("label",{style:{display:"block",marginBottom:"5px",fontWeight:"600",fontSize:"0.9rem"},children:"Payment Status"}),e.jsxs("select",{value:pe.paymentStatus,onChange:h=>ke(L=>({...L,paymentStatus:h.target.value})),style:{width:"100%",padding:"10px",border:"1px solid #ced4da",borderRadius:"4px",fontSize:"0.95rem",backgroundColor:"white"},children:[e.jsx("option",{value:"all",children:"All Statuses"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"unpaid",children:"Unpaid"}),e.jsx("option",{value:"complimentary",children:"Complimentary"})]})]}),e.jsx("div",{children:e.jsx("button",{onClick:Je,style:{padding:"10px 20px",backgroundColor:"#ffc107",color:"#212529",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"0.95rem",fontWeight:"600"},children:"↺ Reset"})})]}),(pe.registrationType!=="all"||pe.paymentStatus!=="all")&&e.jsxs("div",{style:{marginTop:"10px",padding:"10px",backgroundColor:"#d1ecf1",borderRadius:"4px",fontSize:"0.9rem",color:"#0c5460"},children:[e.jsx("strong",{children:"🔍 Active Filters:"}),pe.registrationType!=="all"&&e.jsxs("span",{style:{marginLeft:"10px",padding:"2px 8px",backgroundColor:"#17a2b8",color:"white",borderRadius:"12px",fontSize:"0.85rem"},children:["Type: ",X(pe.registrationType)]}),pe.paymentStatus!=="all"&&e.jsxs("span",{style:{marginLeft:"10px",padding:"2px 8px",backgroundColor:"#17a2b8",color:"white",borderRadius:"12px",fontSize:"0.85rem"},children:["Payment: ",pe.paymentStatus.toUpperCase()]})]})]}),v&&e.jsxs("div",{style:{marginTop:"10px",padding:"10px",backgroundColor:"#d1ecf1",borderRadius:"4px",fontSize:"0.9rem",color:"#0c5460"},children:[e.jsx("strong",{children:"🔍 Search Results:"})," Found ",e.jsx("strong",{children:d.length})," of ",e.jsx("strong",{children:l.length})," total registrations"]})]}),e.jsxs("div",{style:{padding:"10px 15px",backgroundColor:"#f8f9fa",borderRadius:"8px",marginBottom:"20px",display:"flex",flexWrap:"wrap",gap:"20px",alignItems:"center",border:"1px solid #ddd"},children:[e.jsx("h4",{style:{margin:0,marginRight:"10px",fontSize:"1rem"},children:"Legend:"}),e.jsxs("div",{style:{display:"flex",flexWrap:"wrap",alignItems:"center",gap:"15px"},children:[e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("span",{style:{width:"14px",height:"14px",backgroundColor:"#007bff",borderRadius:"3px"}})," Onsite"]}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("span",{style:{width:"14px",height:"14px",backgroundColor:"#17a2b8",borderRadius:"3px"}})," Online"]}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("span",{style:{width:"14px",height:"14px",backgroundColor:"#6c757d",borderRadius:"3px"}})," Pre-Registered"]}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("span",{style:{width:"14px",height:"14px",backgroundColor:"#28a745",borderRadius:"3px"}})," Complimentary"]}),e.jsx("span",{style:{margin:"0 10px",color:"#ddd"},children:"|"}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("span",{style:{width:"14px",height:"14px",backgroundColor:"#28a745",borderRadius:"3px"}})," Paid"]}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("span",{style:{width:"14px",height:"14px",backgroundColor:"#dc3545",borderRadius:"3px"}})," Unpaid"]}),e.jsxs("span",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[e.jsx("span",{style:{width:"14px",height:"14px",backgroundColor:"#17a2b8",borderRadius:"3px"}})," Complimentary Payment"]}),W&&e.jsx("span",{style:{fontSize:"0.85rem",fontStyle:"italic",color:"#666"},children:"(Click payment badge to toggle)"})]})]}),e.jsx("div",{style:{overflowX:"auto",borderRadius:"8px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",minWidth:"1000px",backgroundColor:"white"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#343a40",color:"white"},children:[e.jsx("th",{style:{padding:"12px",textAlign:"left",borderBottom:"2px solid #dee2e6"},children:"⋮"}),e.jsxs("th",{style:{padding:"12px",textAlign:"left",borderBottom:"2px solid #dee2e6"},children:["ID ",B==="asc"?"↑":"↓"]}),e.jsx("th",{style:{padding:"12px",textAlign:"left",borderBottom:"2px solid #dee2e6"},children:"Name"}),e.jsx("th",{style:{padding:"12px",textAlign:"left",borderBottom:"2px solid #dee2e6"},children:"Company"}),e.jsx("th",{style:{padding:"12px",textAlign:"left",borderBottom:"2px solid #dee2e6"},children:"Ticket #"}),e.jsx("th",{style:{padding:"12px",textAlign:"center",borderBottom:"2px solid #dee2e6"},children:"Type"}),e.jsx("th",{style:{padding:"12px",textAlign:"center",borderBottom:"2px solid #dee2e6"},children:"Payment"}),e.jsx("th",{style:{padding:"12px",textAlign:"center",borderBottom:"2px solid #dee2e6"},children:"Badge"}),e.jsx("th",{style:{padding:"12px",textAlign:"center",borderBottom:"2px solid #dee2e6"},children:"Actions"})]})}),e.jsx("tbody",{children:ne.length>0?ne.map((h,L)=>e.jsxs(e.Fragment,{children:[e.jsxs("tr",{style:{backgroundColor:L%2===0?"#ffffff":"#f8f9fa",transition:"background-color 0.3s"},onMouseOver:U=>U.currentTarget.style.backgroundColor="#e2e6ea",onMouseOut:U=>U.currentTarget.style.backgroundColor=L%2===0?"#ffffff":"#f8f9fa",children:[e.jsx("td",{style:{padding:"12px",borderBottom:"1px solid #ddd"},children:e.jsx("button",{onClick:()=>Te(h.id),style:{background:"none",border:"none",cursor:"pointer",fontSize:"1rem",color:"#007bff",padding:"4px 8px"},title:"View full details",children:D===h.id?"▼":"▶"})}),e.jsx("td",{style:{padding:"12px",borderBottom:"1px solid #ddd"},children:h.id}),e.jsxs("td",{style:{padding:"12px",borderBottom:"1px solid #ddd"},children:[h.first_name," ",h.last_name]}),e.jsx("td",{style:{padding:"12px",borderBottom:"1px solid #ddd"},children:h.company_name||"N/A"}),e.jsx("td",{style:{padding:"12px",borderBottom:"1px solid #ddd",fontSize:"0.85rem",fontFamily:"monospace"},children:h.ticket_number}),e.jsx("td",{style:{padding:"12px",textAlign:"center",borderBottom:"1px solid #ddd"},children:e.jsx("span",{style:{padding:"6px 12px",borderRadius:"20px",color:"white",backgroundColor:te(h.registration_type),fontSize:"0.85rem",fontWeight:"bold"},children:X(h.registration_type)})}),e.jsx("td",{style:{padding:"12px",textAlign:"center",borderBottom:"1px solid #ddd"},children:e.jsx("span",{onClick:()=>W&&ot(h),style:{padding:"6px 12px",borderRadius:"20px",color:"white",backgroundColor:Se(h.payment_status),fontSize:"0.9rem",fontWeight:"bold",cursor:W?"pointer":"default",opacity:_===h.id?.6:1,transition:"all 0.3s",display:"inline-block",userSelect:"none",border:W?"2px solid transparent":"none"},onMouseOver:U=>{W&&_!==h.id&&(U.target.style.border="2px solid #fff",U.target.style.transform="scale(1.05)")},onMouseOut:U=>{W&&(U.target.style.border="2px solid transparent",U.target.style.transform="scale(1)")},title:W?`Click to change payment status (Current: ${h.payment_status?.toUpperCase()||"UNPAID"})`:h.payment_status?.toUpperCase()||"UNPAID",children:_===h.id?"...":h.payment_status?.toUpperCase()||"UNPAID"})}),e.jsx("td",{style:{padding:"12px",textAlign:"center",borderBottom:"1px solid #ddd"},children:e.jsx("span",{style:{color:fe(h.badge_status?.name),fontSize:"0.9rem",fontWeight:"bold",textTransform:"uppercase"},children:h.badge_status?.name?.replace("_"," ")||"UNKNOWN"})}),e.jsx("td",{style:{padding:"12px",textAlign:"center",borderBottom:"1px solid #ddd"},children:e.jsxs("div",{style:{display:"flex",justifyContent:"center",gap:"8px",flexWrap:"wrap"},children:[e.jsx("button",{onClick:()=>Q(h),disabled:p===h.id,style:{padding:"8px 12px",backgroundColor:"#17a2b8",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",opacity:p===h.id?.5:1,transition:"background-color 0.3s",fontSize:"0.85rem"},title:"Print Badge",children:p===h.id?"⏳":"🖨️"}),W&&e.jsx("button",{onClick:()=>dt(h),style:{padding:"8px 12px",backgroundColor:"#ffc107",color:"#212529",border:"none",borderRadius:"4px",cursor:"pointer",transition:"background-color 0.3s",fontSize:"0.85rem"},title:"Edit",children:"✏️"}),H&&e.jsx("button",{onClick:()=>c(h),style:{padding:"8px 12px",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",transition:"background-color 0.3s",fontSize:"0.85rem"},title:"Delete",children:"🗑️"})]})})]},h.id),D===h.id&&ie(h)]})):e.jsx("tr",{children:e.jsx("td",{colSpan:"9",style:{padding:"40px",textAlign:"center",color:"#6c757d"},children:v||pe.registrationType!=="all"||pe.paymentStatus!=="all"?e.jsxs(e.Fragment,{children:["🔍 No registrations found matching your filters",e.jsx("br",{}),e.jsx("button",{onClick:Je,style:{marginTop:"10px",padding:"8px 16px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"4px",cursor:"pointer"},children:"Clear All Filters"})]}):"No registrations found"})})})]})}),Be(),e.jsx(rt,{isOpen:R,onClose:()=>{f(!1),C(null)},title:"Edit Registration",size:"large",children:b&&e.jsx(ls,{registration:b,onSave:n,onCancel:()=>{f(!1),C(null)}})}),e.jsx(ds,{isOpen:w,onClose:()=>{M(!1),E(null)},registration:A,onConfirm:lt,isUpdating:_===A?.id}),e.jsx(cs,{isOpen:Z,onClose:()=>{ge(!1),ee(null)},onConfirm:N,title:"Delete Registration",message:`Are you sure you want to permanently delete this registration?
         
Name: ${xe?.first_name} ${xe?.last_name}
Company: ${xe?.company_name||"N/A"}
         
This action CANNOT be undone!`,confirmText:"Delete",danger:!0}),e.jsx(xs,{isOpen:k,onClose:()=>{Ae||(Ee(!1),ve(null))},onImport:K,isImporting:Ae,importResult:Ge})]}):e.jsx("div",{style:{padding:"40px",color:"#721c24",backgroundColor:"#f8d7da",textAlign:"center",fontSize:"1.2rem",borderRadius:"8px",margin:"20px"},children:"❌ Access Denied. You do not have permission to view registrations."}):e.jsx("p",{style:{color:"red",padding:"20px",textAlign:"center",fontSize:"1.2rem"},children:"🔒 You must be logged in to view this page."})}function ms(){const[t,o]=r.useState({first_name:"",last_name:"",email:"",phone:"",address:"",company_name:"",designation:"",age_range:"",gender:"",gender_other:"",industry_sector:"",industry_sector_other:"",reason_for_attending:"",reason_for_attending_other:"",specific_areas_of_interest:"",specific_areas_of_interest_other:"",how_did_you_learn_about:"",how_did_you_learn_about_other:"",registration_type:"onsite",payment_status:"unpaid"}),[l,u]=r.useState(""),[d,x]=r.useState(!1),[a,m]=r.useState(null),[s,i]=r.useState(!1),[p,j]=r.useState(null),[R,f]=r.useState(null),[b,C]=r.useState(!1),[_,z]=r.useState(""),[D,$]=r.useState({gender:!1,industry:!1,reason:!1,interest:!1,learn:!1}),v=t.registration_type==="pre-registered",P=t.registration_type==="complimentary",B=w=>w.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(w)?(z(""),!0):(z("❌ Invalid email format. Please enter a valid email address."),!1):(z(""),!0),q=async()=>{if(!l.trim()){j("Please enter a registration code");return}x(!0),j(null),m(null);try{const w=await G.get(`/verify-registration/${l.trim()}`);w.data.valid&&(w.data.already_confirmed?(j(`This registration has already been checked in on ${new Date(w.data.confirmed_at).toLocaleString()}`),m(null)):(m(w.data),o(M=>({...M,first_name:w.data.first_name||"",last_name:w.data.last_name||"",email:w.data.email||"",phone:w.data.phone||"",address:w.data.address||"",company_name:w.data.company_name||"",designation:w.data.designation||"",age_range:w.data.age_range||"",gender:w.data.gender||"",gender_other:w.data.gender_other||"",industry_sector:w.data.industry_sector||"",industry_sector_other:w.data.industry_sector_other||"",reason_for_attending:w.data.reason_for_attending||"",reason_for_attending_other:w.data.reason_for_attending_other||"",specific_areas_of_interest:w.data.specific_areas_of_interest||"",specific_areas_of_interest_other:w.data.specific_areas_of_interest_other||"",how_did_you_learn_about:w.data.how_did_you_learn_about||"",how_did_you_learn_about_other:w.data.how_did_you_learn_about_other||"",payment_status:w.data.payment_status||"unpaid",registration_type:w.data.registration_type||t.registration_type})),$({gender:w.data.gender==="Others",industry:w.data.industry_sector==="Others",reason:w.data.reason_for_attending==="Others",interest:w.data.specific_areas_of_interest==="Others",learn:w.data.how_did_you_learn_about==="Others"}),w.data.email&&B(w.data.email),f("✅ Registration verified! Please review and confirm your details below.")))}catch(w){const M=w.response?.data?.error||w.response?.data?.message||"Verification failed. Please check your code.";j(M),m(null)}finally{x(!1)}},O=w=>{const{name:M,value:A}=w.target;o({...t,[M]:A}),M==="email"&&B(A),M==="gender"&&($(E=>({...E,gender:A==="Others"})),A!=="Others"&&o(E=>({...E,gender_other:""}))),M==="industry_sector"&&($(E=>({...E,industry:A==="Others"})),A!=="Others"&&o(E=>({...E,industry_sector_other:""}))),M==="reason_for_attending"&&($(E=>({...E,reason:A==="Others"})),A!=="Others"&&o(E=>({...E,reason_for_attending_other:""}))),M==="specific_areas_of_interest"&&($(E=>({...E,interest:A==="Others"})),A!=="Others"&&o(E=>({...E,specific_areas_of_interest_other:""}))),M==="how_did_you_learn_about"&&($(E=>({...E,learn:A==="Others"})),A!=="Others"&&o(E=>({...E,how_did_you_learn_about_other:""})))},V=async w=>{try{await G.post(`/registrations/${w}/scan`);const M=`/print-badge/${w}`,A=window.open(M,"_blank");A?A.focus():window.open(M,"_blank")}catch(M){console.error("Badge print error:",M);const A=`/print-badge/${w}`;window.open(A,"_blank")}},ce=async w=>{if(w.preventDefault(),!t.first_name.trim()){j("❌ First Name is required"),window.scrollTo({top:0,behavior:"smooth"});return}if(!t.last_name.trim()){j("❌ Last Name is required"),window.scrollTo({top:0,behavior:"smooth"});return}if(!t.company_name.trim()){j("❌ Company/Organization Name is required"),window.scrollTo({top:0,behavior:"smooth"});return}if(t.email.trim()&&!B(t.email)){j("❌ Please provide a valid email address or leave the field empty."),document.querySelector('input[name="email"]')?.scrollIntoView({behavior:"smooth",block:"center"});return}if(!b){j("⚠️ Please confirm that all information provided is correct before submitting."),window.scrollTo({top:document.body.scrollHeight,behavior:"smooth"});return}i(!0),j(null),f(null);try{const A=(await G.post("/registrations",t)).data.registration,E=v?`✅ Pre-registered attendee confirmed successfully!

📋 Ticket: ${A.ticket_number}
👤 Name: ${A.first_name} ${A.last_name}`:P?`✅ Complimentary registration confirmed!

📋 Ticket: ${A.ticket_number}
👤 Name: ${A.first_name} ${A.last_name}`:`✅ Registration successful!

📋 Ticket Number: ${A.ticket_number}
👤 Name: ${A.first_name} ${A.last_name}
🏢 Company: ${A.company_name}`;f(E),setTimeout(()=>{V(A.ticket_number)},1e3),o({first_name:"",last_name:"",email:"",phone:"",address:"",company_name:"",designation:"",age_range:"",gender:"",gender_other:"",industry_sector:"",industry_sector_other:"",reason_for_attending:"",reason_for_attending_other:"",specific_areas_of_interest:"",specific_areas_of_interest_other:"",how_did_you_learn_about:"",how_did_you_learn_about_other:"",registration_type:"onsite",payment_status:"unpaid"}),C(!1),z(""),u(""),m(null),$({gender:!1,industry:!1,reason:!1,interest:!1,learn:!1}),window.scrollTo({top:0,behavior:"smooth"})}catch(M){const A=M.response?.status,E=M.response?.data;A===409?j(`❌ ${E.error||"This person is already registered."}

Please verify the name or contact support.`):A===422&&E.errors?.email?(j(`❌ ${E.errors.email[0]}`),z(E.errors.email[0]),document.querySelector('input[name="email"]')?.scrollIntoView({behavior:"smooth",block:"center"})):j(E?.message||E?.error||"Registration failed. Please try again."),window.scrollTo({top:0,behavior:"smooth"})}finally{i(!1)}};return r.useEffect(()=>{if(R||p){const w=setTimeout(()=>{f(null),j(null)},1e4);return()=>clearTimeout(w)}},[R,p]),r.useEffect(()=>{t.registration_type!=="pre-registered"&&t.registration_type!=="complimentary"&&(u(""),m(null))},[t.registration_type]),e.jsx("div",{style:y.container,children:e.jsxs("div",{style:y.card,children:[e.jsx("h2",{style:y.title,children:v?"🎫 Pre-Registration Check-In":P?"🎁 Complimentary Registration":"➕ Registration Form - ICEGEX 2025"}),p&&e.jsxs("div",{style:y.errorBox,children:[e.jsx("div",{style:{whiteSpace:"pre-line"},children:p}),e.jsx("button",{onClick:()=>j(null),style:y.closeBtn,children:"✕"})]}),R&&e.jsxs("div",{style:y.successBox,children:[e.jsx("div",{style:{whiteSpace:"pre-line"},children:R}),e.jsx("div",{style:{marginTop:"10px",fontSize:"0.9rem",fontStyle:"italic"},children:"🖨️ Opening badge print page..."}),e.jsx("button",{onClick:()=>f(null),style:y.closeBtn,children:"✕"})]}),e.jsxs("form",{onSubmit:ce,style:y.form,children:[e.jsxs("div",{style:y.section,children:[e.jsx("h3",{style:y.sectionTitle,children:"📋 Registration Type"}),e.jsxs("label",{style:y.label,children:[e.jsxs("span",{style:y.labelText,children:["Select Registration Type: ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsxs("select",{name:"registration_type",value:t.registration_type,onChange:O,style:y.select,required:!0,children:[e.jsx("option",{value:"onsite",children:"Onsite"}),e.jsx("option",{value:"online",children:"Online"}),e.jsx("option",{value:"pre-registered",children:"Pre-Registered"}),e.jsx("option",{value:"complimentary",children:"Complimentary"})]})]})]}),(v||P)&&!a&&e.jsxs("div",{style:y.preRegSection,children:[e.jsx("h3",{style:y.sectionTitle,children:P?"🎁 Verify Complimentary Code":"🔍 Verify Pre-Registration"}),e.jsx("p",{style:y.helpText,children:P?"Enter your complimentary access code to auto-fill your details:":"Enter your pre-registration code (ticket number) to auto-fill your details:"}),e.jsxs("div",{style:{display:"flex",gap:"10px",alignItems:"flex-end",flexWrap:"wrap"},children:[e.jsxs("label",{style:{...y.label,flex:1,minWidth:"250px"},children:[e.jsx("span",{style:y.labelText,children:P?"Complimentary Code:":"Pre-Registration Code:"}),e.jsx("input",{type:"text",value:l,onChange:w=>u(w.target.value.toUpperCase()),placeholder:"TICKET-XXXXXXXXXXXX",style:y.input,disabled:d})]}),e.jsx("button",{type:"button",onClick:q,disabled:d||!l.trim(),style:{...y.btnPrimary,opacity:d||!l.trim()?.5:1,cursor:d||!l.trim()?"not-allowed":"pointer"},children:d?"Verifying...":"Verify Code"})]}),e.jsx("p",{style:{...y.helpText,marginTop:"10px",marginBottom:0},children:"Or fill out the form manually below ↓"})]}),(v||P)&&a&&e.jsxs("div",{style:y.verifiedBanner,children:["✅ ",P?"Complimentary access":"Pre-registration"," verified for: ",e.jsxs("strong",{children:[a.first_name," ",a.last_name]}),e.jsx("br",{}),e.jsx("small",{children:"Please review and update your information below if needed"})]}),e.jsx("div",{style:y.divider}),e.jsxs("div",{style:y.section,children:[e.jsx("h3",{style:y.sectionTitle,children:"👤 Personal Information"}),e.jsxs("div",{style:y.row,children:[e.jsxs("label",{style:{...y.label,flex:1},children:[e.jsxs("span",{style:y.labelText,children:["First Name: ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("input",{name:"first_name",placeholder:"John",value:t.first_name,onChange:O,required:!0,style:y.input})]}),e.jsxs("label",{style:{...y.label,flex:1},children:[e.jsxs("span",{style:y.labelText,children:["Last Name: ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("input",{name:"last_name",placeholder:"Doe",value:t.last_name,onChange:O,required:!0,style:y.input})]})]}),e.jsxs("label",{style:y.label,children:[e.jsx("span",{style:y.labelText,children:"Email Address:"}),e.jsx("input",{type:"email",name:"email",placeholder:"john.doe@example.com (optional)",value:t.email,onChange:O,style:{...y.input,..._?{borderColor:"#dc3545",borderWidth:"2px"}:{}}}),_&&e.jsx("span",{style:y.fieldError,children:_}),!_&&t.email.trim()&&e.jsx("span",{style:y.fieldSuccess,children:"✓ Valid email format"})]}),e.jsxs("div",{style:y.row,children:[e.jsxs("label",{style:{...y.label,flex:1},children:[e.jsx("span",{style:y.labelText,children:"Phone Number:"}),e.jsx("input",{name:"phone",placeholder:"+63 912 345 6789 (optional)",value:t.phone,onChange:O,style:y.input})]}),e.jsxs("label",{style:{...y.label,flex:1},children:[e.jsx("span",{style:y.labelText,children:"Address:"}),e.jsx("input",{name:"address",placeholder:"City, Country (optional)",value:t.address,onChange:O,style:y.input})]})]}),e.jsxs("label",{style:y.label,children:[e.jsxs("span",{style:y.labelText,children:["Company/Organization: ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsx("input",{name:"company_name",placeholder:"Company Name",value:t.company_name,onChange:O,required:!0,style:y.input})]}),e.jsxs("label",{style:y.label,children:[e.jsx("span",{style:y.labelText,children:"Designation/Job Title:"}),e.jsx("input",{name:"designation",placeholder:"e.g., Manager, Owner, Student (optional)",value:t.designation,onChange:O,style:y.input})]}),e.jsxs("label",{style:y.label,children:[e.jsxs("span",{style:y.labelText,children:["Payment Status: ",e.jsx("span",{style:{color:"red"},children:"*"})]}),e.jsxs("select",{name:"payment_status",value:t.payment_status,onChange:O,style:y.select,required:!0,children:[e.jsx("option",{value:"unpaid",children:"Unpaid"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"complimentary",children:"Complimentary"})]})]})]}),e.jsx("div",{style:y.divider}),e.jsxs("div",{style:y.section,children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[e.jsx("h3",{style:{...y.sectionTitle,marginBottom:0},children:"📊 Demographics"}),e.jsx("span",{style:y.optionalBadge,children:"Optional"})]}),e.jsx("p",{style:y.helpText,children:"This information helps us understand our attendees better and improve future events."}),e.jsxs("label",{style:y.label,children:[e.jsx("span",{style:y.labelText,children:"Age Range:"}),e.jsxs("select",{name:"age_range",value:t.age_range,onChange:O,style:y.select,children:[e.jsx("option",{value:"",children:"-- Select Age Range --"}),e.jsx("option",{value:"18-24",children:"18-24"}),e.jsx("option",{value:"25-34",children:"25-34"}),e.jsx("option",{value:"35-44",children:"35-44"}),e.jsx("option",{value:"45-54",children:"45-54"}),e.jsx("option",{value:"55-64",children:"55-64"}),e.jsx("option",{value:"65+",children:"65+"})]})]}),e.jsxs("label",{style:y.label,children:[e.jsx("span",{style:y.labelText,children:"Gender:"}),e.jsxs("select",{name:"gender",value:t.gender,onChange:O,style:y.select,children:[e.jsx("option",{value:"",children:"-- Select Gender --"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"}),e.jsx("option",{value:"Prefer not to say",children:"Prefer not to say"}),e.jsx("option",{value:"Others",children:"Others"})]})]}),D.gender&&e.jsxs("label",{style:y.label,children:[e.jsx("span",{style:y.labelText,children:"Please specify:"}),e.jsx("input",{name:"gender_other",placeholder:"Please specify your gender",value:t.gender_other,onChange:O,style:y.input})]})]}),e.jsx("div",{style:y.divider}),e.jsxs("div",{style:y.section,children:[e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"15px"},children:[e.jsx("h3",{style:{...y.sectionTitle,marginBottom:0},children:"📝 Event Survey - ICEGEX 2025"}),e.jsx("span",{style:y.optionalBadge,children:"Optional"})]}),e.jsx("p",{style:y.helpText,children:"Help us serve you better! Your responses will help us tailor the event to your interests."}),e.jsxs("label",{style:y.label,children:[e.jsx("span",{style:y.labelText,children:"Industry Sector:"}),e.jsxs("select",{name:"industry_sector",value:t.industry_sector,onChange:O,style:y.select,children:[e.jsx("option",{value:"",children:"-- Select Industry Sector --"}),e.jsx("option",{value:"Ice Cream / Gelato / Frozen Dessert Brand",children:"Ice Cream / Gelato / Frozen Dessert Brand"}),e.jsx("option",{value:"Café / Bakery / Beverage or Dessert Shop",children:"Café / Bakery / Beverage or Dessert Shop"}),e.jsx("option",{value:"Restaurant / Catering / Food Chain",children:"Restaurant / Catering / Food Chain"}),e.jsx("option",{value:"Hotel / Resort / Hospitality",children:"Hotel / Resort / Hospitality"}),e.jsx("option",{value:"Food or Dairy Manufacturer / Supplier",children:"Food or Dairy Manufacturer / Supplier"}),e.jsx("option",{value:"Equipment / Packaging / Technology Provider",children:"Equipment / Packaging / Technology Provider"}),e.jsx("option",{value:"Marketing / Events / Creative Services",children:"Marketing / Events / Creative Services"}),e.jsx("option",{value:"Entrepreneur",children:"Entrepreneur"}),e.jsx("option",{value:"Student",children:"Student"}),e.jsx("option",{value:"General Visitor",children:"General Visitor"}),e.jsx("option",{value:"Others",children:"Others"})]})]}),D.industry&&e.jsxs("label",{style:y.label,children:[e.jsx("span",{style:y.labelText,children:"Please specify your industry:"}),e.jsx("input",{name:"industry_sector_other",placeholder:"Your industry sector",value:t.industry_sector_other,onChange:O,style:y.input})]}),e.jsxs("label",{style:y.label,children:[e.jsx("span",{style:y.labelText,children:"Reason for Attending ICEGEX 2025:"}),e.jsxs("select",{name:"reason_for_attending",value:t.reason_for_attending,onChange:O,style:y.select,children:[e.jsx("option",{value:"",children:"-- Select Reason --"}),e.jsx("option",{value:"Discover new ice cream, gelato, or soft serve products",children:"Discover new ice cream, gelato, or soft serve products"}),e.jsx("option",{value:"Source ingredients, equipment, or packaging",children:"Source ingredients, equipment, or packaging"}),e.jsx("option",{value:"Learn from demos, talks, or competitions",children:"Learn from demos, talks, or competitions"}),e.jsx("option",{value:"Explore franchise or business opportunities",children:"Explore franchise or business opportunities"}),e.jsx("option",{value:"Meet potential partners or suppliers",children:"Meet potential partners or suppliers"}),e.jsx("option",{value:"Scout the event for future participation",children:"Scout the event for future participation"}),e.jsx("option",{value:"Others",children:"Others"})]})]}),D.reason&&e.jsxs("label",{style:y.label,children:[e.jsx("span",{style:y.labelText,children:"Please specify your reason:"}),e.jsx("textarea",{name:"reason_for_attending_other",placeholder:"Your reason for attending",value:t.reason_for_attending_other,onChange:O,style:y.textarea,rows:3})]}),e.jsxs("label",{style:y.label,children:[e.jsx("span",{style:y.labelText,children:"Specific Areas of Interest:"}),e.jsxs("select",{name:"specific_areas_of_interest",value:t.specific_areas_of_interest,onChange:O,style:y.select,children:[e.jsx("option",{value:"",children:"-- Select Area of Interest --"}),e.jsx("option",{value:"Ingredients / Flavor Innovations",children:"Ingredients / Flavor Innovations"}),e.jsx("option",{value:"Machinery & Equipment",children:"Machinery & Equipment"}),e.jsx("option",{value:"Packaging & Cold Chain",children:"Packaging & Cold Chain"}),e.jsx("option",{value:"Toll Manufacturing",children:"Toll Manufacturing"}),e.jsx("option",{value:"Retail Concepts & Franchises",children:"Retail Concepts & Franchises"}),e.jsx("option",{value:"Gelato Techniques & Training",children:"Gelato Techniques & Training"}),e.jsx("option",{value:"Dairy-based Products",children:"Dairy-based Products"}),e.jsx("option",{value:"Non-Dairy / Vegan options",children:"Non-Dairy / Vegan options"}),e.jsx("option",{value:"Others",children:"Others"})]})]}),D.interest&&e.jsxs("label",{style:y.label,children:[e.jsx("span",{style:y.labelText,children:"Please specify your interests:"}),e.jsx("textarea",{name:"specific_areas_of_interest_other",placeholder:"Your specific interests",value:t.specific_areas_of_interest_other,onChange:O,style:y.textarea,rows:3})]}),e.jsxs("label",{style:y.label,children:[e.jsx("span",{style:y.labelText,children:"How did you learn about ICEGEX 2025?"}),e.jsxs("select",{name:"how_did_you_learn_about",value:t.how_did_you_learn_about,onChange:O,style:y.select,children:[e.jsx("option",{value:"",children:"-- Select Source --"}),e.jsx("option",{value:"Ads on Facebook / Instagram",children:"Ads on Facebook / Instagram"}),e.jsx("option",{value:"ICEGEX Official Page/Website / Social Media",children:"ICEGEX Official Page/Website / Social Media"}),e.jsx("option",{value:"Email Invitation or Newsletter",children:"Email Invitation or Newsletter"}),e.jsx("option",{value:"Word of Mouth (Family / Friends / Colleagues)",children:"Word of Mouth (Family / Friends / Colleagues)"}),e.jsx("option",{value:"Exhibitor / Brand Partner Invitation",children:"Exhibitor / Brand Partner Invitation"}),e.jsx("option",{value:"Media Feature or Influencer Affiliates",children:"Media Feature or Influencer Affiliates"}),e.jsx("option",{value:"Industry Association / Government Agency",children:"Industry Association / Government Agency"}),e.jsx("option",{value:"Event Listing Sites",children:"Event Listing Sites"}),e.jsx("option",{value:"Posters / Billboards / Flyers",children:"Posters / Billboards / Flyers"}),e.jsx("option",{value:"Others",children:"Others"})]})]}),D.learn&&e.jsxs("label",{style:y.label,children:[e.jsx("span",{style:y.labelText,children:"Please specify:"}),e.jsx("textarea",{name:"how_did_you_learn_about_other",placeholder:"How you learned about us",value:t.how_did_you_learn_about_other,onChange:O,style:y.textarea,rows:2})]})]}),e.jsx("div",{style:y.divider}),e.jsxs("div",{style:y.confirmationSection,children:[e.jsx("h3",{style:y.sectionTitle,children:"✅ Confirmation"}),e.jsxs("div",{style:y.summaryBox,children:[e.jsx("h4",{style:{margin:"0 0 15px 0",fontSize:"1rem",color:"#495057"},children:"📋 Registration Summary"}),e.jsxs("div",{style:y.summaryRow,children:[e.jsx("strong",{children:"Name:"})," ",t.first_name||"(not filled)"," ",t.last_name||"(not filled)"]}),e.jsxs("div",{style:y.summaryRow,children:[e.jsx("strong",{children:"Email:"})," ",t.email||"(not provided)"]}),e.jsxs("div",{style:y.summaryRow,children:[e.jsx("strong",{children:"Company:"})," ",t.company_name||"(not filled)"]}),e.jsxs("div",{style:y.summaryRow,children:[e.jsx("strong",{children:"Registration Type:"})," ",e.jsx("span",{style:{textTransform:"uppercase"},children:t.registration_type})]}),e.jsxs("div",{style:y.summaryRow,children:[e.jsx("strong",{children:"Payment Status:"})," ",e.jsx("span",{style:{textTransform:"uppercase"},children:t.payment_status})]})]}),e.jsxs("label",{style:y.checkboxLabel,children:[e.jsx("input",{type:"checkbox",checked:b,onChange:w=>C(w.target.checked),style:y.checkbox}),e.jsxs("span",{children:[e.jsx("strong",{children:"I confirm that all information provided above is correct and accurate."}),e.jsx("br",{}),e.jsx("small",{style:{color:"#6c757d"},children:"Please review all sections before submitting. You can scroll up to make any changes."})]})]})]}),e.jsxs("div",{style:y.submitSection,children:[e.jsx("button",{type:"submit",disabled:s||!b||!!_,style:{...y.btnSubmit,opacity:s||!b||_?.5:1,cursor:s||!b||_?"not-allowed":"pointer"},children:s?"⏳ Processing Registration...":"✓ Submit Registration"}),!b&&!_&&e.jsx("p",{style:{textAlign:"center",color:"#dc3545",fontSize:"0.9rem",marginTop:"10px"},children:"⚠️ Please check the confirmation box above to submit"}),_&&e.jsx("p",{style:{textAlign:"center",color:"#dc3545",fontSize:"0.9rem",marginTop:"10px"},children:"⚠️ Please fix the email error above before submitting"})]})]})]})})}const y={container:{padding:"20px",maxWidth:"900px",margin:"0 auto",fontFamily:"Arial, sans-serif"},card:{backgroundColor:"#ffffff",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0,0,0,0.1)",padding:"40px"},title:{fontSize:"2rem",marginBottom:"30px",color:"#333",textAlign:"center",borderBottom:"3px solid #007bff",paddingBottom:"20px"},errorBox:{padding:"15px",backgroundColor:"#f8d7da",color:"#721c24",borderRadius:"8px",marginBottom:"20px",border:"1px solid #f5c6cb",display:"flex",justifyContent:"space-between",alignItems:"flex-start"},successBox:{padding:"15px",backgroundColor:"#d4edda",color:"#155724",borderRadius:"8px",marginBottom:"20px",border:"1px solid #c3e6cb",display:"flex",flexDirection:"column",gap:"10px"},closeBtn:{background:"none",border:"none",fontSize:"1.2rem",cursor:"pointer",marginLeft:"10px",padding:"0 5px",color:"inherit",alignSelf:"flex-start"},preRegSection:{padding:"25px",backgroundColor:"#e7f3ff",borderRadius:"8px",marginBottom:"30px",border:"2px solid #007bff"},verifiedBanner:{padding:"20px",backgroundColor:"#d4edda",color:"#155724",borderRadius:"8px",marginBottom:"30px",border:"2px solid #28a745",textAlign:"center",fontWeight:"600",fontSize:"1.05rem"},form:{display:"flex",flexDirection:"column",gap:"30px"},section:{marginBottom:"10px"},sectionTitle:{fontSize:"1.4rem",color:"#007bff",marginBottom:"20px",paddingBottom:"10px",borderBottom:"2px solid #e9ecef"},optionalBadge:{padding:"4px 12px",backgroundColor:"#28a745",color:"white",borderRadius:"20px",fontSize:"0.85rem",fontWeight:"600"},helpText:{fontSize:"0.9rem",color:"#6c757d",marginBottom:"20px",padding:"12px",backgroundColor:"#f8f9fa",borderRadius:"6px",borderLeft:"4px solid #17a2b8"},divider:{height:"2px",backgroundColor:"#e9ecef",margin:"20px 0"},label:{display:"flex",flexDirection:"column",gap:"8px",marginBottom:"20px"},labelText:{fontSize:"1rem",color:"#495057",fontWeight:"600"},row:{display:"flex",gap:"20px",flexWrap:"wrap"},input:{padding:"12px 15px",border:"1px solid #ced4da",borderRadius:"6px",fontSize:"1rem",transition:"all 0.3s",outline:"none"},select:{padding:"12px 15px",border:"1px solid #ced4da",borderRadius:"6px",fontSize:"1rem",backgroundColor:"white",cursor:"pointer",transition:"all 0.3s",outline:"none"},textarea:{padding:"12px 15px",border:"1px solid #ced4da",borderRadius:"6px",fontSize:"1rem",resize:"vertical",fontFamily:"Arial, sans-serif",outline:"none"},fieldError:{color:"#dc3545",fontSize:"0.875rem",fontWeight:"600",marginTop:"-4px",display:"flex",alignItems:"center",gap:"5px"},fieldSuccess:{color:"#28a745",fontSize:"0.875rem",fontWeight:"600",marginTop:"-4px"},confirmationSection:{padding:"30px",backgroundColor:"#fff3cd",borderRadius:"8px",border:"2px solid #ffc107"},summaryBox:{padding:"20px",backgroundColor:"white",borderRadius:"6px",marginBottom:"20px",border:"1px solid #dee2e6"},summaryRow:{padding:"8px 0",borderBottom:"1px solid #e9ecef",fontSize:"0.95rem"},checkboxLabel:{display:"flex",alignItems:"flex-start",gap:"12px",fontSize:"1rem",cursor:"pointer",padding:"15px",backgroundColor:"white",borderRadius:"6px",border:"2px solid #dee2e6",transition:"all 0.3s"},checkbox:{width:"20px",height:"20px",marginTop:"2px",cursor:"pointer"},submitSection:{textAlign:"center",paddingTop:"20px"},btnSubmit:{padding:"18px 40px",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"8px",fontSize:"1.2rem",fontWeight:"bold",cursor:"pointer",transition:"all 0.3s",boxShadow:"0 4px 12px rgba(40,167,69,0.3)",width:"100%",maxWidth:"400px"},btnPrimary:{padding:"12px 24px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"6px",fontSize:"1rem",fontWeight:"600",cursor:"pointer",transition:"all 0.3s"}};function hs(){const[t,o]=r.useState(null),[l,u]=r.useState(!0),[d,x]=r.useState(null),[a,m]=r.useState(!1),[s,i]=r.useState({type:"",text:""}),[p,j]=r.useState([]),[R,f]=r.useState(!1),b=async()=>{u(!0);try{const v=await G.get("/server-mode");o(v.data.current_mode),x(null)}catch{x("Failed to fetch server mode.")}finally{u(!1)}},C=async()=>{f(!0);try{const v=await G.get("/server-mode/history");j(v.data.history||[])}catch(v){console.error("Failed to fetch history:",v)}finally{f(!1)}};r.useEffect(()=>{b(),C()},[]);const _=async v=>{m(!0),i({type:"",text:""});try{await G.post("/server-mode",{mode:v}),i({type:"success",text:`Server mode successfully changed to: ${v.toUpperCase()}`}),await b(),await C(),setTimeout(()=>i({type:"",text:""}),4e3)}catch(P){i({type:"danger",text:P.response?.data?.message||"Failed to update server mode"})}finally{m(!1)}},z={onsite:{label:"Onsite Only",icon:"🏢",color:"primary",description:"Only on-site registrations are allowed",variant:"primary"},online:{label:"Online Only",icon:"🌐",color:"info",description:"Only online registrations are allowed",variant:"info"},both:{label:"Hybrid Mode",icon:"🔄",color:"success",description:"Both onsite and online registrations are allowed",variant:"success"},deactivate:{label:"Deactivated",icon:"🚫",color:"danger",description:"All registrations are disabled",variant:"danger"}},D=()=>{const v=t?.mode?.toLowerCase()||"deactivate";return z[v]||z.deactivate};if(l)return e.jsx(ye,{className:"d-flex justify-content-center align-items-center",style:{minHeight:"400px"},children:e.jsxs("div",{className:"text-center",children:[e.jsx(je,{animation:"border",variant:"primary"}),e.jsx("p",{className:"mt-3 text-muted",children:"Loading server status..."})]})});if(d)return e.jsx(ye,{className:"mt-4",children:e.jsxs(ue,{variant:"danger",children:[e.jsx(ue.Heading,{children:"Error"}),e.jsx("p",{children:d}),e.jsx(de,{variant:"outline-danger",onClick:b,children:"Try Again"})]})});const $=D();return e.jsxs(ye,{fluid:!0,className:"py-4 px-3 px-md-4",style:{backgroundColor:"#f8f9fa",minHeight:"100vh"},children:[e.jsx(re,{className:"mb-4",children:e.jsxs(S,{children:[e.jsx("h2",{className:"fw-bold mb-2",style:{color:"#2c3e50"},children:"⚙️ Server Mode Management"}),e.jsx("p",{className:"text-muted mb-0",children:"Control registration availability across different channels"})]})}),s.text&&e.jsx(re,{className:"mb-3",children:e.jsx(S,{children:e.jsxs(ue,{variant:s.type,dismissible:!0,onClose:()=>i({type:"",text:""}),children:[s.type==="success"?"✅ ":"❌ ",s.text]})})}),e.jsxs(re,{className:"g-4",children:[e.jsx(S,{xs:12,lg:6,children:e.jsxs(g,{className:"shadow-sm border-0 h-100",children:[e.jsx(g.Header,{className:"text-white border-0",style:{background:`linear-gradient(135deg, ${$.color==="primary"?"#667eea 0%, #764ba2":$.color==="info"?"#4facfe 0%, #00f2fe":$.color==="success"?"#43e97b 0%, #38f9d7":"#f093fb 0%, #f5576c"} 100%)`},children:e.jsx("h5",{className:"mb-0 fw-semibold",children:"📊 Current Server Mode"})}),e.jsxs(g.Body,{className:"p-4",children:[e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{style:{fontSize:"64px",marginBottom:"20px"},children:$.icon}),e.jsx("h3",{className:"fw-bold mb-3",children:e.jsx(J,{bg:$.variant,className:"px-4 py-2",style:{fontSize:"1.2rem"},children:$.label})}),e.jsx("p",{className:"text-muted mb-0",children:$.description})]}),t&&e.jsx("div",{className:"mt-4 pt-3 border-top",children:e.jsxs(re,{className:"text-center",children:[e.jsxs(S,{children:[e.jsx("small",{className:"text-muted d-block mb-1",children:"Last Updated By"}),e.jsx("strong",{children:t.activated_by?.name||"System"})]}),e.jsxs(S,{children:[e.jsx("small",{className:"text-muted d-block mb-1",children:"Updated At"}),e.jsx("strong",{children:new Date(t.created_at).toLocaleString()})]})]})})]})]})}),e.jsx(S,{xs:12,lg:6,children:e.jsxs(g,{className:"shadow-sm border-0 h-100",children:[e.jsx(g.Header,{className:"bg-white border-bottom",children:e.jsx("h5",{className:"mb-0 fw-semibold text-primary",children:"🎛️ Change Server Mode"})}),e.jsxs(g.Body,{className:"p-4",children:[e.jsx("p",{className:"text-muted mb-4",children:"Select a new mode to control which registration types are allowed"}),e.jsxs("div",{className:"d-grid gap-3",children:[e.jsxs(de,{variant:t?.mode==="onsite"?"primary":"outline-primary",size:"lg",onClick:()=>_("onsite"),disabled:a||t?.mode==="onsite",className:"d-flex align-items-center justify-content-between",children:[e.jsxs("span",{children:[e.jsx("span",{className:"me-2",children:"🏢"}),e.jsx("strong",{children:"Onsite Only"})]}),t?.mode==="onsite"&&e.jsx(J,{bg:"light",text:"primary",children:"Active"})]}),e.jsxs(de,{variant:t?.mode==="online"?"info":"outline-info",size:"lg",onClick:()=>_("online"),disabled:a||t?.mode==="online",className:"d-flex align-items-center justify-content-between",children:[e.jsxs("span",{children:[e.jsx("span",{className:"me-2",children:"🌐"}),e.jsx("strong",{children:"Online Only"})]}),t?.mode==="online"&&e.jsx(J,{bg:"light",text:"info",children:"Active"})]}),e.jsxs(de,{variant:t?.mode==="both"?"success":"outline-success",size:"lg",onClick:()=>_("both"),disabled:a||t?.mode==="both",className:"d-flex align-items-center justify-content-between",children:[e.jsxs("span",{children:[e.jsx("span",{className:"me-2",children:"🔄"}),e.jsx("strong",{children:"Hybrid Mode (Both)"})]}),t?.mode==="both"&&e.jsx(J,{bg:"light",text:"success",children:"Active"})]}),e.jsxs(de,{variant:t?.mode==="deactivate"?"danger":"outline-danger",size:"lg",onClick:()=>_("deactivate"),disabled:a||t?.mode==="deactivate",className:"d-flex align-items-center justify-content-between",children:[e.jsxs("span",{children:[e.jsx("span",{className:"me-2",children:"🚫"}),e.jsx("strong",{children:"Deactivate All"})]}),t?.mode==="deactivate"&&e.jsx(J,{bg:"light",text:"danger",children:"Active"})]})]}),a&&e.jsxs("div",{className:"text-center mt-4",children:[e.jsx(je,{animation:"border",size:"sm",className:"me-2"}),e.jsx("span",{className:"text-muted",children:"Updating server mode..."})]})]})]})}),e.jsx(S,{xs:12,children:e.jsxs(g,{className:"shadow-sm border-0",children:[e.jsx(g.Header,{className:"bg-white border-bottom",children:e.jsxs("div",{className:"d-flex justify-content-between align-items-center",children:[e.jsx("h5",{className:"mb-0 fw-semibold text-primary",children:"📜 Mode Change History"}),e.jsx(de,{variant:"outline-primary",size:"sm",onClick:C,disabled:R,children:R?e.jsxs(e.Fragment,{children:[e.jsx(je,{animation:"border",size:"sm",className:"me-1"}),"Loading..."]}):"🔄 Refresh"})]})}),e.jsx(g.Body,{className:"p-0",children:R?e.jsx("div",{className:"text-center p-4",children:e.jsx(je,{animation:"border",variant:"primary"})}):p.length>0?e.jsx("div",{className:"table-responsive",children:e.jsxs("table",{className:"table table-hover mb-0",children:[e.jsx("thead",{className:"table-light",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4",children:"Mode"}),e.jsx("th",{children:"Changed By"}),e.jsx("th",{children:"Date & Time"}),e.jsx("th",{children:"Status"})]})}),e.jsx("tbody",{children:p.slice(0,10).map((v,P)=>{const B=z[v.mode?.toLowerCase()]||z.deactivate;return e.jsxs("tr",{children:[e.jsx("td",{className:"px-4",children:e.jsxs(J,{bg:B.variant,className:"px-3 py-2",children:[B.icon," ",B.label]})}),e.jsx("td",{children:v.activated_by?.name||"System"}),e.jsx("td",{className:"text-muted",children:new Date(v.created_at).toLocaleString()}),e.jsx("td",{children:P===0?e.jsx(J,{bg:"success",children:"Current"}):e.jsx(J,{bg:"secondary",children:"Previous"})})]},P)})})]})}):e.jsx("div",{className:"text-center p-5 text-muted",children:e.jsx("p",{className:"mb-0",children:"No history available"})})})]})})]}),e.jsxs(re,{className:"mt-4",children:[e.jsx(S,{xs:12,md:6,lg:3,children:e.jsx(g,{className:"border-0 shadow-sm",children:e.jsxs(g.Body,{className:"text-center",children:[e.jsx("div",{style:{fontSize:"32px"},children:"🏢"}),e.jsx("h6",{className:"mt-2 mb-1 fw-semibold",children:"Onsite Mode"}),e.jsx("small",{className:"text-muted",children:"Physical registration desk only"})]})})}),e.jsx(S,{xs:12,md:6,lg:3,children:e.jsx(g,{className:"border-0 shadow-sm",children:e.jsxs(g.Body,{className:"text-center",children:[e.jsx("div",{style:{fontSize:"32px"},children:"🌐"}),e.jsx("h6",{className:"mt-2 mb-1 fw-semibold",children:"Online Mode"}),e.jsx("small",{className:"text-muted",children:"Web-based registration only"})]})})}),e.jsx(S,{xs:12,md:6,lg:3,children:e.jsx(g,{className:"border-0 shadow-sm",children:e.jsxs(g.Body,{className:"text-center",children:[e.jsx("div",{style:{fontSize:"32px"},children:"🔄"}),e.jsx("h6",{className:"mt-2 mb-1 fw-semibold",children:"Hybrid Mode"}),e.jsx("small",{className:"text-muted",children:"Both channels active"})]})})}),e.jsx(S,{xs:12,md:6,lg:3,children:e.jsx(g,{className:"border-0 shadow-sm",children:e.jsxs(g.Body,{className:"text-center",children:[e.jsx("div",{style:{fontSize:"32px"},children:"🚫"}),e.jsx("h6",{className:"mt-2 mb-1 fw-semibold",children:"Deactivated"}),e.jsx("small",{className:"text-muted",children:"All registrations disabled"})]})})})]})]})}function ht({isOpen:t,onClose:o,title:l,children:u}){if(!t)return null;const d={position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.7)",zIndex:1e3,display:"flex",alignItems:"center",justifyContent:"center"},x={backgroundColor:"white",padding:"20px",borderRadius:"8px",minWidth:"400px",boxShadow:"0 4px 6px rgba(0, 0, 0, 0.1)",zIndex:1001},a={display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #eee",paddingBottom:"10px",marginBottom:"20px"},m={border:"none",background:"transparent",fontSize:"24px",cursor:"pointer"};return e.jsx("div",{style:d,onClick:o,children:e.jsxs("div",{style:x,onClick:s=>s.stopPropagation(),children:[e.jsxs("div",{style:a,children:[e.jsx("h3",{style:{margin:0},children:l}),e.jsx("button",{onClick:o,style:m,children:"×"})]}),u]})})}function us({user:t,onSave:o,onCancel:l}){const[u,d]=r.useState(t);r.useEffect(()=>{d(t)},[t]);const x=s=>{const{name:i,value:p}=s.target;d(j=>({...j,[i]:p}))},a=s=>{s.preventDefault(),o(u)},m={width:"95%",padding:"8px",marginBottom:"10px"};return e.jsxs("form",{onSubmit:a,children:[e.jsxs("div",{children:[e.jsx("label",{children:"Name"}),e.jsx("br",{}),e.jsx("input",{name:"name",value:u.name,onChange:x,style:m,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Email"}),e.jsx("br",{}),e.jsx("input",{name:"email",type:"email",value:u.email,onChange:x,style:m,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{children:"New Password (optional)"}),e.jsx("br",{}),e.jsx("input",{name:"password",type:"password",placeholder:"Leave blank to keep current password",onChange:x,style:m})]}),e.jsxs("div",{style:{marginTop:"20px",textAlign:"right"},children:[e.jsx("button",{type:"button",onClick:l,style:{marginRight:"10px"},children:"Cancel"}),e.jsx("button",{type:"submit",style:{fontWeight:"bold"},children:"Save Changes"})]})]})}function gs({roles:t,onSave:o,onCancel:l}){const[u,d]=r.useState({name:"",email:"",password:"",role_id:t.find(s=>s.name==="admin")?.id||""}),x=s=>{const{name:i,value:p}=s.target;d(j=>({...j,[i]:p}))},a=s=>{s.preventDefault(),o(u)},m={width:"95%",padding:"8px",marginBottom:"10px"};return e.jsxs("form",{onSubmit:a,children:[e.jsxs("div",{children:[e.jsx("label",{children:"Name"}),e.jsx("br",{}),e.jsx("input",{name:"name",value:u.name,onChange:x,style:m,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Email"}),e.jsx("br",{}),e.jsx("input",{name:"email",type:"email",value:u.email,onChange:x,style:m,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Password"}),e.jsx("br",{}),e.jsx("input",{name:"password",type:"password",value:u.password,onChange:x,style:m,required:!0,minLength:8})]}),e.jsxs("div",{children:[e.jsx("label",{children:"Role"}),e.jsx("br",{}),e.jsx("select",{name:"role_id",value:u.role_id,onChange:x,style:m,children:t.map(s=>e.jsx("option",{value:s.id,children:s.name.charAt(0).toUpperCase()+s.name.slice(1)},s.id))})]}),e.jsxs("div",{style:{marginTop:"20px",textAlign:"right"},children:[e.jsx("button",{type:"button",onClick:l,style:{marginRight:"10px"},children:"Cancel"}),e.jsx("button",{type:"submit",style:{fontWeight:"bold"},children:"Create User"})]})]})}function fs(){const[t,o]=r.useState([]),[l,u]=r.useState([]),[d,x]=r.useState(!0),[a,m]=r.useState(null),[s,i]=r.useState(!1),[p,j]=r.useState(!1),[R,f]=r.useState(null),b=async()=>{x(!0);try{const[v,P]=await Promise.all([G.get("/users"),G.get("/roles")]);o(v.data.data),u(P.data),m(null)}catch{m("Failed to fetch page data.")}finally{x(!1)}};r.useEffect(()=>{b()},[]);const C=v=>{f(v),i(!0)},_=async v=>{try{await G.put(`/users/${v.id}`,v),i(!1),b()}catch(P){alert("Failed to update user."),console.error(P.response?.data)}},z=()=>{j(!0)},D=async v=>{try{const P=await G.post("/users",v),{user:B,token:q}=P.data;console.log("✅ New user created:",B),console.log("🔑 Auto-generated token:",q),console.log(`New ${B.role.name} token:`,q),j(!1),b(),alert(`${B.name} created successfully and is now authenticated!`)}catch(P){alert("Failed to create user. Check console for details."),console.error(P.response?.data)}},$=async v=>{if(window.confirm("Are you sure you want to delete this admin?"))try{await G.delete(`/users/${v}`),b()}catch{alert("Failed to delete user.")}};return d?e.jsx("p",{style:{textAlign:"center",fontSize:"1.2rem",color:"#555"},children:"Loading users..."}):a?e.jsx("p",{style:{color:"red",textAlign:"center",fontSize:"1.2rem"},children:a}):e.jsxs("div",{style:{padding:"20px",maxWidth:"1200px",margin:"0 auto",fontFamily:"Arial, sans-serif"},children:[e.jsx("h2",{style:{fontSize:"1.8rem",marginBottom:"20px",color:"#333"},children:"👥 User Management"}),e.jsx("button",{onClick:z,style:{padding:"8px 16px",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",marginBottom:"20px",transition:"background-color 0.3s"},onMouseOver:v=>v.target.style.backgroundColor="#218838",onMouseOut:v=>v.target.style.backgroundColor="#28a745",children:"Add New User"}),e.jsx("div",{style:{overflowX:"auto",borderRadius:"8px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",minWidth:"600px"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f8f9fa",color:"#333"},children:[e.jsx("th",{style:{padding:"12px",textAlign:"left",borderBottom:"1px solid #ddd"},children:"ID"}),e.jsx("th",{style:{padding:"12px",textAlign:"left",borderBottom:"1px solid #ddd"},children:"Name"}),e.jsx("th",{style:{padding:"12px",textAlign:"left",borderBottom:"1px solid #ddd"},children:"Email"}),e.jsx("th",{style:{padding:"12px",textAlign:"left",borderBottom:"1px solid #ddd"},children:"Role"}),e.jsx("th",{style:{padding:"12px",textAlign:"center",borderBottom:"1px solid #ddd"},children:"Actions"})]})}),e.jsx("tbody",{children:t.map((v,P)=>e.jsxs("tr",{style:{backgroundColor:P%2===0?"#ffffff":"#f8f9fa",transition:"background-color 0.3s"},onMouseOver:B=>B.currentTarget.style.backgroundColor="#e2e6ea",onMouseOut:B=>B.currentTarget.style.backgroundColor=P%2===0?"#ffffff":"#f8f9fa",children:[e.jsx("td",{style:{padding:"12px",borderBottom:"1px solid #ddd"},children:v.id}),e.jsx("td",{style:{padding:"12px",borderBottom:"1px solid #ddd"},children:v.name}),e.jsx("td",{style:{padding:"12px",borderBottom:"1px solid #ddd"},children:v.email}),e.jsx("td",{style:{padding:"12px",borderBottom:"1px solid #ddd"},children:v.role?.name||"N/A"}),e.jsxs("td",{style:{padding:"12px",textAlign:"center",borderBottom:"1px solid #ddd",display:"flex",justifyContent:"center",gap:"8px",flexWrap:"wrap"},children:[e.jsx("button",{onClick:()=>C(v),style:{padding:"8px 12px",backgroundColor:"#ffc107",color:"#212529",border:"none",borderRadius:"4px",cursor:"pointer",transition:"background-color 0.3s"},onMouseOver:B=>B.target.style.backgroundColor="#e0a800",onMouseOut:B=>B.target.style.backgroundColor="#ffc107",children:"Edit"}),e.jsx("button",{onClick:()=>$(v.id),style:{padding:"8px 12px",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",transition:"background-color 0.3s"},onMouseOver:B=>B.target.style.backgroundColor="#c82333",onMouseOut:B=>B.target.style.backgroundColor="#dc3545",children:"Delete"})]})]},v.id))})]})}),e.jsx(ht,{isOpen:s,onClose:()=>i(!1),title:"Edit Admin User",children:R&&e.jsx(us,{user:R,onSave:_,onCancel:()=>i(!1)})}),e.jsx(ht,{isOpen:p,onClose:()=>j(!1),title:"Add New User",children:e.jsx(gs,{roles:l,onSave:D,onCancel:()=>j(!1)})})]})}function st({label:t,logoType:o,currentImagePath:l,onUploadSuccess:u}){const[d,x]=r.useState(null),[a,m]=r.useState(!1),[s,i]=r.useState({type:"",text:""}),[p,j]=r.useState(null),R=G.defaults.baseURL.replace("/api",""),f=z=>{if(!z)return"";if(/^https?:\/\//i.test(z))return z;const D=String(z).replace(/\\/g,"/").replace(/^\/?storage\/?/i,"");return`${R}/storage/${D}`},b=z=>{const D=z.target.files[0];if(x(D),i({type:"",text:""}),D){const $=new FileReader;$.onloadend=()=>{j($.result)},$.readAsDataURL(D)}else j(null)},C=async z=>{if(z.preventDefault(),!d){i({type:"warning",text:"Please select a file first"});return}m(!0),i({type:"",text:""});const D=new FormData;D.append("logo_type",o),D.append("logo_file",d);try{const $=await G.post("/dashboard/upload-logo",D,{headers:{"Content-Type":"multipart/form-data"}});i({type:"success",text:"Logo uploaded successfully!"}),x(null),j(null);const v=document.querySelector(`input[type="file"][data-logo-type="${o}"]`);v&&(v.value=""),u&&u(),setTimeout(()=>i({type:"",text:""}),3e3)}catch($){i({type:"danger",text:$.response?.data?.message||"Upload failed. Please try again."})}finally{m(!1)}},_=f(l);return e.jsxs("div",{className:"p-3 border rounded",style:{backgroundColor:"#fff"},children:[e.jsx("h6",{className:"fw-semibold mb-3",children:t}),!p&&_&&e.jsxs("div",{className:"mb-3 text-center p-3 bg-light rounded",children:[e.jsx("p",{className:"text-muted small mb-2",children:e.jsx("strong",{children:"Current Logo:"})}),e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100px",maxHeight:"150px",overflow:"hidden"},children:e.jsx(wt,{src:_,alt:t,thumbnail:!0,style:{maxWidth:"200px",maxHeight:"150px",objectFit:"contain"},onLoad:()=>console.log(`✅ ${t} loaded`),onError:z=>{console.error(`❌ ${t} failed to load`),z.target.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="200" height="100"%3E%3Crect width="200" height="100" fill="%23f0f0f0"/%3E%3Ctext x="50%25" y="50%25" text-anchor="middle" dy=".3em" fill="%23999" font-family="Arial" font-size="12"%3EImage not found%3C/text%3E%3C/svg%3E'}},l)})]}),p&&e.jsxs("div",{className:"mb-3 text-center p-3 rounded",style:{backgroundColor:"#d4edda",border:"2px solid #28a745"},children:[e.jsx("p",{className:"text-success small mb-2",children:e.jsx("strong",{children:"New Logo Preview:"})}),e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100px",maxHeight:"150px",overflow:"hidden"},children:e.jsx(wt,{src:p,alt:"Preview",thumbnail:!0,style:{maxWidth:"200px",maxHeight:"150px",objectFit:"contain",border:"2px solid #28a745"}})}),e.jsx("div",{className:"mt-2",children:e.jsx("small",{className:"text-success",children:"✅ Ready to upload"})})]}),!p&&!_&&e.jsxs("div",{className:"mb-3 text-center p-4 bg-light rounded",children:[e.jsx("div",{style:{fontSize:"2rem",marginBottom:"0.5rem"},children:"📷"}),e.jsx("p",{className:"text-muted small mb-0",children:"No logo uploaded yet"})]}),e.jsxs(T,{onSubmit:C,children:[e.jsxs(T.Group,{className:"mb-2",children:[e.jsx(T.Control,{type:"file",accept:"image/*",onChange:b,disabled:a,size:"sm","data-logo-type":o}),e.jsx(T.Text,{className:"text-muted",children:"Max 2MB. JPG, PNG, SVG supported."})]}),s.text&&e.jsx(ue,{variant:s.type,className:"py-2 px-3 small mb-2",children:s.text}),e.jsx(de,{type:"submit",variant:"outline-primary",size:"sm",disabled:!d||a,className:"w-100",children:a?e.jsxs(e.Fragment,{children:[e.jsx(je,{animation:"border",size:"sm",className:"me-2"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:["📤 Upload ",t]})})]})]})}function ys({settings:t,registration:o}){const l=G.defaults.baseURL.replace("/api",""),u="https://www.qr-code-generator.com/wp-content/themes/qr/new_structure/markets/core_market/generator/dist/generator/assets/images/websiteQRCode_noFrame.png",d=x=>{if(!x)return"";if(/^https?:\/\//i.test(x))return x;const a=String(x).replace(/\\/g,"/").replace(/^\/?storage\/?/i,"");return`${l}/storage/${a}`};return e.jsxs("div",{style:{width:"340px",height:"245px",border:"1px solid #ccc",padding:"15px",boxSizing:"border-box",position:"relative",textAlign:"center",fontFamily:"sans-serif"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"10px",marginBottom:"10px"},children:[e.jsx("img",{src:d(t.main_logo_path),alt:"Main Logo",style:{maxWidth:"80px",maxHeight:"40px"}},t.main_logo_path),e.jsx("div",{style:{textAlign:"left"},children:e.jsxs("p",{style:{fontSize:"10px",margin:0,lineHeight:1.2},children:[t.event_location,e.jsx("br",{}),t.event_datetime]})})]}),e.jsxs("p",{style:{fontSize:"24px",fontWeight:"bold",marginTop:"0",marginBottom:"2px",whiteSpace:"nowrap"},children:[o.firstName||o.first_name," ",o.lastName||o.last_name]}),e.jsx("p",{style:{fontSize:"14px",borderBottom:"2px solid #000",paddingBottom:"5px",marginBottom:"5px",minHeight:"16px"},children:o.companyName||o.company_name||"N/A"}),e.jsx("p",{style:{fontSize:"16px",fontWeight:"bold",marginBottom:"5px"},children:t.event_name}),e.jsx("img",{src:u,alt:"QR Code Preview",style:{width:"70px",height:"70px",margin:"0 auto"}}),e.jsxs("div",{style:{position:"absolute",bottom:"10px",width:"100%",left:0,padding:"0 15px",boxSizing:"border-box",display:"flex",justifyContent:"space-between",alignItems:"flex-end",fontSize:"8px"},children:[e.jsxs("div",{style:{textAlign:"left"},children:[e.jsx("strong",{children:"Organized By:"}),e.jsx("br",{}),e.jsx("img",{src:d(t.organizer_logo_path),alt:"Organizer",style:{maxHeight:"15px",maxWidth:"60px"}},t.organizer_logo_path)]}),e.jsxs("div",{style:{textAlign:"left"},children:[e.jsx("strong",{children:"Event Manager:"}),e.jsx("br",{}),e.jsx("img",{src:d(t.manager_logo_path),alt:"Manager",style:{maxHeight:"15px",maxWidth:"60px"}},t.manager_logo_path)]}),e.jsxs("div",{style:{textAlign:"left"},children:[e.jsx("strong",{children:"Registration:"}),e.jsx("br",{}),e.jsx("img",{src:d(t.registration_logo_path),alt:"Registration",style:{maxHeight:"15px",maxWidth:"60px"}},t.registration_logo_path)]})]})]})}function bs(){const[t,o]=r.useState({event_location:"",event_datetime:"",event_name:"",main_logo_path:"",organizer_logo_path:"",manager_logo_path:"",registration_logo_path:""}),[l,u]=r.useState(!0),[d,x]=r.useState(!1),[a,m]=r.useState({type:"",text:""}),[s,i]=r.useState(null),p={firstName:"John",lastName:"Doe",companyName:"Sample Company Inc."},j=async()=>{try{const b=await G.get("/settings");o(C=>({...C,...b.data}))}catch{i("Could not load settings. Please try again.")}finally{u(!1)}};r.useEffect(()=>{j()},[]);const R=b=>{const{name:C,value:_}=b.target;o(z=>({...z,[C]:_}))},f=async b=>{b.preventDefault(),x(!0),m({type:"",text:""});try{const C=await G.post("/settings",{event_location:t.event_location,event_datetime:t.event_datetime,event_name:t.event_name});m({type:"success",text:C.data.message||"Settings saved successfully!"}),setTimeout(()=>m({type:"",text:""}),3e3)}catch{m({type:"danger",text:"Failed to save settings. Please try again."})}finally{x(!1)}};return l?e.jsx(ye,{className:"d-flex justify-content-center align-items-center",style:{minHeight:"400px"},children:e.jsxs("div",{className:"text-center",children:[e.jsx(je,{animation:"border",variant:"primary"}),e.jsx("p",{className:"mt-3 text-muted",children:"Loading settings..."})]})}):s?e.jsx(ye,{className:"mt-4",children:e.jsxs(ue,{variant:"danger",children:[e.jsx(ue.Heading,{children:"Error"}),e.jsx("p",{children:s})]})}):e.jsxs(ye,{fluid:!0,className:"py-4 px-3 px-md-4",style:{backgroundColor:"#f8f9fa",minHeight:"100vh"},children:[e.jsx(re,{className:"mb-4",children:e.jsxs(S,{children:[e.jsx("h2",{className:"fw-bold mb-2",style:{color:"#2c3e50"},children:"⚙️ Badge Settings"}),e.jsx("p",{className:"text-muted mb-0",children:"Customize your event details and manage logos for printable badges"})]})}),a.text&&e.jsx(re,{className:"mb-3",children:e.jsx(S,{children:e.jsxs(ue,{variant:a.type,dismissible:!0,onClose:()=>m({type:"",text:""}),children:[a.type==="success"?"✅ ":"❌ ",a.text]})})}),e.jsxs(re,{className:"g-4",children:[e.jsxs(S,{xs:12,lg:7,children:[e.jsxs(g,{className:"shadow-sm border-0 mb-4",children:[e.jsx(g.Header,{className:"bg-white border-bottom",children:e.jsx("h5",{className:"mb-0 fw-semibold text-primary",children:"📝 Event Details"})}),e.jsx(g.Body,{className:"p-4",children:e.jsxs(T,{onSubmit:f,children:[e.jsxs(T.Group,{className:"mb-3",children:[e.jsx(T.Label,{className:"fw-semibold",children:"📍 Event Location"}),e.jsx(T.Control,{type:"text",name:"event_location",value:t.event_location,onChange:R,placeholder:"e.g., Convention Center Hall A",size:"lg"})]}),e.jsxs(T.Group,{className:"mb-3",children:[e.jsx(T.Label,{className:"fw-semibold",children:"📅 Date & Time"}),e.jsx(T.Control,{type:"text",name:"event_datetime",value:t.event_datetime,onChange:R,placeholder:"e.g., January 15, 2024 - 9:00 AM",size:"lg"})]}),e.jsxs(T.Group,{className:"mb-4",children:[e.jsx(T.Label,{className:"fw-semibold",children:"⌛ Event Duration Day"}),e.jsx(T.Control,{type:"text",name:"event_name",value:t.event_name,onChange:R,placeholder:"e.g., DAY 1, Opening Ceremony",size:"lg"})]}),e.jsx("div",{className:"d-grid",children:e.jsx(de,{variant:"primary",type:"submit",disabled:d,size:"lg",className:"fw-semibold",children:d?e.jsxs(e.Fragment,{children:[e.jsx(je,{animation:"border",size:"sm",className:"me-2"}),"Saving Changes..."]}):e.jsx(e.Fragment,{children:"💾 Save Event Details"})})})]})})]}),e.jsxs(g,{className:"shadow-sm border-0",children:[e.jsx(g.Header,{className:"bg-white border-bottom",children:e.jsx("h5",{className:"mb-0 fw-semibold text-primary",children:"🖼️ Logo Management"})}),e.jsx(g.Body,{className:"p-4",children:e.jsxs("div",{className:"d-grid gap-3",children:[e.jsx(st,{label:"Main Event Logo",logoType:"event",currentImagePath:t.main_logo_path,onUploadSuccess:j}),e.jsx(st,{label:"Organizer Logo",logoType:"organizer",currentImagePath:t.organizer_logo_path,onUploadSuccess:j}),e.jsx(st,{label:"Event Manager Logo",logoType:"manager",currentImagePath:t.manager_logo_path,onUploadSuccess:j}),e.jsx(st,{label:"Registration Logo",logoType:"registration",currentImagePath:t.registration_logo_path,onUploadSuccess:j})]})})]})]}),e.jsx(S,{xs:12,lg:5,children:e.jsxs("div",{style:{position:"sticky",top:"20px"},children:[e.jsxs(g,{className:"shadow-sm border-0",children:[e.jsx(g.Header,{className:"bg-gradient text-gray text-center",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:e.jsx("h5",{className:"mb-0 fw-semibold",children:"👁️ Live Preview"})}),e.jsxs(g.Body,{className:"p-4",style:{backgroundColor:"#f8f9fa"},children:[e.jsx("div",{className:"text-center mb-3",children:e.jsx("small",{className:"text-muted",children:"Preview updates automatically as you make changes"})}),e.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"400px"},children:e.jsx(ys,{settings:t,registration:p})})]})]}),e.jsx(g,{className:"shadow-sm border-0 mt-3",children:e.jsx(g.Body,{className:"p-3",children:e.jsxs("small",{className:"text-muted",children:[e.jsx("strong",{children:"Preview Data:"}),e.jsxs("ul",{className:"mb-0 mt-2",style:{fontSize:"0.875rem"},children:[e.jsxs("li",{children:["Name: ",p.firstName," ",p.lastName]}),e.jsxs("li",{children:["Company: ",p.companyName]})]})]})})})]})})]})]})}const F={page:{fontFamily:'system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',backgroundColor:"#f0f2f5",display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",padding:"20px",boxSizing:"border-box"},card:{backgroundColor:"#ffffff",borderRadius:"12px",boxShadow:"0 8px 32px rgba(0, 0, 0, 0.1)",padding:"40px",width:"100%",maxWidth:"700px",textAlign:"center",boxSizing:"border-box"},title:{fontSize:"2.2rem",fontWeight:"700",color:"#1d2129",marginBottom:"10px"},subtitle:{fontSize:"1.1rem",color:"#606770",marginBottom:"30px"},form:{display:"flex",flexDirection:"column",gap:"18px",textAlign:"left"},input:{width:"100%",padding:"14px 18px",fontSize:"16px",border:"1px solid #e0e0e0",borderRadius:"8px",boxSizing:"border-box",transition:"border-color 0.3s, box-shadow 0.3s"},select:{width:"100%",padding:"14px 18px",fontSize:"16px",border:"1px solid #e0e0e0",borderRadius:"8px",boxSizing:"border-box",backgroundColor:"white",cursor:"pointer",transition:"border-color 0.3s, box-shadow 0.3s"},textarea:{width:"100%",padding:"14px 18px",fontSize:"16px",border:"1px solid #e0e0e0",borderRadius:"8px",boxSizing:"border-box",fontFamily:'system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif',resize:"vertical",minHeight:"80px"},button:{width:"100%",padding:"16px",fontSize:"1.2rem",fontWeight:"bold",color:"#ffffff",backgroundColor:"#007bff",border:"none",borderRadius:"8px",cursor:"pointer",marginTop:"10px",transition:"background-color 0.3s, transform 0.2s"},messageBox:t=>({backgroundColor:t==="success"?"#eaf7ec":"#fff0f0",color:t==="success"?"#1e4620":"#d93025",border:`1px solid ${t==="success"?"#a3d9a5":"#ffc0c0"}`,borderRadius:"8px",padding:"20px",marginBottom:"20px",textAlign:"center",fontSize:"1.1rem",fontWeight:"500"}),section:{marginBottom:"20px",padding:"20px",backgroundColor:"#f8f9fa",borderRadius:"8px",border:"1px solid #e0e0e0",textAlign:"left"},sectionTitle:{fontSize:"18px",fontWeight:"700",color:"#007bff",marginBottom:"15px",paddingBottom:"10px",borderBottom:"2px solid #007bff"},optionalBadge:{display:"inline-block",padding:"4px 12px",backgroundColor:"#28a745",color:"white",borderRadius:"20px",fontSize:"12px",fontWeight:"600",marginLeft:"10px"},helpText:{fontSize:"14px",color:"#6c757d",marginBottom:"15px",padding:"10px",backgroundColor:"#e7f3ff",borderRadius:"6px",borderLeft:"4px solid #17a2b8"},fieldWrapper:{display:"flex",flexDirection:"column",gap:"6px"},fieldError:{color:"#dc3545",fontSize:"14px",fontWeight:"600",marginTop:"-4px",display:"flex",alignItems:"center",gap:"5px"},fieldSuccess:{color:"#28a745",fontSize:"14px",fontWeight:"600",marginTop:"-4px"},modalOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:9999,padding:"20px"},modalContent:{backgroundColor:"#ffffff",borderRadius:"12px",padding:"30px",maxWidth:"600px",width:"100%",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)",animation:"slideIn 0.3s ease-out"},modalHeader:{fontSize:"24px",fontWeight:"700",color:"#343a40",marginBottom:"20px",textAlign:"center",borderBottom:"2px solid #e0e0e0",paddingBottom:"15px"},infoSection:{backgroundColor:"#f8f9fa",padding:"20px",borderRadius:"8px",marginBottom:"20px"},infoRow:{display:"flex",justifyContent:"space-between",padding:"10px 0",borderBottom:"1px solid #e0e0e0"},infoLabel:{fontWeight:"600",color:"#6c757d",minWidth:"140px",textAlign:"left"},infoValue:{color:"#212529",textAlign:"right",flex:1,wordBreak:"break-word"},warningBox:{backgroundColor:"#fff3cd",border:"2px solid #ffc107",borderRadius:"8px",padding:"15px",marginBottom:"25px"},warningIcon:{fontSize:"24px",marginRight:"10px",verticalAlign:"middle"},warningText:{color:"#856404",fontSize:"15px",lineHeight:"1.5"},modalButtons:{display:"flex",gap:"15px",justifyContent:"center",marginTop:"25px"},confirmButton:{backgroundColor:"#28a745",color:"#ffffff",padding:"12px 30px",fontSize:"16px",fontWeight:"600",borderRadius:"8px",border:"none",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 10px rgba(40, 167, 69, 0.3)"},cancelButton:{backgroundColor:"#6c757d",color:"#ffffff",padding:"12px 30px",fontSize:"16px",fontWeight:"600",borderRadius:"8px",border:"none",cursor:"pointer",transition:"all 0.3s ease"},kioskNote:{backgroundColor:"#e3f2fd",border:"1px solid #2196f3",borderRadius:"8px",padding:"12px",marginBottom:"15px",color:"#1565c0",fontSize:"14px",textAlign:"center"}},js=({isOpen:t,formData:o,onConfirm:l,onCancel:u})=>{if(!t)return null;const d=[{label:"First Name",value:o.first_name,required:!0},{label:"Last Name",value:o.last_name,required:!0},{label:"Email",value:o.email||"Not provided"},{label:"Phone",value:o.phone||"Not provided"},{label:"Address",value:o.address||"Not provided"},{label:"Company",value:o.company_name||"Not provided"},{label:"Designation",value:o.designation||"Not provided"}],x=[];return o.age_range&&x.push({label:"Age Range",value:o.age_range}),o.gender&&x.push({label:"Gender",value:o.gender==="Others"&&o.gender_other?`Others: ${o.gender_other}`:o.gender}),o.industry_sector&&x.push({label:"Industry",value:o.industry_sector==="Others"&&o.industry_sector_other?`Others: ${o.industry_sector_other}`:o.industry_sector}),e.jsx("div",{style:F.modalOverlay,onClick:u,children:e.jsxs("div",{style:F.modalContent,onClick:a=>a.stopPropagation(),children:[e.jsx("h2",{style:F.modalHeader,children:"⚠️ Confirm Registration Details"}),e.jsxs("div",{style:F.kioskNote,children:[e.jsx("strong",{children:"🖥️ Kiosk Mode:"})," Badge will be printed immediately after confirmation"]}),e.jsxs("div",{style:F.infoSection,children:[e.jsx("h3",{style:{marginBottom:"15px",color:"#343a40"},children:"Please verify the registrant's information:"}),d.map((a,m)=>e.jsxs("div",{style:{...F.infoRow,borderBottom:m===d.length-1&&x.length===0?"none":"1px solid #e0e0e0"},children:[e.jsxs("span",{style:F.infoLabel,children:[a.label,a.required&&e.jsx("span",{style:{color:"#dc3545"},children:" *"}),":"]}),e.jsx("span",{style:{...F.infoValue,fontWeight:a.required?"600":"normal",color:a.value==="Not provided"?"#6c757d":"#212529"},children:a.value})]},m)),x.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{margin:"15px 0",paddingTop:"15px",borderTop:"2px solid #dee2e6"},children:e.jsx("h4",{style:{fontSize:"14px",color:"#6c757d",marginBottom:"10px"},children:"Additional Information:"})}),x.map((a,m)=>e.jsxs("div",{style:{...F.infoRow,borderBottom:m===x.length-1?"none":"1px solid #e0e0e0"},children:[e.jsxs("span",{style:F.infoLabel,children:[a.label,":"]}),e.jsx("span",{style:F.infoValue,children:a.value})]},m))]})]}),e.jsxs("div",{style:F.warningBox,children:[e.jsx("span",{style:F.warningIcon,children:"⚠️"}),e.jsxs("span",{style:F.warningText,children:[e.jsx("strong",{children:"Important Notice:"}),e.jsx("br",{}),"Once you submit this registration, the information ",e.jsx("strong",{children:"CANNOT be edited or modified"}),". The badge will be printed immediately. Please ensure all information is correct before proceeding.",e.jsx("br",{}),e.jsx("br",{}),e.jsx("strong",{children:"📋 Registration Type:"})," On-Site (Walk-in)"]})]}),e.jsx("div",{style:{textAlign:"center",marginBottom:"20px"},children:e.jsx("p",{style:{fontSize:"16px",color:"#343a40",fontWeight:"500"},children:"Is all the information correct?"})}),e.jsxs("div",{style:F.modalButtons,children:[e.jsx("button",{onClick:u,style:F.cancelButton,onMouseOver:a=>{a.target.style.backgroundColor="#5a6268",a.target.style.transform="translateY(-2px)"},onMouseOut:a=>{a.target.style.backgroundColor="#6c757d",a.target.style.transform="translateY(0)"},children:"← Go Back & Edit"}),e.jsx("button",{onClick:l,style:F.confirmButton,onMouseOver:a=>{a.target.style.backgroundColor="#218838",a.target.style.transform="translateY(-2px)",a.target.style.boxShadow="0 6px 15px rgba(40, 167, 69, 0.4)"},onMouseOut:a=>{a.target.style.backgroundColor="#28a745",a.target.style.transform="translateY(0)",a.target.style.boxShadow="0 4px 10px rgba(40, 167, 69, 0.3)"},children:"✓ Confirm & Print Badge"})]})]})})};function St(){const{user:t}=He(),[o,l]=r.useState(null),[u,d]=r.useState(!0),[x,a]=r.useState(!1),[m,s]=r.useState(""),[i,p]=r.useState({first_name:"",last_name:"",email:"",phone:"",address:"",company_name:"",designation:"",age_range:"",gender:"",gender_other:"",industry_sector:"",industry_sector_other:"",reason_for_attending:"",reason_for_attending_other:"",specific_areas_of_interest:"",specific_areas_of_interest_other:"",how_did_you_learn_about:"",how_did_you_learn_about_other:"",registration_type:"onsite",payment_status:"unpaid"}),[j,R]=r.useState({gender:!1,industry:!1,reason:!1,interest:!1,learn:!1}),[f,b]=r.useState(!1),[C,_]=r.useState(""),[z,D]=r.useState(""),$={first_name:"",last_name:"",email:"",phone:"",address:"",company_name:"",designation:"",age_range:"",gender:"",gender_other:"",industry_sector:"",industry_sector_other:"",reason_for_attending:"",reason_for_attending_other:"",specific_areas_of_interest:"",specific_areas_of_interest_other:"",how_did_you_learn_about:"",how_did_you_learn_about_other:"",registration_type:"onsite",payment_status:"unpaid"},v=w=>w.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(w)?(s(""),!0):(s("❌ Invalid email format. Please enter a valid email address."),!1):(s(""),!0),P=w=>{const M=w.response;return M?.status===422&&M.data?.errors?Object.values(M.data.errors).flat()[0]||"Validation failed.":M?.data?.message||M?.data?.error||"Registration failed. Please try again."};r.useEffect(()=>{(async()=>{try{const M=await G.get("/server-mode/status");l(M.data.current_mode?.mode||null)}catch{D("Could not connect to the server.")}finally{d(!1)}})()},[]);const B=w=>{const{name:M,value:A}=w.target;p({...i,[M]:A}),M==="email"&&v(A),M==="gender"&&(R(E=>({...E,gender:A==="Others"})),A!=="Others"&&p(E=>({...E,gender_other:""}))),M==="industry_sector"&&(R(E=>({...E,industry:A==="Others"})),A!=="Others"&&p(E=>({...E,industry_sector_other:""}))),M==="reason_for_attending"&&(R(E=>({...E,reason:A==="Others"})),A!=="Others"&&p(E=>({...E,reason_for_attending_other:""}))),M==="specific_areas_of_interest"&&(R(E=>({...E,interest:A==="Others"})),A!=="Others"&&p(E=>({...E,specific_areas_of_interest_other:""}))),M==="how_did_you_learn_about"&&(R(E=>({...E,learn:A==="Others"})),A!=="Others"&&p(E=>({...E,how_did_you_learn_about_other:""})))},q=async w=>{if(w.preventDefault(),!t||!["admin","superadmin"].includes(t.role?.name)){D("You must be logged in as an admin or superadmin to perform registration.");return}if(!i.first_name.trim()||!i.last_name.trim()||!i.company_name.trim()){D("Please fill in at least the first name, last name, and company."),window.scrollTo({top:0,behavior:"smooth"});return}if(i.email.trim()&&!v(i.email)){D("❌ Please provide a valid email address or leave the field empty."),document.querySelector('input[name="email"]')?.scrollIntoView({behavior:"smooth",block:"center"});return}D(""),a(!0)},O=async()=>{a(!1),b(!0),D(""),_("");try{const M=(await G.post("/registrations",i)).data.registration.ticket_number;_("✅ Registration Successful! The badge is now printing..."),window.open(`/print-badge/${M}`,"_blank"),setTimeout(()=>{p($),R({gender:!1,industry:!1,reason:!1,interest:!1,learn:!1}),s(""),_("Ready for the next registrant.")},4e3)}catch(w){const M=w.response?.status,A=w.response?.data;M===409?D(`❌ ${A.error||"This person is already registered."}

Please verify the name or contact support.`):M===422&&A.errors?.email?(D(`❌ ${A.errors.email[0]}`),s(A.errors.email[0]),document.querySelector('input[name="email"]')?.scrollIntoView({behavior:"smooth",block:"center"})):D(P(w)),window.scrollTo({top:0,behavior:"smooth"})}finally{b(!1)}},V=()=>{a(!1)},ce=(w,M)=>e.jsx("div",{style:F.page,children:e.jsxs("div",{style:F.card,children:[e.jsx("h2",{style:{...F.title,fontSize:"1.8rem"},children:w}),e.jsx("p",{style:F.subtitle,children:M})]})});return u?ce("Loading Kiosk...","Connecting to the registration server."):o!=="onsite"&&o!=="both"?ce("Kiosk Mode Disabled","Onsite registration is currently closed."):e.jsxs("div",{style:F.page,children:[e.jsxs("div",{style:F.card,children:[e.jsx("h1",{style:F.title,children:"🖥️ On-Site Registration - ICEGEX 2025"}),e.jsx("p",{style:F.subtitle,children:"Enter the registrant's details below to print their badge."}),C&&e.jsx("div",{style:F.messageBox("success"),children:C}),z&&e.jsx("div",{style:F.messageBox("error"),children:z}),e.jsxs("form",{onSubmit:q,style:F.form,children:[e.jsxs("div",{style:F.section,children:[e.jsx("h3",{style:F.sectionTitle,children:"👤 Personal Information"}),e.jsx("input",{name:"first_name",value:i.first_name,onChange:B,placeholder:"First Name *",required:!0,style:F.input}),e.jsx("input",{name:"last_name",value:i.last_name,onChange:B,placeholder:"Last Name *",required:!0,style:F.input}),e.jsxs("div",{style:F.fieldWrapper,children:[e.jsx("input",{name:"email",value:i.email,onChange:B,placeholder:"Email Address (Optional)",type:"email",style:{...F.input,...m?{borderColor:"#dc3545",borderWidth:"2px"}:{}}}),m&&e.jsx("span",{style:F.fieldError,children:m}),!m&&i.email.trim()&&e.jsx("span",{style:F.fieldSuccess,children:"✓ Valid email format"})]}),e.jsx("input",{name:"phone",value:i.phone,onChange:B,placeholder:"Phone Number (Optional)",style:F.input}),e.jsx("input",{name:"address",value:i.address,onChange:B,placeholder:"Address (Optional)",style:F.input}),e.jsx("input",{name:"company_name",value:i.company_name,onChange:B,placeholder:"Company/Organization *",required:!0,style:F.input}),e.jsx("input",{name:"designation",value:i.designation,onChange:B,placeholder:"Designation/Job Title (Optional)",style:F.input})]}),e.jsxs("div",{style:F.section,children:[e.jsxs("h3",{style:F.sectionTitle,children:["📊 Demographics",e.jsx("span",{style:F.optionalBadge,children:"Optional"})]}),e.jsx("p",{style:F.helpText,children:"This information helps us understand our attendees better."}),e.jsxs("select",{name:"age_range",value:i.age_range,onChange:B,style:F.select,children:[e.jsx("option",{value:"",children:"-- Select Age Range --"}),e.jsx("option",{value:"18-24",children:"18-24"}),e.jsx("option",{value:"25-34",children:"25-34"}),e.jsx("option",{value:"35-44",children:"35-44"}),e.jsx("option",{value:"45-54",children:"45-54"}),e.jsx("option",{value:"55-64",children:"55-64"}),e.jsx("option",{value:"65+",children:"65+"})]}),e.jsxs("select",{name:"gender",value:i.gender,onChange:B,style:F.select,children:[e.jsx("option",{value:"",children:"-- Select Gender --"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"}),e.jsx("option",{value:"Prefer not to say",children:"Prefer not to say"}),e.jsx("option",{value:"Others",children:"Others"})]}),j.gender&&e.jsx("input",{name:"gender_other",placeholder:"Please specify gender",value:i.gender_other,onChange:B,style:F.input})]}),e.jsxs("div",{style:F.section,children:[e.jsxs("h3",{style:F.sectionTitle,children:["📝 Event Survey",e.jsx("span",{style:F.optionalBadge,children:"Optional"})]}),e.jsx("p",{style:F.helpText,children:"Help us serve attendees better with these optional questions."}),e.jsxs("select",{name:"industry_sector",value:i.industry_sector,onChange:B,style:F.select,children:[e.jsx("option",{value:"",children:"-- Select Industry Sector --"}),e.jsx("option",{value:"Ice Cream / Gelato / Frozen Dessert Brand",children:"Ice Cream / Gelato / Frozen Dessert Brand"}),e.jsx("option",{value:"Café / Bakery / Beverage or Dessert Shop",children:"Café / Bakery / Beverage or Dessert Shop"}),e.jsx("option",{value:"Restaurant / Catering / Food Chain",children:"Restaurant / Catering / Food Chain"}),e.jsx("option",{value:"Hotel / Resort / Hospitality",children:"Hotel / Resort / Hospitality"}),e.jsx("option",{value:"Food or Dairy Manufacturer / Supplier",children:"Food or Dairy Manufacturer / Supplier"}),e.jsx("option",{value:"Equipment / Packaging / Technology Provider",children:"Equipment / Packaging / Technology Provider"}),e.jsx("option",{value:"Marketing / Events / Creative Services",children:"Marketing / Events / Creative Services"}),e.jsx("option",{value:"Entrepreneur",children:"Entrepreneur"}),e.jsx("option",{value:"Student",children:"Student"}),e.jsx("option",{value:"General Visitor",children:"General Visitor"}),e.jsx("option",{value:"Others",children:"Others"})]}),j.industry&&e.jsx("input",{name:"industry_sector_other",placeholder:"Please specify your industry",value:i.industry_sector_other,onChange:B,style:F.input}),e.jsxs("select",{name:"reason_for_attending",value:i.reason_for_attending,onChange:B,style:F.select,children:[e.jsx("option",{value:"",children:"-- Reason for Attending --"}),e.jsx("option",{value:"Discover new ice cream, gelato, or soft serve products",children:"Discover new ice cream, gelato, or soft serve products"}),e.jsx("option",{value:"Source ingredients, equipment, or packaging",children:"Source ingredients, equipment, or packaging"}),e.jsx("option",{value:"Learn from demos, talks, or competitions",children:"Learn from demos, talks, or competitions"}),e.jsx("option",{value:"Explore franchise or business opportunities",children:"Explore franchise or business opportunities"}),e.jsx("option",{value:"Meet potential partners or suppliers",children:"Meet potential partners or suppliers"}),e.jsx("option",{value:"Scout the event for future participation",children:"Scout the event for future participation"}),e.jsx("option",{value:"Others",children:"Others"})]}),j.reason&&e.jsx("textarea",{name:"reason_for_attending_other",placeholder:"Please specify your reason for attending",value:i.reason_for_attending_other,onChange:B,style:F.textarea}),e.jsxs("select",{name:"specific_areas_of_interest",value:i.specific_areas_of_interest,onChange:B,style:F.select,children:[e.jsx("option",{value:"",children:"-- Areas of Interest --"}),e.jsx("option",{value:"Ingredients / Flavor Innovations",children:"Ingredients / Flavor Innovations"}),e.jsx("option",{value:"Machinery & Equipment",children:"Machinery & Equipment"}),e.jsx("option",{value:"Packaging & Cold Chain",children:"Packaging & Cold Chain"}),e.jsx("option",{value:"Toll Manufacturing",children:"Toll Manufacturing"}),e.jsx("option",{value:"Retail Concepts & Franchises",children:"Retail Concepts & Franchises"}),e.jsx("option",{value:"Gelato Techniques & Training",children:"Gelato Techniques & Training"}),e.jsx("option",{value:"Dairy-based Products",children:"Dairy-based Products"}),e.jsx("option",{value:"Non-Dairy / Vegan options",children:"Non-Dairy / Vegan options"}),e.jsx("option",{value:"Others",children:"Others"})]}),j.interest&&e.jsx("textarea",{name:"specific_areas_of_interest_other",placeholder:"Please specify your specific interests",value:i.specific_areas_of_interest_other,onChange:B,style:F.textarea}),e.jsxs("select",{name:"how_did_you_learn_about",value:i.how_did_you_learn_about,onChange:B,style:F.select,children:[e.jsx("option",{value:"",children:"-- How did you learn about ICEGEX 2025? --"}),e.jsx("option",{value:"Ads on Facebook / Instagram",children:"Ads on Facebook / Instagram"}),e.jsx("option",{value:"ICEGEX Official Page/Website / Social Media",children:"ICEGEX Official Page/Website / Social Media"}),e.jsx("option",{value:"Email Invitation or Newsletter",children:"Email Invitation or Newsletter"}),e.jsx("option",{value:"Word of Mouth (Family / Friends / Colleagues)",children:"Word of Mouth (Family / Friends / Colleagues)"}),e.jsx("option",{value:"Exhibitor / Brand Partner Invitation",children:"Exhibitor / Brand Partner Invitation"}),e.jsx("option",{value:"Media Feature or Influencer Affiliates",children:"Media Feature or Influencer Affiliates"}),e.jsx("option",{value:"Industry Association / Government Agency",children:"Industry Association / Government Agency"}),e.jsx("option",{value:"Event Listing Sites",children:"Event Listing Sites"}),e.jsx("option",{value:"Posters / Billboards / Flyers",children:"Posters / Billboards / Flyers"}),e.jsx("option",{value:"Others",children:"Others"})]}),j.learn&&e.jsx("textarea",{name:"how_did_you_learn_about_other",placeholder:"Please specify how you learned about us",value:i.how_did_you_learn_about_other,onChange:B,style:F.textarea})]}),e.jsx("button",{type:"submit",disabled:f||!!m,style:{...F.button,...(f||!!m)&&{backgroundColor:"#6c757d",cursor:"not-allowed"}},onMouseOver:w=>{!f&&!m&&(w.currentTarget.style.backgroundColor="#0056b3")},onMouseOut:w=>{!f&&!m&&(w.currentTarget.style.backgroundColor="#007bff")},children:f?"Processing...":"Review & Print Badge"}),m&&e.jsx("p",{style:{textAlign:"center",color:"#dc3545",fontSize:"0.9rem",marginTop:"10px"},children:"⚠️ Please fix the email error above before submitting"})]})]}),e.jsx(js,{isOpen:x,formData:i,onConfirm:O,onCancel:V})]})}const I={container:{padding:"40px 20px",maxWidth:"700px",margin:"auto",fontFamily:"'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif",backgroundColor:"#ffffff",borderRadius:"12px",boxShadow:"0 10px 30px rgba(0, 0, 0, 0.08)"},form:{display:"flex",flexDirection:"column",gap:"18px",marginTop:"25px"},input:{width:"100%",padding:"14px 18px",fontSize:"16px",border:"1px solid #e0e0e0",borderRadius:"8px",boxSizing:"border-box",transition:"border-color 0.3s, box-shadow 0.3s"},select:{width:"100%",padding:"14px 18px",fontSize:"16px",border:"1px solid #e0e0e0",borderRadius:"8px",boxSizing:"border-box",backgroundColor:"white",cursor:"pointer",transition:"border-color 0.3s, box-shadow 0.3s"},textarea:{width:"100%",padding:"14px 18px",fontSize:"16px",border:"1px solid #e0e0e0",borderRadius:"8px",boxSizing:"border-box",fontFamily:"'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif",resize:"vertical",minHeight:"80px"},button:{padding:"14px 25px",fontSize:"17px",fontWeight:"600",borderRadius:"8px",cursor:"pointer",border:"none",transition:"transform 0.2s ease, background-color 0.2s ease, box-shadow 0.3s ease",letterSpacing:"0.5px",marginTop:"10px"},primaryButton:{backgroundColor:"#007bff",color:"#ffffff",boxShadow:"0 4px 10px rgba(0, 123, 255, 0.3)"},disabledButton:{backgroundColor:"#cccccc",color:"#777777",cursor:"not-allowed",boxShadow:"none"},successContainer:{padding:"40px",textAlign:"center",maxWidth:"500px",margin:"auto",opacity:1,transition:"opacity 1.2s ease-in-out",backgroundColor:"#f9f9f9",borderRadius:"12px",boxShadow:"0 8px 25px rgba(40, 167, 69, 0.15)",border:"2px solid #28a745"},qrCode:{border:"4px solid #ffffff",boxShadow:"0 5px 15px rgba(0, 0, 0, 0.1)",borderRadius:"8px",padding:"10px",maxWidth:"300px",width:"100%",margin:"25px auto"},error:{color:"#dc3545",backgroundColor:"#f8d7da",border:"1px solid #f5c6cb",padding:"12px",borderRadius:"8px",marginBottom:"20px",textAlign:"center"},statusSubtext:{color:"#6c757d",marginTop:"5px"},section:{marginBottom:"20px",padding:"20px",backgroundColor:"#f8f9fa",borderRadius:"8px",border:"1px solid #e0e0e0"},sectionTitle:{fontSize:"18px",fontWeight:"700",color:"#007bff",marginBottom:"15px",paddingBottom:"10px",borderBottom:"2px solid #007bff"},optionalBadge:{display:"inline-block",padding:"4px 12px",backgroundColor:"#28a745",color:"white",borderRadius:"20px",fontSize:"12px",fontWeight:"600",marginLeft:"10px"},helpText:{fontSize:"14px",color:"#6c757d",marginBottom:"15px",padding:"10px",backgroundColor:"#e7f3ff",borderRadius:"6px",borderLeft:"4px solid #17a2b8"},fieldWrapper:{display:"flex",flexDirection:"column",gap:"6px"},fieldError:{color:"#dc3545",fontSize:"14px",fontWeight:"600",marginTop:"-4px",display:"flex",alignItems:"center",gap:"5px"},fieldSuccess:{color:"#28a745",fontSize:"14px",fontWeight:"600",marginTop:"-4px"},modalOverlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.6)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:9999,padding:"20px"},modalContent:{backgroundColor:"#ffffff",borderRadius:"12px",padding:"30px",maxWidth:"600px",width:"100%",maxHeight:"90vh",overflowY:"auto",boxShadow:"0 20px 60px rgba(0, 0, 0, 0.3)",animation:"slideIn 0.3s ease-out"},modalHeader:{fontSize:"24px",fontWeight:"700",color:"#343a40",marginBottom:"20px",textAlign:"center",borderBottom:"2px solid #e0e0e0",paddingBottom:"15px"},infoSection:{backgroundColor:"#f8f9fa",padding:"20px",borderRadius:"8px",marginBottom:"20px"},infoRow:{display:"flex",justifyContent:"space-between",padding:"10px 0",borderBottom:"1px solid #e0e0e0"},infoLabel:{fontWeight:"600",color:"#6c757d",minWidth:"120px"},infoValue:{color:"#212529",textAlign:"right",flex:1,wordBreak:"break-word"},warningBox:{backgroundColor:"#fff3cd",border:"2px solid #ffc107",borderRadius:"8px",padding:"15px",marginBottom:"25px"},warningIcon:{fontSize:"24px",marginRight:"10px",verticalAlign:"middle"},warningText:{color:"#856404",fontSize:"15px",lineHeight:"1.5"},modalButtons:{display:"flex",gap:"15px",justifyContent:"center",marginTop:"25px"},confirmButton:{backgroundColor:"#28a745",color:"#ffffff",padding:"12px 30px",fontSize:"16px",fontWeight:"600",borderRadius:"8px",border:"none",cursor:"pointer",transition:"all 0.3s ease",boxShadow:"0 4px 10px rgba(40, 167, 69, 0.3)"},cancelButton:{backgroundColor:"#6c757d",color:"#ffffff",padding:"12px 30px",fontSize:"16px",fontWeight:"600",borderRadius:"8px",border:"none",cursor:"pointer",transition:"all 0.3s ease"}},Ct=(t,o)=>{const[l,u]=r.useState(t);return[l,()=>u({...t,...o}),()=>u(t)]},vs=({isOpen:t,formData:o,onConfirm:l,onCancel:u})=>{if(!t)return null;const d=[{label:"First Name",value:o.first_name,required:!0},{label:"Last Name",value:o.last_name,required:!0},{label:"Email",value:o.email||"Not provided"},{label:"Phone",value:o.phone||"Not provided"},{label:"Address",value:o.address||"Not provided"},{label:"Company",value:o.company_name||"Not provided"},{label:"Designation",value:o.designation||"Not provided"}],x=[];return o.age_range&&x.push({label:"Age Range",value:o.age_range}),o.gender&&x.push({label:"Gender",value:o.gender==="Others"&&o.gender_other?`Others: ${o.gender_other}`:o.gender}),o.industry_sector&&x.push({label:"Industry",value:o.industry_sector==="Others"&&o.industry_sector_other?`Others: ${o.industry_sector_other}`:o.industry_sector}),e.jsx("div",{style:I.modalOverlay,onClick:u,children:e.jsxs("div",{style:I.modalContent,onClick:a=>a.stopPropagation(),children:[e.jsx("h2",{style:I.modalHeader,children:"⚠️ Confirm Your Registration"}),e.jsxs("div",{style:I.infoSection,children:[e.jsx("h3",{style:{marginBottom:"15px",color:"#343a40"},children:"Please review your information:"}),d.map((a,m)=>e.jsxs("div",{style:{...I.infoRow,borderBottom:m===d.length-1&&x.length===0?"none":"1px solid #e0e0e0"},children:[e.jsxs("span",{style:I.infoLabel,children:[a.label,a.required&&e.jsx("span",{style:{color:"#dc3545"},children:" *"}),":"]}),e.jsx("span",{style:{...I.infoValue,fontWeight:a.required?"600":"normal",color:a.value==="Not provided"?"#6c757d":"#212529"},children:a.value})]},m)),x.length>0&&e.jsxs(e.Fragment,{children:[e.jsx("div",{style:{margin:"15px 0",paddingTop:"15px",borderTop:"2px solid #dee2e6"},children:e.jsx("h4",{style:{fontSize:"14px",color:"#6c757d",marginBottom:"10px"},children:"Additional Information:"})}),x.map((a,m)=>e.jsxs("div",{style:{...I.infoRow,borderBottom:m===x.length-1?"none":"1px solid #e0e0e0"},children:[e.jsxs("span",{style:I.infoLabel,children:[a.label,":"]}),e.jsx("span",{style:I.infoValue,children:a.value})]},m))]})]}),e.jsxs("div",{style:I.warningBox,children:[e.jsx("span",{style:I.warningIcon,children:"⚠️"}),e.jsxs("span",{style:I.warningText,children:[e.jsx("strong",{children:"Important Notice:"}),e.jsx("br",{}),"Once you submit this registration, you ",e.jsx("strong",{children:"CANNOT edit or modify"})," your information. This device will also be locked and prevented from submitting another registration. Please ensure all information is correct before proceeding."]})]}),e.jsx("div",{style:{textAlign:"center",marginBottom:"20px"},children:e.jsx("p",{style:{fontSize:"16px",color:"#343a40",fontWeight:"500"},children:"Are you sure you want to proceed with this registration?"})}),e.jsxs("div",{style:I.modalButtons,children:[e.jsx("button",{onClick:u,style:I.cancelButton,onMouseOver:a=>{a.target.style.backgroundColor="#5a6268",a.target.style.transform="translateY(-2px)"},onMouseOut:a=>{a.target.style.backgroundColor="#6c757d",a.target.style.transform="translateY(0)"},children:"← Go Back & Edit"}),e.jsx("button",{onClick:l,style:I.confirmButton,onMouseOver:a=>{a.target.style.backgroundColor="#218838",a.target.style.transform="translateY(-2px)",a.target.style.boxShadow="0 6px 15px rgba(40, 167, 69, 0.4)"},onMouseOut:a=>{a.target.style.backgroundColor="#28a745",a.target.style.transform="translateY(0)",a.target.style.boxShadow="0 4px 10px rgba(40, 167, 69, 0.3)"},children:"✓ Yes, Submit Registration"})]})]})})};function ws(){const[t,o]=r.useState(null),[l,u]=r.useState(!0),[d,x]=r.useState(!1),[a,m]=r.useState(null),[s,i]=r.useState(!1),[p,j]=r.useState(!1),[R,f]=r.useState(""),[b,C]=r.useState({first_name:"",last_name:"",email:"",phone:"",address:"",company_name:"",designation:"",age_range:"",gender:"",gender_other:"",industry_sector:"",industry_sector_other:"",reason_for_attending:"",reason_for_attending_other:"",specific_areas_of_interest:"",specific_areas_of_interest_other:"",how_did_you_learn_about:"",how_did_you_learn_about_other:"",registration_type:"online",payment_status:"unpaid"}),[_,z]=r.useState({gender:!1,industry:!1,reason:!1,interest:!1,learn:!1}),[D,$]=r.useState(!1),[v,P]=r.useState(""),[B,q]=r.useState(null),[O,V]=r.useState(!1),[ce,w]=r.useState(""),M=G.defaults.baseURL.replace("/api",""),A=r.useRef(!0),[E,Z,ge]=Ct(I.primaryButton,{backgroundColor:"#0056b3",transform:"translateY(-2px)",boxShadow:"0 6px 15px rgba(0, 123, 255, 0.45)"}),[xe,ee,k]=Ct({...I.button,backgroundColor:"#6c757d",color:"#ffffff"},{backgroundColor:"#5a6268",transform:"scale(1.03)"}),Ee=W=>new Promise(H=>setTimeout(H,W)),Ae=W=>new Promise((H,X)=>{const te=new Image;te.onload=()=>H(!0),te.onerror=X,te.src=W}),we=W=>{if(W.qr_code_path){const H=W.qr_code_path.replace(/\\/g,"/").replace(/^\/?public\/?/i,"").replace(/^\/?storage\/?/i,"");return`${M}/storage/${H}?v=${Date.now()}`}if(W.ticket_number){const H=`qrcodes/${W.ticket_number}.png`;return`${M}/storage/${H}?v=${Date.now()}`}return null},Ge=async W=>{try{const{data:H}=await G.get(`/registrations/${W}`);return H.registration||H}catch{return null}},ve=async(W,H)=>{const X=[800,1e3,1200,1400,1600,1800,2e3];for(let te=0;te<X.length;te++){if(!A.current)return!1;let Se=we(H);if(Se)try{return await Ae(Se),w(Se),!0}catch{}const fe=await Ge(W);if(fe){Se=we(fe);try{return await Ae(Se),q(fe),w(Se),!0}catch{}}await Ee(X[te])}return!1},pe=W=>{const H=W.response;return H?.status===422&&H.data?.errors?Object.values(H.data.errors).flat()[0]||"Validation failed.":H?.data?.message||H?.data?.error||"Registration failed. This email may already be registered."},ke=W=>W.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(W)?(f(""),!0):(f("❌ Invalid email format. Please enter a valid email address."),!1):(f(""),!0);r.useEffect(()=>{const W=localStorage.getItem("regData");if(W){const H=JSON.parse(W);x(!0),q(H),w(we(H))}},[]),r.useEffect(()=>{const W=H=>{H.ctrlKey&&H.altKey&&H.key==="r"&&(localStorage.removeItem("regData"),localStorage.removeItem("regLocked"),alert("🔓 Registration lock cleared. Refresh to try again."))};return window.addEventListener("keydown",W),()=>window.removeEventListener("keydown",W)},[]),r.useEffect(()=>{(async()=>{try{const H=await G.get("/server-mode/status");o(H.data.current_mode?.mode||null)}catch{P("Could not connect to the server.")}finally{u(!1)}})()},[]);const ae=W=>{const{name:H,value:X}=W.target;C({...b,[H]:X}),H==="email"&&ke(X),H==="gender"&&(z(te=>({...te,gender:X==="Others"})),X!=="Others"&&C(te=>({...te,gender_other:""}))),H==="industry_sector"&&(z(te=>({...te,industry:X==="Others"})),X!=="Others"&&C(te=>({...te,industry_sector_other:""}))),H==="reason_for_attending"&&(z(te=>({...te,reason:X==="Others"})),X!=="Others"&&C(te=>({...te,reason_for_attending_other:""}))),H==="specific_areas_of_interest"&&(z(te=>({...te,interest:X==="Others"})),X!=="Others"&&C(te=>({...te,specific_areas_of_interest_other:""}))),H==="how_did_you_learn_about"&&(z(te=>({...te,learn:X==="Others"})),X!=="Others"&&C(te=>({...te,how_did_you_learn_about_other:""})))},Ue=async W=>{if(W.preventDefault(),!d){if(!b.first_name.trim()||!b.last_name.trim()||!b.company_name.trim()){P("Please fill in all required fields (First Name, Last Name, and Company)."),window.scrollTo({top:0,behavior:"smooth"});return}if(b.email.trim()&&!ke(b.email)){P("❌ Please provide a valid email address or leave the field empty."),document.querySelector('input[name="email"]')?.scrollIntoView({behavior:"smooth",block:"center"});return}j(!0)}},qe=async()=>{j(!1),$(!0),P(""),q(null),V(!1),w("");try{const{data:W}=await G.post("/registrations",b),H=W.registration;V(!0),await Ee(800);let X=we(H);if(X)try{await Ae(X),w(X)}catch{await ve(H.ticket_number,H)}else await ve(H.ticket_number,H);localStorage.setItem("regLocked","true"),localStorage.setItem("regData",JSON.stringify(H)),x(!0),q(H)}catch(W){const H=W.response?.status,X=W.response?.data;H===409?P(`❌ ${X.error||"This person is already registered."}

Please verify the name or contact support.`):H===422&&X.errors?.email?(P(`❌ ${X.errors.email[0]}`),f(X.errors.email[0]),document.querySelector('input[name="email"]')?.scrollIntoView({behavior:"smooth",block:"center"})):P(pe(W)),window.scrollTo({top:0,behavior:"smooth"})}finally{V(!1),$(!1)}},Fe=()=>{j(!1)};if(r.useEffect(()=>{if(B){const W=setTimeout(()=>i(!1),5e7),H=setTimeout(()=>window.close(),5e7);return()=>{clearTimeout(W),clearTimeout(H)}}},[B]),l)return e.jsx("h2",{style:{padding:"20px",textAlign:"center",color:"#343a40"},children:"Loading..."});if(O)return e.jsxs("div",{style:{...I.container,textAlign:"center"},children:[e.jsx("h2",{style:{color:"#007bff"},children:"Preparing your QR code…"}),e.jsx("p",{style:{...I.statusSubtext},children:"Please wait while we generate your entry QR."})]});if(B){const W=async()=>{B?.ticket_number&&await ve(B.ticket_number,B)};return e.jsxs("div",{style:{...I.successContainer,opacity:s?0:1},children:[e.jsx("h2",{style:{color:"#28a745"},children:"✅ Registration Successful!"}),e.jsx("p",{style:{...I.statusSubtext},children:"Please save your QR Code for event check-in."}),ce?e.jsx("img",{src:ce,alt:"Your QR Code",onError:()=>setTimeout(W,800),style:I.qrCode}):e.jsxs("div",{style:{margin:"30px 0"},children:[e.jsx("p",{style:{marginBottom:12,color:"#e0a800",fontWeight:"600"},children:"Your QR is being generated. If it doesn't appear in a moment:"}),e.jsx("button",{onClick:W,style:{...I.button,...xe},onMouseEnter:ee,onMouseLeave:k,children:"🔄 Try Again / Refresh QR"})]}),e.jsxs("h3",{style:{marginTop:20,color:"#343a40"},children:[B.first_name," ",B.last_name]}),e.jsxs("p",{style:{color:"#007bff",fontWeight:"bold"},children:["Ticket ID: #",B.id]}),e.jsx("p",{style:{marginTop:16,color:"#777"},children:"This device is now restricted from submitting another registration."})]})}return t!=="online"&&t!=="both"?e.jsxs("div",{style:{...I.container,textAlign:"center"},children:[e.jsx("h2",{style:{color:"#dc3545"},children:"❌ Online registration is currently closed."}),e.jsx("p",{style:{...I.statusSubtext},children:"Please check back during the designated registration period."})]}):d&&!B?e.jsxs("div",{style:{...I.container,textAlign:"center"},children:[e.jsx("h2",{style:{color:"#ffc107"},children:"🔒 Access Restricted"}),e.jsx("p",{children:"This device has already completed registration. No duplicate entries allowed."}),e.jsxs("p",{style:{marginTop:15,fontSize:"14px",color:"#999"},children:["Press ",e.jsx("strong",{children:"Ctrl + Alt + R"})," to reset (admin only)."]})]}):e.jsxs("div",{style:I.container,children:[e.jsx("h1",{style:{color:"#343a40",borderBottom:"2px solid #007bff",paddingBottom:"10px",marginBottom:"20px"},children:"📝 Event Registration - ICEGEX 2025"}),v&&e.jsx("p",{style:I.error,children:v}),e.jsxs("form",{onSubmit:Ue,style:I.form,children:[e.jsxs("div",{style:I.section,children:[e.jsx("h3",{style:I.sectionTitle,children:"👤 Personal Information"}),e.jsx("input",{name:"first_name",value:b.first_name,onChange:ae,placeholder:"First Name *",required:!0,style:I.input}),e.jsx("input",{name:"last_name",value:b.last_name,onChange:ae,placeholder:"Last Name *",required:!0,style:I.input}),e.jsxs("div",{style:I.fieldWrapper,children:[e.jsx("input",{name:"email",value:b.email,onChange:ae,placeholder:"Email Address (Optional)",type:"email",style:{...I.input,...R?{borderColor:"#dc3545",borderWidth:"2px"}:{}}}),R&&e.jsx("span",{style:I.fieldError,children:R}),!R&&b.email.trim()&&e.jsx("span",{style:I.fieldSuccess,children:"✓ Valid email format"})]}),e.jsx("input",{name:"phone",value:b.phone,onChange:ae,placeholder:"Phone Number (Optional)",style:I.input}),e.jsx("input",{name:"address",value:b.address,onChange:ae,placeholder:"Address (Optional)",style:I.input}),e.jsx("input",{name:"company_name",value:b.company_name,onChange:ae,placeholder:"Company/Organization *",required:!0,style:I.input}),e.jsx("input",{name:"designation",value:b.designation,onChange:ae,placeholder:"Designation/Job Title (Optional)",style:I.input})]}),e.jsxs("div",{style:I.section,children:[e.jsxs("h3",{style:I.sectionTitle,children:["📊 Demographics",e.jsx("span",{style:I.optionalBadge,children:"Optional"})]}),e.jsx("p",{style:I.helpText,children:"This information helps us understand our attendees better and improve future events."}),e.jsxs("select",{name:"age_range",value:b.age_range,onChange:ae,style:I.select,children:[e.jsx("option",{value:"",children:"-- Select Age Range --"}),e.jsx("option",{value:"18-24",children:"18-24"}),e.jsx("option",{value:"25-34",children:"25-34"}),e.jsx("option",{value:"35-44",children:"35-44"}),e.jsx("option",{value:"45-54",children:"45-54"}),e.jsx("option",{value:"55-64",children:"55-64"}),e.jsx("option",{value:"65+",children:"65+"})]}),e.jsxs("select",{name:"gender",value:b.gender,onChange:ae,style:I.select,children:[e.jsx("option",{value:"",children:"-- Select Gender --"}),e.jsx("option",{value:"Male",children:"Male"}),e.jsx("option",{value:"Female",children:"Female"}),e.jsx("option",{value:"Prefer not to say",children:"Prefer not to say"}),e.jsx("option",{value:"Others",children:"Others"})]}),_.gender&&e.jsx("input",{name:"gender_other",placeholder:"Please specify your gender",value:b.gender_other,onChange:ae,style:I.input})]}),e.jsxs("div",{style:I.section,children:[e.jsxs("h3",{style:I.sectionTitle,children:["📝 Event Survey",e.jsx("span",{style:I.optionalBadge,children:"Optional"})]}),e.jsx("p",{style:I.helpText,children:"Help us serve you better! Your responses will help us tailor the event to your interests."}),e.jsxs("select",{name:"industry_sector",value:b.industry_sector,onChange:ae,style:I.select,children:[e.jsx("option",{value:"",children:"-- Select Industry Sector --"}),e.jsx("option",{value:"Ice Cream / Gelato / Frozen Dessert Brand",children:"Ice Cream / Gelato / Frozen Dessert Brand"}),e.jsx("option",{value:"Café / Bakery / Beverage or Dessert Shop",children:"Café / Bakery / Beverage or Dessert Shop"}),e.jsx("option",{value:"Restaurant / Catering / Food Chain",children:"Restaurant / Catering / Food Chain"}),e.jsx("option",{value:"Hotel / Resort / Hospitality",children:"Hotel / Resort / Hospitality"}),e.jsx("option",{value:"Food or Dairy Manufacturer / Supplier",children:"Food or Dairy Manufacturer / Supplier"}),e.jsx("option",{value:"Equipment / Packaging / Technology Provider",children:"Equipment / Packaging / Technology Provider"}),e.jsx("option",{value:"Marketing / Events / Creative Services",children:"Marketing / Events / Creative Services"}),e.jsx("option",{value:"Entrepreneur",children:"Entrepreneur"}),e.jsx("option",{value:"Student",children:"Student"}),e.jsx("option",{value:"General Visitor",children:"General Visitor"}),e.jsx("option",{value:"Others",children:"Others"})]}),_.industry&&e.jsx("input",{name:"industry_sector_other",placeholder:"Please specify your industry",value:b.industry_sector_other,onChange:ae,style:I.input}),e.jsxs("select",{name:"reason_for_attending",value:b.reason_for_attending,onChange:ae,style:I.select,children:[e.jsx("option",{value:"",children:"-- Reason for Attending --"}),e.jsx("option",{value:"Discover new ice cream, gelato, or soft serve products",children:"Discover new ice cream, gelato, or soft serve products"}),e.jsx("option",{value:"Source ingredients, equipment, or packaging",children:"Source ingredients, equipment, or packaging"}),e.jsx("option",{value:"Learn from demos, talks, or competitions",children:"Learn from demos, talks, or competitions"}),e.jsx("option",{value:"Explore franchise or business opportunities",children:"Explore franchise or business opportunities"}),e.jsx("option",{value:"Meet potential partners or suppliers",children:"Meet potential partners or suppliers"}),e.jsx("option",{value:"Scout the event for future participation",children:"Scout the event for future participation"}),e.jsx("option",{value:"Others",children:"Others"})]}),_.reason&&e.jsx("textarea",{name:"reason_for_attending_other",placeholder:"Please specify your reason for attending",value:b.reason_for_attending_other,onChange:ae,style:I.textarea}),e.jsxs("select",{name:"specific_areas_of_interest",value:b.specific_areas_of_interest,onChange:ae,style:I.select,children:[e.jsx("option",{value:"",children:"-- Areas of Interest --"}),e.jsx("option",{value:"Ingredients / Flavor Innovations",children:"Ingredients / Flavor Innovations"}),e.jsx("option",{value:"Machinery & Equipment",children:"Machinery & Equipment"}),e.jsx("option",{value:"Packaging & Cold Chain",children:"Packaging & Cold Chain"}),e.jsx("option",{value:"Toll Manufacturing",children:"Toll Manufacturing"}),e.jsx("option",{value:"Retail Concepts & Franchises",children:"Retail Concepts & Franchises"}),e.jsx("option",{value:"Gelato Techniques & Training",children:"Gelato Techniques & Training"}),e.jsx("option",{value:"Dairy-based Products",children:"Dairy-based Products"}),e.jsx("option",{value:"Non-Dairy / Vegan options",children:"Non-Dairy / Vegan options"}),e.jsx("option",{value:"Others",children:"Others"})]}),_.interest&&e.jsx("textarea",{name:"specific_areas_of_interest_other",placeholder:"Please specify your areas of interest",value:b.specific_areas_of_interest_other,onChange:ae,style:I.textarea}),e.jsxs("select",{name:"how_did_you_learn_about",value:b.how_did_you_learn_about,onChange:ae,style:I.select,children:[e.jsx("option",{value:"",children:"-- How did you learn about us? --"}),e.jsx("option",{value:"Ads on Facebook / Instagram",children:"Ads on Facebook / Instagram"}),e.jsx("option",{value:"ICEGEX Official Page/Website / Social Media",children:"ICEGEX Official Page/Website / Social Media"}),e.jsx("option",{value:"Email Invitation or Newsletter",children:"Email Invitation or Newsletter"}),e.jsx("option",{value:"Word of Mouth (Family / Friends / Colleagues)",children:"Word of Mouth (Family / Friends / Colleagues)"}),e.jsx("option",{value:"Exhibitor / Brand Partner Invitation",children:"Exhibitor / Brand Partner Invitation"}),e.jsx("option",{value:"Media Feature or Influencer Affiliates",children:"Media Feature or Influencer Affiliates"}),e.jsx("option",{value:"Industry Association / Government Agency",children:"Industry Association / Government Agency"}),e.jsx("option",{value:"Event Listing Sites",children:"Event Listing Sites"}),e.jsx("option",{value:"Posters / Billboards / Flyers",children:"Posters / Billboards / Flyers"}),e.jsx("option",{value:"Others",children:"Others"})]}),_.learn&&e.jsx("textarea",{name:"how_did_you_learn_about_other",placeholder:"Please specify how you learned about us",value:b.how_did_you_learn_about_other,onChange:ae,style:I.textarea})]}),e.jsx("button",{type:"submit",disabled:D||!!R,style:D||R?{...I.button,...I.disabledButton}:{...I.button,...E},onMouseEnter:!D&&!R?Z:null,onMouseLeave:!D&&!R?ge:null,children:D?"Processing...":"Register Now"}),R&&e.jsx("p",{style:{textAlign:"center",color:"#dc3545",fontSize:"0.9rem",marginTop:"10px"},children:"⚠️ Please fix the email error above before submitting"})]}),e.jsx(vs,{isOpen:p,formData:b,onConfirm:qe,onCancel:Fe})]})}function _s({role:t,allPermissions:o,onSave:l,onCancel:u}){const[d,x]=r.useState([]);r.useEffect(()=>{t&&x(t.permissions||[])},[t]);const a=s=>{x(i=>i.includes(s)?i.filter(p=>p!==s):[...i,s])},m=()=>{l(t.id,d)};return t?e.jsxs(ht,{isOpen:!0,onClose:u,title:`Edit Permissions for: ${t.name}`,children:[e.jsx("div",{style:{maxHeight:"400px",overflowY:"auto"},children:o.map(s=>e.jsx("div",{children:e.jsxs("label",{children:[e.jsx("input",{type:"checkbox",checked:d.includes(s),onChange:()=>a(s)}),s]})},s))}),e.jsxs("div",{style:{marginTop:"20px",textAlign:"right"},children:[e.jsx("button",{type:"button",onClick:u,style:{marginRight:"10px"},children:"Cancel"}),e.jsx("button",{type:"button",onClick:m,style:{fontWeight:"bold"},children:"Save Permissions"})]})]}):null}function Ss(){const[t,o]=r.useState([]),[l,u]=r.useState([]),[d,x]=r.useState(!0),[a,m]=r.useState(null),[s,i]=r.useState(!1),[p,j]=r.useState(null),R=async()=>{x(!0);try{const[C,_]=await Promise.all([G.get("/roles"),G.get("/permissions")]);o(C.data),u(_.data),m(null)}catch{m("Failed to fetch data.")}finally{x(!1)}};r.useEffect(()=>{R()},[]);const f=C=>{j(C),i(!0)},b=async(C,_)=>{try{await G.put(`/roles/${C}`,{permissions:_}),i(!1),R()}catch{alert("Failed to save permissions.")}};return d?e.jsx("p",{style:{textAlign:"center",fontSize:"1.2rem",color:"#555"},children:"Loading roles and permissions..."}):a?e.jsx("p",{style:{color:"red",textAlign:"center",fontSize:"1.2rem"},children:a}):e.jsxs("div",{style:{padding:"20px",maxWidth:"1200px",margin:"0 auto",fontFamily:"Arial, sans-serif"},children:[e.jsx("h2",{style:{fontSize:"1.8rem",marginBottom:"20px",color:"#333"},children:"🔑 Role & Permission Management"}),e.jsx("div",{style:{overflowX:"auto",borderRadius:"8px",boxShadow:"0 2px 10px rgba(0,0,0,0.1)"},children:e.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",minWidth:"600px"},children:[e.jsx("thead",{children:e.jsxs("tr",{style:{backgroundColor:"#f8f9fa",color:"#333"},children:[e.jsx("th",{style:{padding:"12px",textAlign:"left",borderBottom:"1px solid #ddd"},children:"Role Name"}),e.jsx("th",{style:{padding:"12px",textAlign:"left",borderBottom:"1px solid #ddd"},children:"Description"}),e.jsx("th",{style:{padding:"12px",textAlign:"center",borderBottom:"1px solid #ddd"},children:"Actions"})]})}),e.jsx("tbody",{children:t.map((C,_)=>e.jsxs("tr",{style:{backgroundColor:_%2===0?"#ffffff":"#f8f9fa",transition:"background-color 0.3s"},onMouseOver:z=>z.currentTarget.style.backgroundColor="#e2e6ea",onMouseOut:z=>z.currentTarget.style.backgroundColor=_%2===0?"#ffffff":"#f8f9fa",children:[e.jsx("td",{style:{padding:"12px",borderBottom:"1px solid #ddd",textTransform:"capitalize"},children:C.name}),e.jsx("td",{style:{padding:"12px",borderBottom:"1px solid #ddd"},children:C.description}),e.jsx("td",{style:{padding:"12px",textAlign:"center",borderBottom:"1px solid #ddd"},children:e.jsx("button",{onClick:()=>f(C),style:{padding:"8px 12px",backgroundColor:"#ffc107",color:"#212529",border:"none",borderRadius:"4px",cursor:"pointer",transition:"background-color 0.3s"},onMouseOver:z=>z.target.style.backgroundColor="#e0a800",onMouseOut:z=>z.target.style.backgroundColor="#ffc107",children:"Edit Permissions"})})]},C.id))})]})}),s&&e.jsx(_s,{role:p,allPermissions:l,onSave:b,onCancel:()=>i(!1)})]})}function Cs(){const{user:t}=He(),o=Nt(),[l,u]=r.useState(""),d=G.defaults.baseURL.replace("/api","");r.useEffect(()=>{(async()=>{try{const i=await G.get("/settings");i.data?.registration_logo_path&&u(i.data.registration_logo_path)}catch(i){console.error("Failed to fetch logo for sidebar:",i)}})()},[]);const x=s=>{if(!s)return"";if(/^https?:\/\//i.test(s))return s;const i=String(s).replace(/\\/g,"/").replace(/^\/?storage\/?/i,"");return`${d}/storage/${i}`},a=s=>s==="/dashboard"?o.pathname==="/dashboard":o.pathname.startsWith(s),m=({to:s,icon:i,children:p,permission:j})=>{if(j&&!t.role?.permissions?.includes(j))return null;const R=a(s);return e.jsxs(Lt,{to:s,className:"text-decoration-none d-block mb-2",style:{padding:"12px 20px",borderRadius:"8px",fontWeight:R?"600":"500",color:R?"#fff":"#2c3e50",background:R?"linear-gradient(135deg, #667eea 0%, #764ba2 100%)":"transparent",transition:"all 0.3s ease",borderLeft:R?"4px solid #fff":"4px solid transparent"},onMouseEnter:f=>{R||(f.target.style.background="rgba(102, 126, 234, 0.1)",f.target.style.paddingLeft="24px")},onMouseLeave:f=>{R||(f.target.style.background="transparent",f.target.style.paddingLeft="20px")},children:[e.jsx("span",{className:"me-3",style:{fontSize:"1.2rem"},children:i}),p]})};return e.jsxs("div",{className:"bg-white shadow-sm h-100",style:{display:"flex",flexDirection:"column",position:"sticky",top:"0",padding:"20px",borderRight:"1px solid #dee2e6",minHeight:"100vh"},children:[e.jsxs("div",{children:[e.jsx("h5",{className:"fw-bold mb-4 text-muted",children:"DASHBOARD MENU"}),e.jsx(m,{to:"/dashboard",icon:"📊",children:"Summary"}),e.jsx(m,{to:"/dashboard/registrations",icon:"📋",permission:"view-registrations",children:"Registrations"}),e.jsx(m,{to:"/dashboard/register-new",icon:"➕",permission:"create-registration",children:"New Registration"}),e.jsx(m,{to:"/dashboard/scanner",icon:"📷",permission:"scan-registration",children:"QR Scanner"}),e.jsx(m,{to:"/dashboard/reports",icon:"📈",permission:"view-reports",children:"Reports"}),e.jsx("hr",{className:"my-4"}),e.jsx("h6",{className:"fw-bold mb-3 text-muted small",children:"SETTINGS"}),e.jsx(m,{to:"/dashboard/settings",icon:"⚙️",permission:"edit-settings",children:"Badge Settings"}),e.jsx(m,{to:"/dashboard/server-mode",icon:"🖥️",permission:"edit-server-mode",children:"Server Mode"}),e.jsx("hr",{className:"my-4"}),e.jsx("h6",{className:"fw-bold mb-3 text-muted small",children:"ADMINISTRATION"}),e.jsx(m,{to:"/dashboard/user-management",icon:"👥",permission:"view-users",children:"User Management"}),e.jsx(m,{to:"/dashboard/role-management",icon:"🔐",permission:"manage-roles",children:"Role Management"})]}),e.jsxs("div",{style:{marginTop:"auto",paddingTop:"1rem",borderTop:"1px solid #dee2e6",display:"flex",alignItems:"center",justifyContent:"center",gap:"0.75rem"},children:[l&&e.jsx("img",{src:x(l),alt:"Company Logo",style:{height:"30px",width:"auto",maxWidth:"40px",objectFit:"contain"}}),e.jsxs("div",{style:{textAlign:"left"},children:[e.jsx("span",{style:{display:"block",fontSize:"0.75rem",color:"#6c757d",lineHeight:1.2},children:"⏻ Powered By"}),e.jsx("a",{href:"https://heritagemultioffice.com/",target:"_blank",rel:"noopener noreferrer",style:{color:"#343a40",fontWeight:"600",fontSize:"0.8rem",textDecoration:"none",lineHeight:1.2},children:"Heritage Multi Office Product Inc."})]})]})]})}function Ns(){return e.jsx(ye,{fluid:!0,children:e.jsxs(re,{children:[e.jsx(S,{xs:12,lg:3,xl:2,className:"px-0",children:e.jsx(Cs,{})}),e.jsx(S,{xs:12,lg:9,xl:10,children:e.jsx("main",{className:"p-4",children:e.jsx(Mt,{})})})]})})}function ks(){const[t,o]=r.useState(""),[l,u]=r.useState(""),[d,x]=r.useState(""),[a,m]=r.useState(!1),[s,i]=r.useState([]),[p,j]=r.useState({total:0,success:0,failed:0}),[R,f]=r.useState(null),b=r.useRef(null);r.useEffect(()=>{const v=()=>b.current?.focus();v();const P=setInterval(v,1e3);return()=>clearInterval(P)},[]);const C=v=>{new Audio(v?"data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBjeH0O/VgjMGHm7A7+OZUQ4PVazk7KxdGAo/lc/wxnckBSl+zPDalgwKImzB8N6XUwoUZLjn7bBdGAlCnN/2vWgcBix6yO/UgzAFHGvA7uGYUQwPU6vl7ataGwo9k87wvWoeByp4yO7VgS8FHGm/7eGXTwwPT6vk7KlYGgk7kc3wvGccByVzx+7VgC0EHGe+7N+WTRMPT6rj6q1cGwk4j8zwvGYcByJvxe7VfywEG2W96t2VTBENUarg66teFQk2jsvwvGUdBx9sxO/VfioEHmS86tySShENUKrh66pfFwk0jcrxvGQeCB9pxe7VfykFHGK76duRSREOT6nf7K1gGAg0isrxu2QeCB1nw+/WgCsFG2C66NqQRxEPTqjd7K5iFAkzicryu2MfCB1lwO/WgC4FHGC56dqPRQ8PTagb66JiFAo0iMryu2IfCR1kwO/VfywFG165y9uORBAPUKfd7K5iGAo0iMryv2MfCRxjv+/VfywFG125ydqOQxAOU6bc7K1iGAoziMryu2IfCRxjv+/VfywFG165ydqOQxAPUqXb7K1gGAozicryu2MfCRtiv+7VfiwEG165ydqNQhAPUqXb7K5hGAkzicryu2MfCRxiv+7WfiwFG165yNuNQRAOUqXb7K5hGAkzicrxu2MfCRxiv+7VfiwFG165yNuNQRAOUaXa7K5hFwkziMrxu2IfCRxhv+7VfiwFGl65yNuNQRANU6TZ7K5iFwkyh8nxu2IgCRxgvu3VfSsFGl24yNuMQQ8MUqPY7K1jGQkxhsjxvGIfCRtfve3VfSwEGly3x9uMQQ8MUaPX7K1jGgkxhcfxvGIgCRtfvO3VfCsFGlu2x9uLQA8MUKLW66xiGgkxhcfxvGIgCRpevO3UfCoDGVu1xtuKPw4LT6HU66tiGwkwhMbxvGEgCRlduu3UeykDGFqzxduKPg4LTp/T6qpkHAgwg8XxvGEgCRlbue3UeykDGFmyxNuJPQ0KTZ7R6qllHQgvgsXxvWIhCRlbue3UeikDGFiyxNuJPQ0KTZ7R6qllHQgugsXxvWIhCRhZue3UeikDGFeyxNuJPA0JTJ3P6aplHgcug8TxvWIiCRdYuO3UeSkDGFayxNuIPA0JTJ3P6aplHgcug8TxvWIiCRdYt+zTeSkDGFWxxduHOw0JSpvN6KplHgcuhMPxvWIiCRdXt+zTeScDGFWxxNqHOgsJS5rM56lkHgYtg8Lxv2IiCRZWtuzTeScDGFSxw9uHOgsJSprL56lkHgYthMLxvmIiCRZVtuzTeScEGFOvw9qGOQsJSZnJ5qhkHgUsg8HxvmIjCRVTtezSeScEGFOvw9qGOQsIR5jH5ahkHgUsg8HxvmIjCRVTtO3SeScEGFKuw9qGOAsHRpfF46djHgQrhMDxv2IjCRRSs+3SeScEF1Gtw9qGNwoHRpbE4qZjHgQrhMDxv2MkCRRRsuzSdycEF1Gsw9qGNwoHRZbE4qZiHgMqg7/xwGIkCRNQsuzSdicEF0+rwtmFNgkGQ5TD4aZiHgMqg7/xwGMkChJPsevRdScFF0+qwtmFNggGQ5PB4KRhHgMpgr7xwGMlChFPsevRdScFF0+qwtmENggGQ5PA4KRhHQIogr7xwWMlChFOsOvRdCcEFk6ow9iFNQcFQpK+36NhHQIogr7xwWMlChFOsOvRdCcEFk6ow9iFNQcFQpK+36NhHQIogrzyv2IkChFNsOvRdCcEFk6ow9iFNQcFQpK+36JgHQIogrzyv2IkChFNsOvRdCYEFk2nwtiENQcFQZK+36JgHQIogrzyv2IkChFNr+rQdCYEFk2nwtiENQcFQZK936JgHQIogrzyv2IkChFNr+rQdCYEFk2nwtiENQcFQZK936JgHQIogrzyv2IkChFNr+rQdCYEFk2nwtiENQcFQZK936JgHQIogrzyv2IkChFNr+rQdCYEFk2nwtiENQcFQZK936JgHQIo":"data:audio/wav;base64,UklGRhwAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YfgAAACAgICAgICAgICAgICAgICAgIA=").play().catch(()=>{})},_=v=>{if(!v)return null;const B=String(v).trim().toUpperCase().match(/TICKET-[A-Z0-9]+/);return B?B[0]:null},z=async v=>{x(""),u(""),m(!0);const P=window.open("","_blank");try{await G.post(`/registrations/${v}/scan`);const B=`/print-badge/${v}`;P?(P.location=B,P.focus()):window.open(B,"_blank"),u(`✅ Success! Badge printing for ${v}`),f({ticket:v,status:"success",time:new Date}),C(!0),j(q=>({...q,total:q.total+1,success:q.success+1})),i(q=>[{ticket:v,status:"success",time:new Date},...q.slice(0,9)]),setTimeout(()=>{o(""),u(""),b.current?.focus()},2e3)}catch(B){if(P)try{P.close()}catch{}const q=B.response?.status,O=q===404?"❌ Ticket not found in system":q===403?"❌ Scan not allowed (check server mode or permissions)":q===409?"⚠️ Reprint limit reached for this badge":B.response?.data?.error||B.response?.data?.message||"❌ Scan/print failed";x(O),f({ticket:v,status:"error",time:new Date,message:O}),C(!1),j(V=>({...V,total:V.total+1,failed:V.failed+1})),i(V=>[{ticket:v,status:"error",time:new Date,message:O},...V.slice(0,9)])}finally{m(!1)}},D=v=>{v.preventDefault();const P=_(t);if(!P){x("❌ Invalid scan. Could not find a ticket number."),C(!1);return}z(P)},$=v=>{if(v.key==="Enter"){v.preventDefault();const P=_(t);if(!P){x("❌ Invalid scan. Could not find a ticket number."),C(!1);return}z(P)}};return e.jsxs(ye,{fluid:!0,className:"py-4 px-3 px-md-4",style:{backgroundColor:"#f8f9fa",minHeight:"100vh"},children:[e.jsx(re,{className:"mb-4",children:e.jsxs(S,{children:[e.jsx("h2",{className:"fw-bold mb-2",style:{color:"#2c3e50"},children:"📷 QR Code Scanner & Badge Printer"}),e.jsx("p",{className:"text-muted mb-0",children:"Scan attendee QR codes to verify registration and print badges"})]})}),e.jsxs(re,{className:"g-4",children:[e.jsxs(S,{xs:12,lg:8,children:[l&&e.jsx(ue,{variant:"success",className:"mb-3 shadow-sm",dismissible:!0,onClose:()=>u(""),children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{style:{fontSize:"24px",marginRight:"15px"},children:"✅"}),e.jsx("div",{children:e.jsx("strong",{children:l})})]})}),d&&e.jsx(ue,{variant:"danger",className:"mb-3 shadow-sm",dismissible:!0,onClose:()=>x(""),children:e.jsxs("div",{className:"d-flex align-items-center",children:[e.jsx("div",{style:{fontSize:"24px",marginRight:"15px"},children:"❌"}),e.jsx("div",{children:e.jsx("strong",{children:d})})]})}),e.jsxs(g,{className:"shadow-sm border-0 mb-4",children:[e.jsx(g.Header,{className:"text-white border-0",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:e.jsx("h5",{className:"mb-0 fw-semibold",children:"🎯 Scan Area"})}),e.jsxs(g.Body,{className:"p-5",style:{backgroundColor:a?"#e3f2fd":"#fff"},children:[e.jsxs(T,{onSubmit:D,children:[e.jsxs(T.Group,{children:[e.jsxs("div",{className:"text-center mb-3",children:[e.jsx("div",{style:{fontSize:"64px",marginBottom:"15px"},children:a?"⏳":"📷"}),e.jsx("p",{className:"text-muted mb-3",children:a?"Processing scan...":"Focus the field below and scan the QR code"})]}),e.jsx(T.Control,{ref:b,type:"text",value:t,onChange:v=>o(v.target.value),onKeyDown:$,placeholder:"Click here and scan QR code...",disabled:a,autoFocus:!0,size:"lg",style:{fontSize:"20px",textAlign:"center",padding:"20px",border:a?"3px solid #2196F3":"3px dashed #ccc",backgroundColor:a?"#e3f2fd":"#fff"}})]}),e.jsx("div",{className:"d-grid mt-3",children:e.jsx(de,{type:"submit",variant:"primary",size:"lg",disabled:a||!t.trim(),children:a?e.jsxs(e.Fragment,{children:[e.jsx(je,{animation:"border",size:"sm",className:"me-2"}),"Processing..."]}):e.jsx(e.Fragment,{children:"🖨️ Print Badge"})})})]}),R&&e.jsx("div",{className:"mt-4 pt-3 border-top",children:e.jsxs(re,{children:[e.jsxs(S,{xs:6,children:[e.jsx("small",{className:"text-muted d-block",children:"Last Scanned"}),e.jsx("strong",{children:R.ticket})]}),e.jsxs(S,{xs:6,className:"text-end",children:[e.jsx("small",{className:"text-muted d-block",children:"Status"}),e.jsx(J,{bg:R.status==="success"?"success":"danger",children:R.status==="success"?"✅ Success":"❌ Failed"})]})]})})]}),e.jsx(g.Footer,{className:"bg-light border-top-0",children:e.jsxs("small",{className:"text-muted",children:["💡 ",e.jsx("strong",{children:"Tip:"}),' Enable "Enter/Newline suffix" in your scanner settings for auto-submit']})})]}),e.jsxs(g,{className:"shadow-sm border-0",children:[e.jsx(g.Header,{className:"bg-white border-bottom",children:e.jsx("h5",{className:"mb-0 fw-semibold text-primary",children:"📜 Recent Scans"})}),e.jsx(g.Body,{className:"p-0",children:s.length>0?e.jsx(be,{variant:"flush",children:s.map((v,P)=>e.jsxs(be.Item,{className:"d-flex justify-content-between align-items-center",children:[e.jsxs("div",{children:[e.jsx("strong",{children:v.ticket}),e.jsx("br",{}),e.jsx("small",{className:"text-muted",children:v.time.toLocaleTimeString()})]}),e.jsx("div",{children:e.jsx(J,{bg:v.status==="success"?"success":"danger",children:v.status==="success"?"✅ Success":"❌ Failed"})})]},P))}):e.jsx("div",{className:"text-center p-5 text-muted",children:e.jsx("p",{className:"mb-0",children:"No scans yet. Start scanning QR codes!"})})})]})]}),e.jsx(S,{xs:12,lg:4,children:e.jsxs("div",{style:{position:"sticky",top:"20px"},children:[e.jsxs(g,{className:"shadow-sm border-0 mb-3",children:[e.jsx(g.Header,{className:"bg-white border-bottom",children:e.jsx("h5",{className:"mb-0 fw-semibold text-primary",children:"📊 Session Statistics"})}),e.jsx(g.Body,{children:e.jsxs(re,{className:"g-3",children:[e.jsx(S,{xs:12,children:e.jsxs("div",{className:"text-center p-3 rounded",style:{backgroundColor:"#e3f2fd"},children:[e.jsx("h1",{className:"mb-0 fw-bold text-primary",children:p.total}),e.jsx("small",{className:"text-muted",children:"Total Scans"})]})}),e.jsx(S,{xs:6,children:e.jsxs("div",{className:"text-center p-3 rounded",style:{backgroundColor:"#e8f5e9"},children:[e.jsx("h2",{className:"mb-0 fw-bold text-success",children:p.success}),e.jsx("small",{className:"text-muted",children:"Successful"})]})}),e.jsx(S,{xs:6,children:e.jsxs("div",{className:"text-center p-3 rounded",style:{backgroundColor:"#ffebee"},children:[e.jsx("h2",{className:"mb-0 fw-bold text-danger",children:p.failed}),e.jsx("small",{className:"text-muted",children:"Failed"})]})})]})})]}),e.jsxs(g,{className:"shadow-sm border-0 mb-3",children:[e.jsx(g.Header,{className:"bg-white border-bottom",children:e.jsx("h5",{className:"mb-0 fw-semibold text-primary",children:"📖 How to Use"})}),e.jsx(g.Body,{children:e.jsxs("ol",{className:"ps-3 mb-0",children:[e.jsx("li",{className:"mb-2",children:"Click the scan field to focus it"}),e.jsx("li",{className:"mb-2",children:"Scan the attendee's QR code"}),e.jsx("li",{className:"mb-2",children:"Badge will auto-print in new window"}),e.jsx("li",{className:"mb-0",children:"Repeat for next attendee"})]})})]}),e.jsxs(g,{className:"shadow-sm border-0",children:[e.jsx(g.Header,{className:"bg-white border-bottom",children:e.jsx("h5",{className:"mb-0 fw-semibold text-primary",children:"ℹ️ Error Codes"})}),e.jsx(g.Body,{children:e.jsxs(be,{variant:"flush",children:[e.jsxs(be.Item,{className:"px-0 py-2",children:[e.jsx(J,{bg:"danger",className:"me-2",children:"404"}),e.jsx("small",{children:"Ticket not found"})]}),e.jsxs(be.Item,{className:"px-0 py-2",children:[e.jsx(J,{bg:"warning",text:"dark",className:"me-2",children:"403"}),e.jsx("small",{children:"Scan not allowed"})]}),e.jsxs(be.Item,{className:"px-0 py-2",children:[e.jsx(J,{bg:"warning",text:"dark",className:"me-2",children:"409"}),e.jsx("small",{children:"Reprint limit reached"})]})]})})]})]})})]})]})}function Rs({settings:t,registration:o,showQr:l=!1}){const u=G.defaults.baseURL.replace("/api",""),d=p=>{if(!p)return"";if(/^https?:\/\//i.test(p))return p;const j=String(p).replace(/\\/g,"/").replace(/^\/?storage\/?/i,"");return`${u}/storage/${j}`},x=d(t.main_logo_path),a=d(t.organizer_logo_path),m=d(t.manager_logo_path),s=d(t.registration_logo_path),i=o?.qr_code_path?d(o.qr_code_path):"https://api.qrserver.com/v1/create-qr-code/?data=sample&size=80x80";return e.jsxs("div",{style:{width:"7.5cm",height:"7.5cm",paddingTop:"5px",paddingRight:"5px",paddingBottom:"120px",paddingLeft:"40px",boxSizing:"border-box",background:"#fff",color:"#111",display:"flex",flexDirection:"column",justifyContent:"space-between",fontFamily:"Instrument Sans, sans-serif",border:"1px solid #ccc",position:"relative",overflow:"visible"},children:[e.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"4px",marginBottom:"3px"},children:[x&&e.jsx("img",{src:x,alt:"Main Logo",style:{maxWidth:"52px",maxHeight:"52px"}}),e.jsxs("div",{style:{textAlign:"left",fontSize:"9px",lineHeight:"1.2"},children:[e.jsx("div",{children:t.event_location||"Event Location"}),e.jsx("div",{children:t.event_datetime||"Event Date & Time"})]})]}),e.jsxs("div",{style:{textAlign:"center",flexGrow:1,display:"flex",flexDirection:"column",justifyContent:"flex-start"},children:[e.jsxs("div",{style:{fontSize:"16px",fontWeight:700,marginBottom:"1px"},children:[o.first_name||o.firstName," ",o.last_name||o.lastName]}),e.jsx("div",{style:{fontSize:"11px",borderBottom:"1px solid #000",paddingBottom:"2px",marginBottom:"2px",textAlign:"center"},children:o.company_name||o.companyName||"N/A"}),e.jsx("div",{style:{fontSize:"12px",fontWeight:"700",marginBottom:"3px"},children:t.event_name||"EVENT NAME"}),l&&e.jsx("img",{src:i,alt:"QR Code",style:{width:"60px",height:"60px",margin:"auto"}})]}),e.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-end",fontSize:"7px",paddingTop:"2px"},children:[e.jsxs("div",{children:[e.jsx("strong",{children:"Organized By:"}),e.jsx("br",{}),a&&e.jsx("img",{src:a,alt:"Organizer",style:{maxHeight:"20px"}})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Event Manager:"}),e.jsx("br",{}),m&&e.jsx("img",{src:m,alt:"Manager",style:{maxHeight:"30px"}})]}),e.jsxs("div",{children:[e.jsx("strong",{children:"Registration:"}),e.jsx("br",{}),s&&e.jsx("img",{src:s,alt:"Registration",style:{maxHeight:"30px"}})]})]})]})}function Bs(t){const o=r.useRef();return r.useEffect(()=>{o.current=t}),o.current}function Ps(){const{ticket:t}=Dt(),[o,l]=r.useState(null),[u,d]=r.useState(null),[x,a]=r.useState(!0),[m,s]=r.useState(null),[i,p]=r.useState(!1),j=Bs(i),R=r.useRef(!1);return r.useEffect(()=>{const f=document.createElement("style");return f.innerHTML=`
      @media print {
        @page { size: 6.5cm 5.5cm landscape; margin: 0; }
        html, body { margin: 0; padding: 0; width: 6.5cm; height: 5.5cm; overflow: visible !important; }
        .badge-container { border: none !important; overflow: visible !important; page-break-after: avoid; }
        .no-print { display: none !important; }
      }
      @media screen {
        body { background-color: #f0f2f5; }
        .print-preview {
          max-width: 650px; margin: 2rem auto; padding: 2rem; background: white;
          border-radius: 8px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        }
      }
    `,document.head.appendChild(f),(async()=>{try{const[C,_]=await Promise.all([G.get(`/registrations/${t}`),G.get("/settings")]);l(C.data.registration),d(_.data)}catch(C){s(C.response?.data?.message||`Failed to load data for ticket ${t}.`)}finally{a(!1)}})(),()=>{document.head.contains(f)&&document.head.removeChild(f)}},[t]),r.useEffect(()=>{if(o&&u&&!x&&!m&&!R.current){R.current=!0;const f=()=>{setTimeout(()=>{console.log("🚀 Kicking off print process..."),p(!0)},800)};(()=>{const C=Array.from(document.images);if(C.length===0)return f();Promise.all(C.map(_=>_.complete?Promise.resolve():new Promise(z=>{_.onload=_.onerror=z}))).then(f)})()}},[o,u,x,m]),r.useEffect(()=>{i&&(console.log("🖨️ Print dialog is opening (blocking JS)..."),window.print(),console.log("..Print dialog closed. Toggling state."),p(!1))},[i]),r.useEffect(()=>{j&&!i&&(console.log("✅ Print process finished. Closing window now."),setTimeout(()=>window.close(),200))},[j,i]),x?e.jsx(ye,{className:"d-flex justify-content-center align-items-center",style:{minHeight:"100vh"},children:e.jsxs("div",{className:"text-center",children:[e.jsx(je,{animation:"border",variant:"primary",style:{width:"3rem",height:"3rem"}}),e.jsx("p",{className:"mt-3 text-muted",children:"Loading badge data..."})]})}):m?e.jsx(ye,{className:"mt-5",children:e.jsxs(ue,{variant:"danger",children:[e.jsx(ue.Heading,{children:"Error Loading Badge"}),e.jsx("p",{children:m})]})}):!o||!u?e.jsx(ye,{className:"mt-5",children:e.jsx(ue,{variant:"warning",children:e.jsx("p",{children:"Could not find data for this badge."})})}):e.jsxs("div",{className:"print-preview",children:[e.jsxs("div",{className:"no-print text-center mb-4",children:[e.jsx("h4",{className:"mb-2",children:"Badge Print Preview"}),e.jsx("p",{className:"text-muted",children:"The print dialog will open automatically."}),e.jsx("p",{className:"text-info small mb-3",children:"This window will close automatically after the print job is sent."}),e.jsx("button",{className:"btn btn-primary",onClick:()=>p(!0),children:"🖨️ Print Again"})]}),e.jsx("div",{className:"badge-container",children:e.jsx(Rs,{settings:u,registration:o,showQr:!1})})]})}const zs=()=>{const[t,o]=r.useState({badge_status:{not_printed:0,printed:0,reprinted:0},payment_status:{paid:0,unpaid:0,complimentary:0},registration_type:{onsite:0,online:0,pre_registered:0,complimentary:0},demographics:{age_ranges:{},gender:{},total_with_demographics:0},survey:{industry_sector:{},reason_for_attending:{},areas_of_interest:{},how_did_you_learn:{},total_with_survey:0},total:0,confirmed:0,unconfirmed:0}),[l,u]=r.useState([]),[d,x]=r.useState([]),[a,m]=r.useState(""),[s,i]=r.useState(1),[p]=r.useState(10),[j,R]=r.useState(!1),[f,b]=r.useState(null),[C,_]=r.useState(!1),[z,D]=r.useState(""),[$,v]=r.useState(""),[P,B]=r.useState("all"),[q,O]=r.useState("all"),[V,ce]=r.useState("all"),[w,M]=r.useState("all"),[A,E]=r.useState("all"),[Z,ge]=r.useState("id"),[xe,ee]=r.useState("desc"),[k,Ee]=r.useState({id:!0,name:!0,email:!0,phone:!1,address:!1,company:!0,designation:!1,type:!0,payment:!0,badge:!0,age_range:!1,gender:!1,industry:!1,date:!0}),[Ae,we]=r.useState("overview");r.useEffect(()=>{Ge(),ve()},[]),r.useEffect(()=>{pe(),i(1)},[a,l,z,$,P,q,V,w,A,Z,xe]);const Ge=async()=>{try{b(null);const n=await G.get("/dashboard/reports-counts");console.log("✅ Reports counts:",n.data),o(n.data)}catch(n){console.error("❌ Error fetching counts:",n),b(n.response?.data?.message||"Failed to fetch counts")}},ve=async()=>{try{R(!0),b(null);const c=(await G.get("/dashboard/reports-list",{params:{all:!0}})).data.data||[];console.log("✅ Loaded all registrations:",c.length),u(c),x(c)}catch(n){console.error("❌ Error fetching data:",n),b(n.response?.data?.message||"Failed to fetch registrations"),u([]),x([])}finally{R(!1)}},pe=()=>{let n=[...l];if(a.trim()){const c=a.toLowerCase().trim();n=n.filter(N=>{const Q=(N.first_name||"").toLowerCase(),K=(N.last_name||"").toLowerCase(),_e=`${Q} ${K}`,Re=(N.email||"").toLowerCase(),ne=(N.phone||"").toLowerCase(),Y=(N.ticket_number||"").toLowerCase(),Be=(N.company_name||"").toLowerCase(),ie=(N.designation||"").toLowerCase();return Q.includes(c)||K.includes(c)||_e.includes(c)||Re.includes(c)||ne.includes(c)||Y.includes(c)||Be.includes(c)||ie.includes(c)})}if(z){const c=new Date(z);c.setHours(0,0,0,0),n=n.filter(N=>new Date(N.created_at)>=c)}if($){const c=new Date($);c.setHours(23,59,59,999),n=n.filter(N=>new Date(N.created_at)<=c)}P!=="all"&&(n=n.filter(c=>c.payment_status===P)),q!=="all"&&(n=n.filter(c=>c.registration_type===q)),V!=="all"&&(n=n.filter(c=>c.age_range===V)),w!=="all"&&(n=n.filter(c=>c.gender===w)),A!=="all"&&(n=n.filter(c=>c.industry_sector===A)),n.sort((c,N)=>{let Q,K;switch(Z){case"id":Q=c.id||0,K=N.id||0;break;case"name":Q=`${c.first_name||""} ${c.last_name||""}`.toLowerCase(),K=`${N.first_name||""} ${N.last_name||""}`.toLowerCase();break;case"email":Q=(c.email||"").toLowerCase(),K=(N.email||"").toLowerCase();break;case"date":Q=new Date(c.created_at),K=new Date(N.created_at);break;case"payment":Q=c.payment_status||"",K=N.payment_status||"";break;case"company":Q=(c.company_name||"").toLowerCase(),K=(N.company_name||"").toLowerCase();break;default:Q=c[Z]||"",K=N[Z]||""}return Q<K?xe==="asc"?-1:1:Q>K?xe==="asc"?1:-1:0}),console.log(`🔍 Filtered: ${n.length} from ${l.length} total`),x(n)},ke=n=>n?n.split("-").map(c=>c.charAt(0).toUpperCase()+c.slice(1).toLowerCase()).join("-"):"N/A",ae=n=>m(n.target.value),Ue=()=>m(""),qe=()=>{ve(),Ge()},Fe=n=>{Ee(c=>({...c,[n]:!c[n]}))},W=n=>{Z===n?ee(xe==="asc"?"desc":"asc"):(ge(n),ee("asc"))},H=()=>{m(""),D(""),v(""),B("all"),O("all"),ce("all"),M("all"),E("all"),ge("id"),ee("desc")},X=s*p,te=X-p,Se=d.slice(te,X),fe=Math.ceil(d.length/p),Ce=a||z||$||P!=="all"||q!=="all"||V!=="all"||w!=="all"||A!=="all",Oe=()=>{if(fe<=1)return null;const n=5;let c=Math.max(1,s-Math.floor(n/2)),N=Math.min(fe,c+n-1);return N-c<n-1&&(c=Math.max(1,N-n+1)),e.jsxs(ze,{className:"mb-0",children:[e.jsx(ze.First,{onClick:()=>i(1),disabled:s===1}),e.jsx(ze.Prev,{onClick:()=>i(s-1),disabled:s===1}),c>1&&e.jsxs(e.Fragment,{children:[e.jsx(ze.Item,{onClick:()=>i(1),children:"1"}),c>2&&e.jsx(ze.Ellipsis,{disabled:!0})]}),[...Array(N-c+1)].map((Q,K)=>{const _e=c+K;return e.jsx(ze.Item,{active:_e===s,onClick:()=>i(_e),children:_e},_e)}),N<fe&&e.jsxs(e.Fragment,{children:[N<fe-1&&e.jsx(ze.Ellipsis,{disabled:!0}),e.jsx(ze.Item,{onClick:()=>i(fe),children:fe})]}),e.jsx(ze.Next,{onClick:()=>i(s+1),disabled:s===fe}),e.jsx(ze.Last,{onClick:()=>i(fe),disabled:s===fe})]})},$e=(n,c,N,Q="primary")=>{const K=N>0?Math.round(c/N*100):0;return e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-1",children:[e.jsx("small",{className:"text-muted",style:{fontSize:"0.85rem"},children:n.length>50?n.substring(0,50)+"...":n}),e.jsxs("div",{children:[e.jsx(J,{bg:Q,className:"me-2",children:c}),e.jsxs("small",{className:"text-muted",children:[K,"%"]})]})]}),e.jsx(Ie,{now:K,variant:Q,style:{height:"8px"}})]})},nt=async()=>{try{_(!0),console.log("🚀 Starting PDF export...");const n=d;if(n.length===0){alert("No data to export"),_(!1);return}const c=new Xt({orientation:"landscape",unit:"mm",format:"a4"});c.setFontSize(20),c.setTextColor(0,123,255),c.text("ICEGEX 2025 - Registration Reports",14,15),c.setFontSize(10),c.setTextColor(100,100,100),c.text(`Generated on: ${new Date().toLocaleString()}`,14,22);let N=27;Ce&&(c.setFontSize(9),c.setTextColor(255,0,0),c.text("FILTERED REPORT",14,N),N+=4,a&&c.text(`Search: "${a}"`,14,N+=4),z&&c.text(`From: ${z}`,14,N+=4),$&&c.text(`To: ${$}`,14,N+=4),P!=="all"&&c.text(`Payment: ${P}`,14,N+=4),q!=="all"&&c.text(`Type: ${q}`,14,N+=4),N+=3),c.setFontSize(11),c.setTextColor(0,0,0),c.text("Summary Statistics:",14,N),c.setFontSize(8),N+=5,c.text("Badge Status:",14,N),c.text(`Not Printed: ${t.badge_status.not_printed}`,24,N+=4),c.text(`Printed: ${t.badge_status.printed}`,24,N+=4),c.text(`Re-Printed: ${t.badge_status.reprinted}`,24,N+=4),N+=2,c.text("Payment Status:",14,N+=4),c.text(`Paid: ${t.payment_status.paid}`,24,N+=4),c.text(`Unpaid: ${t.payment_status.unpaid}`,24,N+=4),c.text(`Complimentary: ${t.payment_status.complimentary}`,24,N+=4),N+=2,c.text("Registration Type:",14,N+=4),c.text(`Onsite: ${t.registration_type.onsite}`,24,N+=4),c.text(`Online: ${t.registration_type.online}`,24,N+=4),c.text(`Pre-Registered: ${t.registration_type.pre_registered}`,24,N+=4),c.text(`Complimentary: ${t.registration_type.complimentary}`,24,N+=4),N+=2,c.text(`Total Registrations: ${t.total}`,14,N+=4),c.text(`Confirmed: ${t.confirmed} | Unconfirmed: ${t.unconfirmed}`,14,N+=4),Ce&&(N+=2,c.setTextColor(255,0,0),c.text(`🔍 Filtered Results: ${n.length} records`,14,N+=4)),N+=3,c.setDrawColor(200,200,200),c.line(14,N,283,N);const Q=[],K=[];k.id&&(Q.push("ID"),K.push("id")),k.name&&(Q.push("Name"),K.push("name")),k.email&&(Q.push("Email"),K.push("email")),k.phone&&(Q.push("Phone"),K.push("phone")),k.company&&(Q.push("Company"),K.push("company")),k.designation&&(Q.push("Designation"),K.push("designation")),k.type&&(Q.push("Type"),K.push("type")),k.payment&&(Q.push("Payment"),K.push("payment")),k.age_range&&(Q.push("Age"),K.push("age_range")),k.gender&&(Q.push("Gender"),K.push("gender")),k.industry&&(Q.push("Industry"),K.push("industry")),k.date&&(Q.push("Date"),K.push("date"));const _e=n.map(ne=>{const Y=[];return K.forEach(Be=>{switch(Be){case"id":Y.push(String(ne.id||""));break;case"name":Y.push(`${ne.first_name||""} ${ne.last_name||""}`.trim());break;case"email":Y.push(ne.email||"N/A");break;case"phone":Y.push(ne.phone||"N/A");break;case"company":Y.push(ne.company_name||"N/A");break;case"designation":Y.push(ne.designation||"N/A");break;case"type":Y.push(ke(ne.registration_type));break;case"payment":Y.push((ne.payment_status||"unpaid").toUpperCase());break;case"age_range":Y.push(ne.age_range||"N/A");break;case"gender":Y.push(ne.gender||"N/A");break;case"industry":Y.push((ne.industry_sector||"N/A").substring(0,30));break;case"date":Y.push(new Date(ne.created_at).toLocaleDateString());break;default:Y.push("")}}),Y});Kt(c,{startY:N+4,head:[Q],body:_e,theme:"striped",styles:{fontSize:7,cellPadding:1.5},headStyles:{fillColor:[0,123,255],textColor:[255,255,255],fontStyle:"bold",halign:"center"},didDrawPage:ne=>{const Y=c.getNumberOfPages();c.setFontSize(8),c.setTextColor(150);const Be=`Page ${ne.pageNumber} of ${Y}`,ie=c.internal.pageSize.getWidth(),oe=c.internal.pageSize.getHeight();c.text(Be,ie/2,oe-10,{align:"center"})}});const Re=`ICEGEX_2025_Report_${new Date().toISOString().split("T")[0]}.pdf`;c.save(Re),console.log("✅ PDF saved:",Re),alert(`✅ PDF exported successfully!
Records: ${n.length}
File: ${Re}`)}catch(n){console.error("❌ PDF export error:",n),alert("Failed to export PDF: "+n.message)}finally{_(!1)}},at=async()=>{try{_(!0);const n=d;if(n.length===0){alert("No data to export"),_(!1);return}const c=[["ICEGEX 2025 - Registration Reports"],[`Generated on: ${new Date().toLocaleString()}`],[""],["Summary Statistics"],["Badge Status"],["Not Printed",t.badge_status.not_printed],["Printed",t.badge_status.printed],["Re-Printed",t.badge_status.reprinted],[""],["Payment Status"],["Paid",t.payment_status.paid],["Unpaid",t.payment_status.unpaid],["Complimentary",t.payment_status.complimentary],[""],["Registration Type"],["Onsite",t.registration_type.onsite],["Online",t.registration_type.online],["Pre-Registered",t.registration_type.pre_registered],["Complimentary Type",t.registration_type.complimentary],[""],["Overall Totals"],["Total Registrations",t.total],["Confirmed",t.confirmed],["Unconfirmed",t.unconfirmed],...Ce?[[""],["🔍 Filtered Results",n.length]]:[],[""],["Registration Details"]],N=[];k.id&&N.push("ID"),k.name&&N.push("First Name","Last Name"),k.email&&N.push("Email"),k.phone&&N.push("Phone"),k.address&&N.push("Address"),k.company&&N.push("Company"),k.designation&&N.push("Designation"),k.type&&N.push("Registration Type"),k.payment&&N.push("Payment Status"),k.badge&&N.push("Badge Status"),k.age_range&&N.push("Age Range"),k.gender&&N.push("Gender"),k.industry&&N.push("Industry Sector"),k.date&&N.push("Registration Date");const Q=n.map(ie=>{const oe=[];return k.id&&oe.push(ie.id),k.name&&oe.push(`"${ie.first_name||""}"`,`"${ie.last_name||""}"`),k.email&&oe.push(`"${ie.email||"N/A"}"`),k.phone&&oe.push(`"${ie.phone||"N/A"}"`),k.address&&oe.push(`"${(ie.address||"N/A").replace(/"/g,'""')}"`),k.company&&oe.push(`"${(ie.company_name||"N/A").replace(/"/g,'""')}"`),k.designation&&oe.push(`"${(ie.designation||"N/A").replace(/"/g,'""')}"`),k.type&&oe.push(ke(ie.registration_type)),k.payment&&oe.push(ie.payment_status?.toUpperCase()||"UNPAID"),k.badge&&oe.push(`"${ie.badge_status?.name||"not_printed"}"`),k.age_range&&oe.push(`"${ie.age_range||"N/A"}"`),k.gender&&oe.push(`"${ie.gender||"N/A"}"`),k.industry&&oe.push(`"${(ie.industry_sector||"N/A").replace(/"/g,'""')}"`),k.date&&oe.push(new Date(ie.created_at).toLocaleString()),oe}),_e=[...c.map(ie=>ie.join(",")),N.join(","),...Q.map(ie=>ie.join(","))].join(`
`),Re=new Blob([_e],{type:"text/csv;charset=utf-8;"}),ne=document.createElement("a"),Y=URL.createObjectURL(Re);ne.setAttribute("href",Y);const Be=`ICEGEX_2025_Report_${new Date().toISOString().split("T")[0]}.csv`;ne.setAttribute("download",Be),ne.style.visibility="hidden",document.body.appendChild(ne),ne.click(),document.body.removeChild(ne),console.log("✅ CSV exported successfully"),alert(`✅ CSV exported successfully!
Records: ${n.length}
File: ${Be}`)}catch(n){console.error("❌ CSV export error:",n),alert("Failed to export CSV: "+n.message)}finally{_(!1)}},it=n=>{switch(n){case"onsite":return"primary";case"online":return"info";case"pre-registered":return"secondary";case"complimentary":return"success";default:return"light"}},Je=n=>{switch(n){case"paid":return"success";case"unpaid":return"danger";case"complimentary":return"info";default:return"secondary"}},Te=n=>Z!==n?"↕️":xe==="asc"?"↑":"↓",ot=[...new Set(l.map(n=>n.age_range).filter(Boolean))],lt=[...new Set(l.map(n=>n.gender).filter(Boolean))],dt=[...new Set(l.map(n=>n.industry_sector).filter(Boolean))];return e.jsxs(ye,{fluid:!0,className:"mt-4 px-4",children:[e.jsxs("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[e.jsx("h2",{children:"📊 ICEGEX 2025 - Reports & Analytics"}),e.jsx(de,{variant:"outline-primary",size:"sm",onClick:qe,disabled:j,children:j?e.jsxs(e.Fragment,{children:[e.jsx(je,{animation:"border",size:"sm",className:"me-1"}),"Loading..."]}):e.jsx(e.Fragment,{children:"🔄 Refresh Data"})})]}),f&&e.jsxs("div",{className:"alert alert-danger alert-dismissible fade show",role:"alert",children:["❌ ",f,e.jsx("button",{type:"button",className:"btn-close",onClick:()=>b(null)})]}),e.jsxs(Wt,{activeKey:Ae,onSelect:n=>we(n),className:"mb-3",children:[e.jsxs(xt,{eventKey:"overview",title:"📊 Overview",children:[e.jsxs(g,{className:"mb-4 shadow-sm",children:[e.jsx(g.Header,{className:"bg-primary text-white",children:e.jsx("h5",{className:"mb-0",children:"📈 Summary Statistics"})}),e.jsx(g.Body,{children:e.jsxs(re,{className:"text-center g-3",children:[e.jsx(S,{md:12,children:e.jsx("h6",{className:"text-muted mb-3",children:"Badge Status"})}),e.jsx(S,{md:4,children:e.jsxs("div",{className:"p-3 border rounded bg-light",children:[e.jsx("h3",{className:"text-secondary mb-1",children:t.badge_status.not_printed}),e.jsx("small",{className:"text-muted",children:"📄 Not Printed"})]})}),e.jsx(S,{md:4,children:e.jsxs("div",{className:"p-3 border rounded bg-light",children:[e.jsx("h3",{className:"text-success mb-1",children:t.badge_status.printed}),e.jsx("small",{className:"text-muted",children:"✅ Printed"})]})}),e.jsx(S,{md:4,children:e.jsxs("div",{className:"p-3 border rounded bg-light",children:[e.jsx("h3",{className:"text-warning mb-1",children:t.badge_status.reprinted}),e.jsx("small",{className:"text-muted",children:"🔄 Re-Printed"})]})}),e.jsx(S,{md:12,className:"mt-4",children:e.jsx("h6",{className:"text-muted mb-3",children:"Payment Status"})}),e.jsx(S,{md:4,children:e.jsxs("div",{className:"p-3 border rounded bg-light",children:[e.jsx("h3",{className:"text-success mb-1",children:t.payment_status.paid}),e.jsx("small",{className:"text-muted",children:"💰 Paid"})]})}),e.jsx(S,{md:4,children:e.jsxs("div",{className:"p-3 border rounded bg-light",children:[e.jsx("h3",{className:"text-danger mb-1",children:t.payment_status.unpaid}),e.jsx("small",{className:"text-muted",children:"❌ Unpaid"})]})}),e.jsx(S,{md:4,children:e.jsxs("div",{className:"p-3 border rounded bg-light",children:[e.jsx("h3",{className:"text-info mb-1",children:t.payment_status.complimentary}),e.jsx("small",{className:"text-muted",children:"🎁 Complimentary"})]})}),e.jsx(S,{md:12,className:"mt-4",children:e.jsx("h6",{className:"text-muted mb-3",children:"Registration Type"})}),e.jsx(S,{md:3,children:e.jsxs("div",{className:"p-3 border rounded bg-light",children:[e.jsx("h3",{className:"text-primary mb-1",children:t.registration_type.onsite}),e.jsx("small",{className:"text-muted",children:"🏢 Onsite"})]})}),e.jsx(S,{md:3,children:e.jsxs("div",{className:"p-3 border rounded bg-light",children:[e.jsx("h3",{className:"text-info mb-1",children:t.registration_type.online}),e.jsx("small",{className:"text-muted",children:"💻 Online"})]})}),e.jsx(S,{md:3,children:e.jsxs("div",{className:"p-3 border rounded bg-light",children:[e.jsx("h3",{className:"text-secondary mb-1",children:t.registration_type.pre_registered}),e.jsx("small",{className:"text-muted",children:"📋 Pre-Registered"})]})}),e.jsx(S,{md:3,children:e.jsxs("div",{className:"p-3 border rounded bg-light",children:[e.jsx("h3",{className:"text-success mb-1",children:t.registration_type.complimentary}),e.jsx("small",{className:"text-muted",children:"🎁 Complimentary"})]})}),e.jsx(S,{md:12,className:"mt-4",children:e.jsx("h6",{className:"text-muted mb-3",children:"Overall"})}),e.jsx(S,{md:4,children:e.jsxs("div",{className:"p-3 border rounded bg-primary text-white",children:[e.jsx("h3",{className:"mb-1",children:t.total}),e.jsx("small",{children:"👥 Total Registrations"})]})}),e.jsx(S,{md:4,children:e.jsxs("div",{className:"p-3 border rounded bg-success text-white",children:[e.jsx("h3",{className:"mb-1",children:t.confirmed}),e.jsx("small",{children:"✅ Confirmed"})]})}),e.jsx(S,{md:4,children:e.jsxs("div",{className:"p-3 border rounded bg-warning text-dark",children:[e.jsx("h3",{className:"mb-1",children:t.unconfirmed}),e.jsx("small",{children:"⏳ Unconfirmed"})]})})]})})]}),t.demographics.total_with_demographics>0&&e.jsxs(g,{className:"mb-4 shadow-sm",children:[e.jsx(g.Header,{className:"bg-info text-white",children:e.jsx("h5",{className:"mb-0",children:"👥 Demographics Breakdown"})}),e.jsxs(g.Body,{children:[e.jsxs(re,{children:[e.jsxs(S,{md:6,children:[e.jsx("h6",{className:"mb-3",children:"Age Distribution"}),e.jsx("div",{className:"list-group",children:Object.entries(t.demographics.age_ranges||{}).map(([n,c])=>e.jsxs("div",{className:"list-group-item d-flex justify-content-between align-items-center",children:[e.jsx("span",{children:n}),e.jsx(J,{bg:"primary",children:c})]},n))})]}),e.jsxs(S,{md:6,children:[e.jsx("h6",{className:"mb-3",children:"Gender Distribution"}),e.jsx("div",{className:"list-group",children:Object.entries(t.demographics.gender||{}).map(([n,c])=>e.jsxs("div",{className:"list-group-item d-flex justify-content-between align-items-center",children:[e.jsx("span",{children:n}),e.jsx(J,{bg:"secondary",children:c})]},n))})]})]}),e.jsx("div",{className:"mt-3 text-center",children:e.jsxs("small",{className:"text-muted",children:[t.demographics.total_with_demographics," registrants provided demographic information"]})})]})]})]}),e.jsx(xt,{eventKey:"survey",title:"📝 Event Survey - ICEGEX 2025",children:t.survey.total_with_survey>0?e.jsxs(e.Fragment,{children:[e.jsxs(g,{className:"mb-4 shadow-sm",children:[e.jsx(g.Header,{className:"bg-success text-white",children:e.jsx("h5",{className:"mb-0",children:"📊 Survey Response Overview"})}),e.jsx(g.Body,{children:e.jsxs(re,{className:"text-center",children:[e.jsx(S,{md:4,children:e.jsxs("div",{className:"p-3 border rounded",children:[e.jsx("h2",{className:"text-success mb-1",children:t.survey.total_with_survey}),e.jsx("small",{className:"text-muted",children:"Survey Responses"})]})}),e.jsx(S,{md:4,children:e.jsxs("div",{className:"p-3 border rounded",children:[e.jsx("h2",{className:"text-primary mb-1",children:t.total}),e.jsx("small",{className:"text-muted",children:"Total Registrations"})]})}),e.jsx(S,{md:4,children:e.jsxs("div",{className:"p-3 border rounded",children:[e.jsxs("h2",{className:"text-info mb-1",children:[Math.round(t.survey.total_with_survey/t.total*100),"%"]}),e.jsx("small",{className:"text-muted",children:"Response Rate"})]})})]})})]}),e.jsxs(g,{className:"mb-4 shadow-sm",children:[e.jsx(g.Header,{className:"bg-primary text-white",children:e.jsx("h5",{className:"mb-0",children:"🏭 Industry Sector Distribution"})}),e.jsxs(g.Body,{children:[e.jsx("p",{className:"text-muted mb-3",children:e.jsx("small",{children:"Understanding which industries our attendees represent"})}),Object.entries(t.survey.industry_sector||{}).sort((n,c)=>c[1]-n[1]).map(([n,c])=>$e(n,c,t.survey.total_with_survey,"primary")),Object.keys(t.survey.industry_sector||{}).length===0&&e.jsx("p",{className:"text-center text-muted",children:"No industry data available"})]})]}),e.jsxs(g,{className:"mb-4 shadow-sm",children:[e.jsx(g.Header,{className:"bg-info text-white",children:e.jsx("h5",{className:"mb-0",children:"🎯 Reasons for Attending"})}),e.jsxs(g.Body,{children:[e.jsx("p",{className:"text-muted mb-3",children:e.jsx("small",{children:"What motivates attendees to join ICEGEX 2025"})}),Object.entries(t.survey.reason_for_attending||{}).sort((n,c)=>c[1]-n[1]).map(([n,c])=>$e(n,c,t.survey.total_with_survey,"info")),Object.keys(t.survey.reason_for_attending||{}).length===0&&e.jsx("p",{className:"text-center text-muted",children:"No reason data available"})]})]}),e.jsxs(g,{className:"mb-4 shadow-sm",children:[e.jsx(g.Header,{className:"bg-warning text-dark",children:e.jsx("h5",{className:"mb-0",children:"💡 Specific Areas of Interest"})}),e.jsxs(g.Body,{children:[e.jsx("p",{className:"text-muted mb-3",children:e.jsx("small",{children:"What topics and areas attendees are most interested in"})}),Object.entries(t.survey.areas_of_interest||{}).sort((n,c)=>c[1]-n[1]).map(([n,c])=>$e(n,c,t.survey.total_with_survey,"warning")),Object.keys(t.survey.areas_of_interest||{}).length===0&&e.jsx("p",{className:"text-center text-muted",children:"No interest data available"})]})]}),e.jsxs(g,{className:"mb-4 shadow-sm",children:[e.jsx(g.Header,{className:"bg-danger text-white",children:e.jsx("h5",{className:"mb-0",children:"📢 Marketing Channel Effectiveness"})}),e.jsxs(g.Body,{children:[e.jsx("p",{className:"text-muted mb-3",children:e.jsx("small",{children:"How attendees discovered ICEGEX 2025"})}),Object.entries(t.survey.how_did_you_learn||{}).sort((n,c)=>c[1]-n[1]).map(([n,c])=>$e(n,c,t.survey.total_with_survey,"danger")),Object.keys(t.survey.how_did_you_learn||{}).length===0&&e.jsx("p",{className:"text-center text-muted",children:"No marketing channel data available"})]})]}),e.jsxs(g,{className:"shadow-sm",children:[e.jsx(g.Header,{className:"bg-dark text-white",children:e.jsx("h5",{className:"mb-0",children:"📊 Key Insights"})}),e.jsx(g.Body,{children:e.jsxs(re,{children:[e.jsxs(S,{md:6,children:[e.jsx("h6",{className:"mb-3",children:"Top Industry"}),Object.entries(t.survey.industry_sector||{}).length>0?e.jsxs("div",{className:"alert alert-primary",children:[e.jsx("strong",{children:Object.entries(t.survey.industry_sector).sort((n,c)=>c[1]-n[1])[0][0]}),e.jsx("br",{}),e.jsxs("small",{children:[Object.entries(t.survey.industry_sector).sort((n,c)=>c[1]-n[1])[0][1]," responses"]})]}):e.jsx("p",{className:"text-muted",children:"No data"})]}),e.jsxs(S,{md:6,children:[e.jsx("h6",{className:"mb-3",children:"Most Effective Channel"}),Object.entries(t.survey.how_did_you_learn||{}).length>0?e.jsxs("div",{className:"alert alert-danger",children:[e.jsx("strong",{children:Object.entries(t.survey.how_did_you_learn).sort((n,c)=>c[1]-n[1])[0][0]}),e.jsx("br",{}),e.jsxs("small",{children:[Object.entries(t.survey.how_did_you_learn).sort((n,c)=>c[1]-n[1])[0][1]," responses"]})]}):e.jsx("p",{className:"text-muted",children:"No data"})]}),e.jsxs(S,{md:6,children:[e.jsx("h6",{className:"mb-3",children:"Top Reason for Attending"}),Object.entries(t.survey.reason_for_attending||{}).length>0?e.jsxs("div",{className:"alert alert-info",children:[e.jsxs("strong",{children:[Object.entries(t.survey.reason_for_attending).sort((n,c)=>c[1]-n[1])[0][0].substring(0,50),"..."]}),e.jsx("br",{}),e.jsxs("small",{children:[Object.entries(t.survey.reason_for_attending).sort((n,c)=>c[1]-n[1])[0][1]," responses"]})]}):e.jsx("p",{className:"text-muted",children:"No data"})]}),e.jsxs(S,{md:6,children:[e.jsx("h6",{className:"mb-3",children:"Top Area of Interest"}),Object.entries(t.survey.areas_of_interest||{}).length>0?e.jsxs("div",{className:"alert alert-warning",children:[e.jsx("strong",{children:Object.entries(t.survey.areas_of_interest).sort((n,c)=>c[1]-n[1])[0][0]}),e.jsx("br",{}),e.jsxs("small",{children:[Object.entries(t.survey.areas_of_interest).sort((n,c)=>c[1]-n[1])[0][1]," responses"]})]}):e.jsx("p",{className:"text-muted",children:"No data"})]})]})})]})]}):e.jsx(g,{children:e.jsxs(g.Body,{className:"text-center py-5",children:[e.jsx("h3",{className:"text-muted mb-3",children:"📝 No Survey Data Available"}),e.jsxs("p",{className:"text-muted",children:["No attendees have completed the optional survey questions yet.",e.jsx("br",{}),"Survey responses will appear here as registrations are submitted."]})]})})}),e.jsx(xt,{eventKey:"records",title:"📋 Detailed Records",children:e.jsxs(g,{className:"mb-3 shadow-sm",children:[e.jsx(g.Header,{className:"bg-success text-white",children:e.jsx("h5",{className:"mb-0",children:"📋 Registration List"})}),e.jsxs(g.Body,{children:[e.jsxs(re,{className:"mb-3 g-2",children:[e.jsx(S,{md:3,children:e.jsxs(T.Group,{children:[e.jsx(T.Label,{className:"small fw-bold",children:"🔍 Search"}),e.jsxs(We,{size:"sm",children:[e.jsx(We.Text,{children:"🔍"}),e.jsx(T.Control,{type:"text",placeholder:"Name, email, company...",value:a,onChange:ae,disabled:j}),a&&e.jsx(de,{variant:"outline-secondary",onClick:Ue,size:"sm",children:"✕"})]})]})}),e.jsx(S,{md:2,children:e.jsxs(T.Group,{children:[e.jsx(T.Label,{className:"small fw-bold",children:"📅 From"}),e.jsx(T.Control,{type:"date",size:"sm",value:z,onChange:n=>D(n.target.value),disabled:j})]})}),e.jsx(S,{md:2,children:e.jsxs(T.Group,{children:[e.jsx(T.Label,{className:"small fw-bold",children:"📅 To"}),e.jsx(T.Control,{type:"date",size:"sm",value:$,onChange:n=>v(n.target.value),disabled:j})]})}),e.jsx(S,{md:2,children:e.jsxs(T.Group,{children:[e.jsx(T.Label,{className:"small fw-bold",children:"💰 Payment"}),e.jsxs(T.Select,{size:"sm",value:P,onChange:n=>B(n.target.value),disabled:j,children:[e.jsx("option",{value:"all",children:"All"}),e.jsx("option",{value:"paid",children:"Paid"}),e.jsx("option",{value:"unpaid",children:"Unpaid"}),e.jsx("option",{value:"complimentary",children:"Complimentary"})]})]})}),e.jsx(S,{md:3,children:e.jsxs(T.Group,{children:[e.jsx(T.Label,{className:"small fw-bold",children:"📋 Type"}),e.jsxs(T.Select,{size:"sm",value:q,onChange:n=>O(n.target.value),disabled:j,children:[e.jsx("option",{value:"all",children:"All Types"}),e.jsx("option",{value:"onsite",children:"Onsite"}),e.jsx("option",{value:"online",children:"Online"}),e.jsx("option",{value:"pre-registered",children:"Pre-Registered"}),e.jsx("option",{value:"complimentary",children:"Complimentary"})]})]})}),e.jsx(S,{md:3,children:e.jsxs(T.Group,{children:[e.jsx(T.Label,{className:"small fw-bold",children:"👤 Age Range"}),e.jsxs(T.Select,{size:"sm",value:V,onChange:n=>ce(n.target.value),disabled:j,children:[e.jsx("option",{value:"all",children:"All Ages"}),ot.map(n=>e.jsx("option",{value:n,children:n},n))]})]})}),e.jsx(S,{md:2,children:e.jsxs(T.Group,{children:[e.jsx(T.Label,{className:"small fw-bold",children:"⚧ Gender"}),e.jsxs(T.Select,{size:"sm",value:w,onChange:n=>M(n.target.value),disabled:j,children:[e.jsx("option",{value:"all",children:"All"}),lt.map(n=>e.jsx("option",{value:n,children:n},n))]})]})}),e.jsx(S,{md:4,children:e.jsxs(T.Group,{children:[e.jsx(T.Label,{className:"small fw-bold",children:"🏭 Industry"}),e.jsxs(T.Select,{size:"sm",value:A,onChange:n=>E(n.target.value),disabled:j,children:[e.jsx("option",{value:"all",children:"All Industries"}),dt.slice(0,10).map(n=>e.jsx("option",{value:n,children:n.substring(0,50)},n))]})]})}),e.jsx(S,{md:3,className:"d-flex align-items-end",children:e.jsx(de,{variant:"outline-danger",size:"sm",onClick:H,disabled:!Ce||j,className:"w-100",children:"🗑️ Clear Filters"})})]}),e.jsx(re,{className:"mb-3",children:e.jsx(S,{children:e.jsxs("div",{className:"border rounded p-2 bg-light",children:[e.jsx("small",{className:"fw-bold d-block mb-2",children:"👁️ Show/Hide Columns:"}),e.jsx("div",{className:"d-flex flex-wrap gap-2",children:Object.entries({id:"ID",name:"Name",email:"Email",phone:"Phone",address:"Address",company:"Company",designation:"Designation",type:"Type",payment:"Payment",badge:"Badge",age_range:"Age",gender:"Gender",industry:"Industry",date:"Date"}).map(([n,c])=>e.jsx(T.Check,{type:"checkbox",id:`col-${n}`,label:c,checked:k[n],onChange:()=>Fe(n),inline:!0,className:"small"},n))})]})})}),Ce&&e.jsx("div",{className:"alert alert-info py-2 px-3 mb-3",children:e.jsxs("small",{children:[e.jsx("strong",{children:"🔍 Active Filters:"})," ",a&&e.jsxs(J,{bg:"primary",className:"me-1",children:["Search: ",a.substring(0,20)]}),z&&e.jsxs(J,{bg:"secondary",className:"me-1",children:["From: ",z]}),$&&e.jsxs(J,{bg:"secondary",className:"me-1",children:["To: ",$]}),P!=="all"&&e.jsxs(J,{bg:"success",className:"me-1",children:["Payment: ",P]}),q!=="all"&&e.jsxs(J,{bg:"info",className:"me-1",children:["Type: ",q]}),V!=="all"&&e.jsxs(J,{bg:"warning",className:"me-1",children:["Age: ",V]}),w!=="all"&&e.jsxs(J,{bg:"secondary",className:"me-1",children:["Gender: ",w]}),A!=="all"&&e.jsx(J,{bg:"primary",className:"me-1",children:"Industry"}),e.jsx("br",{}),e.jsxs("strong",{children:["Showing ",d.length," of ",l.length," records"]})]})}),j?e.jsxs("div",{className:"text-center p-5",children:[e.jsx(je,{animation:"border",variant:"primary"}),e.jsx("p",{className:"mt-2",children:"Loading registrations..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"table-responsive",children:e.jsxs(Ht,{striped:!0,bordered:!0,hover:!0,size:"sm",children:[e.jsx("thead",{className:"table-dark",children:e.jsxs("tr",{children:[k.id&&e.jsxs("th",{onClick:()=>W("id"),style:{cursor:"pointer"},className:"user-select-none",children:["ID ",Te("id")]}),k.name&&e.jsxs("th",{onClick:()=>W("name"),style:{cursor:"pointer"},className:"user-select-none",children:["Name ",Te("name")]}),k.email&&e.jsxs("th",{onClick:()=>W("email"),style:{cursor:"pointer"},className:"user-select-none",children:["Email ",Te("email")]}),k.phone&&e.jsx("th",{children:"Phone"}),k.address&&e.jsx("th",{children:"Address"}),k.company&&e.jsxs("th",{onClick:()=>W("company"),style:{cursor:"pointer"},className:"user-select-none",children:["Company ",Te("company")]}),k.designation&&e.jsx("th",{children:"Designation"}),k.type&&e.jsx("th",{children:"Type"}),k.payment&&e.jsxs("th",{onClick:()=>W("payment"),style:{cursor:"pointer"},className:"user-select-none",children:["Payment ",Te("payment")]}),k.badge&&e.jsx("th",{children:"Badge"}),k.age_range&&e.jsx("th",{children:"Age"}),k.gender&&e.jsx("th",{children:"Gender"}),k.industry&&e.jsx("th",{children:"Industry"}),k.date&&e.jsxs("th",{onClick:()=>W("date"),style:{cursor:"pointer"},className:"user-select-none",children:["Date ",Te("date")]})]})}),e.jsx("tbody",{children:Se.length>0?Se.map(n=>e.jsxs("tr",{children:[k.id&&e.jsx("td",{children:n.id}),k.name&&e.jsxs("td",{children:[n.first_name," ",n.last_name]}),k.email&&e.jsx("td",{children:e.jsx("small",{children:n.email||"N/A"})}),k.phone&&e.jsx("td",{children:e.jsx("small",{children:n.phone||"N/A"})}),k.address&&e.jsx("td",{children:e.jsx("small",{children:n.address||"N/A"})}),k.company&&e.jsx("td",{children:e.jsx("small",{children:n.company_name||"N/A"})}),k.designation&&e.jsx("td",{children:e.jsx("small",{children:n.designation||"N/A"})}),k.type&&e.jsx("td",{children:e.jsx(J,{bg:it(n.registration_type),children:ke(n.registration_type)})}),k.payment&&e.jsx("td",{children:e.jsx(J,{bg:Je(n.payment_status),children:(n.payment_status||"unpaid").toUpperCase()})}),k.badge&&e.jsx("td",{children:e.jsx("small",{children:n.badge_status?.name||"N/A"})}),k.age_range&&e.jsx("td",{children:e.jsx("small",{children:n.age_range||"N/A"})}),k.gender&&e.jsx("td",{children:e.jsx("small",{children:n.gender||"N/A"})}),k.industry&&e.jsx("td",{children:e.jsx("small",{children:(n.industry_sector||"N/A").substring(0,30)})}),k.date&&e.jsx("td",{children:e.jsx("small",{children:new Date(n.created_at).toLocaleDateString()})})]},n.id)):e.jsx("tr",{children:e.jsx("td",{colSpan:"20",className:"text-center text-muted py-4",children:Ce?e.jsxs(e.Fragment,{children:["🔍 No registrations found matching your filters",e.jsx("br",{}),e.jsx(de,{variant:"link",size:"sm",onClick:H,className:"mt-2",children:"Clear all filters"})]}):"📭 No registrations yet"})})})]})}),fe>1&&e.jsxs("div",{className:"d-flex justify-content-between align-items-center mt-3 flex-wrap gap-3",children:[e.jsxs("div",{className:"text-muted small",children:["Showing ",e.jsx("strong",{children:te+1})," to"," ",e.jsx("strong",{children:Math.min(X,d.length)})," of"," ",e.jsx("strong",{children:d.length})," records"]}),e.jsx("div",{className:"d-flex justify-content-center flex-grow-1",children:Oe()}),e.jsxs("div",{className:"text-muted small",children:["Page ",e.jsx("strong",{children:s})," of ",e.jsx("strong",{children:fe})]})]})]})]})]})})]}),e.jsxs(g,{className:"shadow-sm",children:[e.jsx(g.Header,{className:"bg-dark text-white",children:e.jsx("h5",{className:"mb-0",children:"📥 Export Options"})}),e.jsxs(g.Body,{children:[Ce&&e.jsx("div",{className:"alert alert-warning py-2 px-3 mb-3",children:e.jsxs("small",{children:[e.jsx("strong",{children:"⚠️ Export Notice:"})," Active filters detected. Export will include ",e.jsx("strong",{children:d.length})," filtered record(s) only."]})}),e.jsxs(re,{children:[e.jsx(S,{md:6,children:e.jsx(de,{variant:"danger",onClick:nt,disabled:C||d.length===0,size:"lg",className:"w-100",children:C?e.jsxs(e.Fragment,{children:[e.jsx(je,{animation:"border",size:"sm",className:"me-2"}),"Generating PDF..."]}):`📄 Export to PDF (${d.length} records)`})}),e.jsx(S,{md:6,children:e.jsx(de,{variant:"success",onClick:at,disabled:C||d.length===0,size:"lg",className:"w-100",children:C?e.jsxs(e.Fragment,{children:[e.jsx(je,{animation:"border",size:"sm",className:"me-2"}),"Generating CSV..."]}):`📊 Export to CSV (${d.length} records)`})})]}),d.length===0&&e.jsx("small",{className:"text-muted d-block mt-2 text-center",children:Ce?"No matching records to export":"No data available"})]})]})]})};function As(){const{user:t,logout:o}=He(),l=Nt(),u=ut(),[d,x]=r.useState(""),a=G.defaults.baseURL.replace("/api","");r.useEffect(()=>{m()},[]);const m=async()=>{try{const p=await G.get("/settings");p.data?.registration_logo_path&&x(p.data.registration_logo_path)}catch(p){console.error("Failed to fetch logo:",p)}},s=p=>{if(!p)return"";if(/^https?:\/\//i.test(p))return p;const j=String(p).replace(/\\/g,"/").replace(/^\/?storage\/?/i,"");return`${a}/storage/${j}`};if(l.pathname.startsWith("/print-badge"))return null;const i=()=>{o(),u("/login")};return e.jsx(tt,{bg:"white",expand:"lg",className:"navbar-modern shadow-smooth sticky-top",style:{backdropFilter:"blur(20px)",backgroundColor:"rgba(255, 255, 255, 0.95)",borderBottom:"1px solid rgba(102, 126, 234, 0.1)",padding:"1rem 0",zIndex:1050},children:e.jsxs(ye,{children:[e.jsxs(tt.Brand,{onClick:()=>u("/"),className:"navbar-brand-modern",style:{cursor:"pointer",display:"flex",alignItems:"center",gap:"0.75rem",fontSize:"1.5rem",fontWeight:"700",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},children:[d?e.jsx("img",{src:s(d),alt:"Registration Logo",style:{height:"40px",width:"auto",maxWidth:"60px",objectFit:"contain",filter:"drop-shadow(0 2px 4px rgba(102, 126, 234, 0.3))",animation:"float 3s ease-in-out infinite"},onError:p=>{console.error("Logo failed to load"),x("")}}):e.jsx("span",{style:{fontSize:"2rem",filter:"drop-shadow(0 2px 4px rgba(102, 126, 234, 0.3))",animation:"float 3s ease-in-out infinite"},children:"🎫"}),e.jsx("span",{children:"Registration System"})]}),e.jsx(tt.Toggle,{"aria-controls":"basic-navbar-nav"}),e.jsx(tt.Collapse,{id:"basic-navbar-nav",children:e.jsxs(pt,{className:"ms-auto align-items-center",children:[e.jsxs(pt.Link,{onClick:()=>u("/"),className:`nav-link-modern ${l.pathname==="/"?"active":""}`,style:{padding:"0.6rem 1.2rem",margin:"0 0.25rem",borderRadius:"10px",fontWeight:"600",fontSize:"0.95rem",color:l.pathname==="/"?"#667eea":"#2c3e50",background:l.pathname==="/"?"rgba(102, 126, 234, 0.1)":"transparent",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden"},children:[e.jsx("span",{className:"me-2",children:"🏠"}),"Home"]}),t?e.jsxs(e.Fragment,{children:[e.jsxs(pt.Link,{onClick:()=>u("/dashboard"),className:`nav-link-modern ${l.pathname.startsWith("/dashboard")?"active":""}`,style:{padding:"0.6rem 1.2rem",margin:"0 0.25rem",borderRadius:"10px",fontWeight:"600",fontSize:"0.95rem",color:l.pathname.startsWith("/dashboard")?"#667eea":"#2c3e50",background:l.pathname.startsWith("/dashboard")?"rgba(102, 126, 234, 0.1)":"transparent",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden"},children:[e.jsx("span",{className:"me-2",children:"📊"}),"Dashboard"]}),e.jsxs(De,{align:"end",className:"ms-3 dropdown-modern",children:[e.jsxs(De.Toggle,{as:de,variant:"outline-primary",id:"user-dropdown",className:"dropdown-toggle-modern",bsPrefix:"custom-dropdown-toggle",style:{display:"flex",alignItems:"center",gap:"0.75rem",padding:"0.65rem 1.25rem",borderRadius:"12px",border:"2px solid transparent",background:"linear-gradient(white, white) padding-box, linear-gradient(135deg, #667eea, #764ba2) border-box",color:"#667eea",fontWeight:"600",fontSize:"0.95rem",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",boxShadow:"0 4px 12px rgba(102, 126, 234, 0.15)",position:"relative",overflow:"hidden"},children:[e.jsx("span",{className:"dropdown-bg-effect",style:{position:"absolute",top:0,left:0,right:0,bottom:0,background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",opacity:0,transition:"opacity 0.4s ease",zIndex:-1}}),e.jsx("span",{style:{fontSize:"1.25rem",display:"flex",alignItems:"center",justifyContent:"center",width:"32px",height:"32px",borderRadius:"50%",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",boxShadow:"0 2px 8px rgba(102, 126, 234, 0.3)"},children:"👤"}),e.jsx("span",{className:"d-none d-md-inline",children:t.name}),e.jsx("svg",{width:"14",height:"14",viewBox:"0 0 14 14",fill:"currentColor",className:"dropdown-arrow",style:{transition:"transform 0.3s ease",marginLeft:"4px"},children:e.jsx("path",{d:"M3 5l4 4 4-4H3z"})})]}),e.jsxs(De.Menu,{className:"dropdown-menu-modern",style:{borderRadius:"16px",border:"none",boxShadow:"0 12px 40px rgba(102, 126, 234, 0.2), 0 4px 12px rgba(0, 0, 0, 0.08)",padding:"0.75rem 0",minWidth:"280px",marginTop:"12px",background:"white",backdropFilter:"blur(20px)",overflow:"hidden"},children:[e.jsxs("div",{style:{padding:"1.5rem 1.25rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"white",marginBottom:"0.75rem",position:"relative",overflow:"hidden"},children:[e.jsx("div",{style:{position:"absolute",top:"-30px",right:"-30px",width:"100px",height:"100px",borderRadius:"50%",background:"rgba(255, 255, 255, 0.1)",animation:"float 6s ease-in-out infinite"}}),e.jsxs("div",{style:{position:"relative",zIndex:1},children:[e.jsx("div",{style:{fontSize:"2.5rem",marginBottom:"0.75rem",display:"flex",alignItems:"center",justifyContent:"center",width:"60px",height:"60px",borderRadius:"50%",background:"rgba(255, 255, 255, 0.2)",backdropFilter:"blur(10px)",border:"3px solid rgba(255, 255, 255, 0.3)",margin:"0 auto 1rem"},children:"👤"}),e.jsx("div",{className:"fw-bold text-center",style:{fontSize:"1.1rem",marginBottom:"0.25rem"},children:t.name}),e.jsx("div",{className:"text-center",style:{opacity:.9,fontSize:"0.9rem",marginBottom:"0.75rem"},children:t.email}),e.jsx("div",{className:"text-center",children:e.jsx("span",{className:"badge",style:{background:"rgba(255, 255, 255, 0.25)",backdropFilter:"blur(10px)",border:"1px solid rgba(255, 255, 255, 0.3)",padding:"0.4rem 1rem",fontSize:"0.8rem",fontWeight:"600",borderRadius:"20px"},children:t.role?.name||"User"})})]})]}),e.jsxs("div",{style:{padding:"0 0.5rem"},children:[e.jsxs(De.Item,{onClick:()=>u("/dashboard/settings"),className:"dropdown-item-modern",style:{padding:"0.75rem 1rem",display:"flex",alignItems:"center",gap:"1rem",borderRadius:"10px",marginBottom:"0.25rem",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",border:"none",background:"transparent",position:"relative",overflow:"hidden"},children:[e.jsx("span",{style:{fontSize:"1.4rem",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"10px",background:"rgba(102, 126, 234, 0.1)",transition:"all 0.3s ease"},children:"⚙️"}),e.jsx("span",{style:{fontWeight:"500",fontSize:"0.95rem"},children:"Settings"})]}),e.jsxs(De.Item,{onClick:()=>u("/dashboard/user-management"),className:"dropdown-item-modern",style:{padding:"0.75rem 1rem",display:"flex",alignItems:"center",gap:"1rem",borderRadius:"10px",marginBottom:"0.25rem",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",border:"none",background:"transparent",position:"relative",overflow:"hidden"},children:[e.jsx("span",{style:{fontSize:"1.4rem",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"10px",background:"rgba(102, 126, 234, 0.1)",transition:"all 0.3s ease"},children:"👥"}),e.jsx("span",{style:{fontWeight:"500",fontSize:"0.95rem"},children:"Profile"})]}),e.jsx(De.Divider,{style:{margin:"0.75rem 0",opacity:.1}}),e.jsxs(De.Item,{onClick:i,className:"dropdown-item-modern dropdown-item-danger",style:{padding:"0.75rem 1rem",display:"flex",alignItems:"center",gap:"1rem",borderRadius:"10px",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",border:"none",background:"transparent",color:"#dc3545",position:"relative",overflow:"hidden"},children:[e.jsx("span",{style:{fontSize:"1.4rem",width:"40px",height:"40px",display:"flex",alignItems:"center",justifyContent:"center",borderRadius:"10px",background:"rgba(220, 53, 69, 0.1)",transition:"all 0.3s ease"},children:"🚪"}),e.jsx("span",{style:{fontWeight:"600",fontSize:"0.95rem"},children:"Logout"})]})]})]})]})]}):e.jsxs(de,{variant:"primary",onClick:()=>u("/login"),className:"login-button-modern ms-3",style:{borderRadius:"12px",padding:"0.65rem 1.75rem",fontWeight:"600",fontSize:"0.95rem",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",border:"none",boxShadow:"0 4px 15px rgba(102, 126, 234, 0.4)",transition:"all 0.4s cubic-bezier(0.4, 0, 0.2, 1)",position:"relative",overflow:"hidden"},children:[e.jsx("span",{className:"me-2",children:"🔐"}),"Login"]})]})})]})})}function Ts(){return e.jsx(Rt,{children:e.jsx(Gt,{children:e.jsxs("div",{className:"page-enter",children:[e.jsx(As,{}),e.jsxs($t,{children:[e.jsx(he,{path:"/",element:e.jsx(es,{})}),e.jsx(he,{path:"/login",element:e.jsx(rs,{})}),e.jsx(he,{path:"/unauthorized",element:e.jsx(is,{})}),e.jsx(he,{path:"/onsite",element:e.jsx(St,{})}),e.jsx(he,{path:"/online",element:e.jsx(ws,{})}),e.jsx(he,{path:"/print-badge/:ticket",element:e.jsx(Ps,{})}),e.jsx(he,{path:"/onsite",element:e.jsx(_t,{roles:["admin","superadmin"],children:e.jsx(St,{})})}),e.jsxs(he,{path:"/dashboard",element:e.jsx(_t,{roles:["admin","superadmin"],children:e.jsx(Ns,{})}),children:[e.jsx(he,{index:!0,element:e.jsx(os,{})}),e.jsx(he,{path:"registrations",element:e.jsx(ps,{})}),e.jsx(he,{path:"register-new",element:e.jsx(ms,{})}),e.jsx(he,{path:"user-management",element:e.jsx(fs,{})}),e.jsx(he,{path:"role-management",element:e.jsx(Ss,{})}),e.jsx(he,{path:"settings",element:e.jsx(bs,{})}),e.jsx(he,{path:"server-mode",element:e.jsx(hs,{})}),e.jsx(he,{path:"scanner",element:e.jsx(ks,{})}),e.jsx(he,{path:"reports",element:e.jsx(zs,{})}),e.jsx(he,{path:"admin",element:e.jsx(ns,{})}),e.jsx(he,{path:"superadmin",element:e.jsx(as,{})})]})]})]})})})}Ut.createRoot(document.getElementById("root")).render(e.jsx(qt.StrictMode,{children:e.jsx(Rt,{children:e.jsx(Ts,{})})}));
//# sourceMappingURL=index-8iFthfMs.js.map
